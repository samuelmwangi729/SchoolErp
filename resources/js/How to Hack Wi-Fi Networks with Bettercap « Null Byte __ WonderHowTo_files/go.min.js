/*! iScroll v5.1.2 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
function SetEqualHeights(){jQuery(".featured-content-slider .items").children().setEqualHeight()}(function(n,t,i){function u(n,i){this.wrapper=typeof n=="string"?t.querySelector(n):n;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var u in i)this.options[u]=i[u];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"";this.options.useTransition=r.hasTransition&&this.options.useTransition;this.options.useTransform=r.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;this.options.tap===!0&&(this.options.tap="tap");this.options.shrinkScrollbars=="scale"&&(this.options.useTransition=!1);this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}function f(n,i,r){var u=t.createElement("div"),f=t.createElement("div");return r===!0&&(u.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator",n=="h"?(r===!0&&(u.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),u.className="iScrollHorizontalScrollbar"):(r===!0&&(u.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),u.className="iScrollVerticalScrollbar"),u.style.cssText+=";overflow:hidden",i||(u.style.pointerEvents="none"),u.appendChild(f),u}function e(i,u){this.wrapper=typeof u.el=="string"?t.querySelector(u.el):u.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=i;this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var f in u)this.options[f]=u[f];this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(n,"touchend",this)),this.options.disablePointer||(r.addEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.addEvent(n,r.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(n,"mouseup",this)));this.options.fade&&(this.wrapperStyle[r.style.transform]=this.scroller.translateZ,this.wrapperStyle[r.style.transitionDuration]=r.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var o=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)},r=function(){function u(n){return e===!1?!1:e===""?n:e+n.charAt(0).toUpperCase()+n.substr(1)}var r={},f=t.createElement("div").style,e=function(){for(var t=["t","webkitT","MozT","msT","OT"],i,n=0,r=t.length;n<r;n++)if(i=t[n]+"ransform",i in f)return t[n].substr(0,t[n].length-1);return!1}(),o;return r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(n,t){for(var i in t)n[i]=t[i]},r.addEvent=function(n,t,i,r){n.addEventListener(t,i,!!r)},r.removeEvent=function(n,t,i,r){n.removeEventListener(t,i,!!r)},r.prefixPointerEvent=function(t){return n.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},r.momentum=function(n,t,r,u,f,e){var h=n-t,s=i.abs(h)/r,o,c;return e=e===undefined?.0006:e,o=n+s*s/(2*e)*(h<0?-1:1),c=s/e,o<u?(o=f?u-f/2.5*(s/8):u,h=i.abs(o-n),c=h/s):o>0&&(o=f?f/2.5*(s/8):0,h=i.abs(n)+o,c=h/s),{destination:i.round(o),duration:c}},o=u("transform"),r.extend(r,{hasTransform:o!==!1,hasPerspective:u("perspective")in f,hasTouch:"ontouchstart"in n,hasPointer:n.PointerEvent||n.MSPointerEvent,hasTransition:u("transition")in f}),r.isBadAndroid=/Android /.test(n.navigator.appVersion)&&!/Chrome\/\d/.test(n.navigator.appVersion),r.extend(r.style={},{transform:o,transitionTimingFunction:u("transitionTimingFunction"),transitionDuration:u("transitionDuration"),transitionDelay:u("transitionDelay"),transformOrigin:u("transformOrigin")}),r.hasClass=function(n,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(n.className)},r.addClass=function(n,t){if(!r.hasClass(n,t)){var i=n.className.split(" ");i.push(t);n.className=i.join(" ")}},r.removeClass=function(n,t){if(r.hasClass(n,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.className=n.className.replace(i," ")}},r.offset=function(n){for(var t=-n.offsetLeft,i=-n.offsetTop;n=n.offsetParent;)t-=n.offsetLeft,i-=n.offsetTop;return{left:t,top:i}},r.preventDefaultException=function(n,t){for(var i in t)if(t[i].test(n[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return i.sqrt(1- --n*n)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(n){var t=4;return(n=n-1)*n*((t+1)*n+t)+1}},bounce:{style:"",fn:function(n){return(n/=1)<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}},elastic:{style:"",fn:function(n){var t=.22;return n===0?0:n==1?1:.4*i.pow(2,-10*n)*i.sin((n-t/4)*2*i.PI/t)+1}}}),r.tap=function(n,i){var r=t.createEvent("Event");r.initEvent(i,!0,!0);r.pageX=n.pageX;r.pageY=n.pageY;n.target.dispatchEvent(r)},r.click=function(n){var i=n.target,r;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(r=t.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,n.view,1,i.screenX,i.screenY,i.clientX,i.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),r._constructed=!0,i.dispatchEvent(r))},r}();u.prototype={version:"5.1.2",_init:function(){this._initEvents();(this.options.scrollbars||this.options.indicators)&&this._initIndicators();this.options.mouseWheel&&this._initWheel();this.options.snap&&this._initSnap();this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0);this._execEvent("destroy")},_transitionEnd:function(n){n.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(n){if((r.eventType[n.type]==1||n.button===0)&&this.enabled&&(!this.initiated||r.eventType[n.type]===this.initiated)){!this.options.preventDefault||r.isBadAndroid||r.preventDefaultException(n.target,this.options.preventDefaultException)||n.preventDefault();var u=n.touches?n.touches[0]:n,t;this.initiated=r.eventType[n.type];this.moved=!1;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=r.getTime();this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd"));this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=u.pageX;this.pointY=u.pageY;this._execEvent("beforeScrollStart")}},_move:function(n){if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&n.preventDefault();var o=n.touches?n.touches[0]:n,t=o.pageX-this.pointX,u=o.pageY-this.pointY,c=r.getTime(),f,e,s,h;if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=t,this.distY+=u,s=i.abs(this.distX),h=i.abs(this.distY),!(c-this.endTime>300)||!(s<10)||!(h<10)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=s>h+this.options.directionLockThreshold?"h":h>=s+this.options.directionLockThreshold?"v":"n"),this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")n.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}u=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")n.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}t=0}t=this.hasHorizontalScroll?t:0;u=this.hasVerticalScroll?u:0;f=this.x+t;e=this.y+u;(f>0||f<this.maxScrollX)&&(f=this.options.bounce?this.x+t/3:f>0?0:this.maxScrollX);(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+u/3:e>0?0:this.maxScrollY);this.directionX=t>0?-1:t<0?1:0;this.directionY=u>0?-1:u<0?1:0;this.moved||this._execEvent("scrollStart");this.moved=!0;this._translate(f,e);c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(n){var f;if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(n.target,this.options.preventDefaultException)&&n.preventDefault();var v=n.changedTouches?n.changedTouches[0]:n,o,s,e=r.getTime()-this.startTime,t=i.round(this.x),u=i.round(this.y),l=i.abs(t-this.startX),a=i.abs(u-this.startY),h=0,c="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(t,u),!this.moved){switch(String(n.type).toLowerCase()){case"touchcancel":case"pointercancel":case"mspointercancel":case"mousecancel":break;default:this.options.tap&&r.tap(n,this.options.tap);this.options.click&&r.click(n)}this._execEvent("scrollCancel");return}if(this._events.flick&&e<200&&l<100&&a<100){this._execEvent("flick");return}if(this.options.momentum&&e<300&&(o=this.hasHorizontalScroll?r.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:t,duration:0},s=this.hasVerticalScroll?r.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:u,duration:0},t=o.destination,u=s.destination,h=i.max(o.duration,s.duration),this.isInTransition=1),this.options.snap&&(f=this._nearestSnap(t,u),this.currentPage=f,h=this.options.snapSpeed||i.max(i.max(i.min(i.abs(t-f.x),1e3),i.min(i.abs(u-f.y),1e3)),300),t=f.x,u=f.y,this.directionX=0,this.directionY=0,c=this.options.bounceEasing),t!=this.x||u!=this.y){(t>0||t<this.maxScrollX||u>0||u<this.maxScrollY)&&(c=r.ease.quadratic);this.scrollTo(t,u,h,c);return}this._execEvent("scrollEnd")}}},_resize:function(){var n=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){n.refresh()},this.options.resizePolling)},resetPosition:function(n){var t=this.x,i=this.y;return(n=n||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y)?!1:(this.scrollTo(t,i,n,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var n=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth);this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight);this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=r.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(n,t){this._events[n]||(this._events[n]=[]);this._events[n].push(t)},off:function(n,t){if(this._events[n]){var i=this._events[n].indexOf(t);i>-1&&this._events[n].splice(i,1)}},_execEvent:function(n){if(this._events[n]){var t=0,i=this._events[n].length;if(i)for(;t<i;t++)this._events[n][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(n,t,i,r){n=this.x+n;t=this.y+t;i=i||0;this.scrollTo(n,t,i,r)},scrollTo:function(n,t,i,u){u=u||r.ease.circular;this.isInTransition=this.options.useTransition&&i>0;!i||this.options.useTransition&&u.style?(this._transitionTimingFunction(u.style),this._transitionTime(i),this._translate(n,t)):this._animate(n,t,i,u.fn)},scrollToElement:function(n,t,u,f,e){if(n=n.nodeType?n:this.scroller.querySelector(n),n){var o=r.offset(n);o.left-=this.wrapperOffset.left;o.top-=this.wrapperOffset.top;u===!0&&(u=i.round(n.offsetWidth/2-this.wrapper.offsetWidth/2));f===!0&&(f=i.round(n.offsetHeight/2-this.wrapper.offsetHeight/2));o.left-=u||0;o.top-=f||0;o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left;o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top;t=t===undefined||t===null||t==="auto"?i.max(i.abs(this.x-o.left),i.abs(this.y-o.top)):t;this.scrollTo(o.left,o.top,t,e)}},_transitionTime:function(n){if(n=n||0,this.scrollerStyle[r.style.transitionDuration]=n+"ms",!n&&r.isBadAndroid&&(this.scrollerStyle[r.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(n)},_transitionTimingFunction:function(n){if(this.scrollerStyle[r.style.transitionTimingFunction]=n,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(n)},_translate:function(n,t){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.translateZ:(n=i.round(n),t=i.round(t),this.scrollerStyle.left=n+"px",this.scrollerStyle.top=t+"px"),this.x=n,this.y=t,this.indicators)for(var u=this.indicators.length;u--;)this.indicators[u].updatePosition()},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,u=this.options.bindToWrapper?this.wrapper:n;i(n,"orientationchange",this);i(n,"resize",this);this.options.click&&i(this.wrapper,"click",this,!0);this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(u,"mousemove",this),i(u,"mousecancel",this),i(u,"mouseup",this));r.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,r.prefixPointerEvent("pointerdown"),this),i(u,r.prefixPointerEvent("pointermove"),this),i(u,r.prefixPointerEvent("pointercancel"),this),i(u,r.prefixPointerEvent("pointerup"),this));r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(u,"touchmove",this),i(u,"touchcancel",this),i(u,"touchend",this));i(this.scroller,"transitionend",this);i(this.scroller,"webkitTransitionEnd",this);i(this.scroller,"oTransitionEnd",this);i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=n.getComputedStyle(this.scroller,null),i,u;return this.options.useTransform?(t=t[r.style.transform].split(")")[0].split(", "),i=+(t[12]||t[4]),u=+(t[13]||t[5])):(i=+t.left.replace(/[^-\d.]/g,""),u=+t.top.replace(/[^-\d.]/g,"")),{x:i,y:u}},_initIndicators:function(){function i(n){for(var t=s.indicators.length;t--;)n.call(s.indicators[t])}var r=this.options.interactiveScrollbars,o=typeof this.options.scrollbars!="string",n=[],t,s=this,u;for(this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:f("v",r,this.options.scrollbars),interactive:r,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:f("h",r,this.options.scrollbars),interactive:r,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators)),u=n.length;u--;)this.indicators.push(new e(this,n[u]));if(this.options.fadeScrollbars){this.on("scrollEnd",function(){i(function(){this.fade()})});this.on("scrollCancel",function(){i(function(){this.fade()})});this.on("scrollStart",function(){i(function(){this.fade(1)})});this.on("beforeScrollStart",function(){i(function(){this.fade(1,!0)})})}this.on("refresh",function(){i(function(){this.refresh()})});this.on("destroy",function(){i(function(){this.destroy()});delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this);r.addEvent(this.wrapper,"mousewheel",this);r.addEvent(this.wrapper,"DOMMouseScroll",this);r.addEvent(this.wrapper,"mouseover",this);r.addEvent(this.wrapper,"mouseout",this);r.addEvent(t,"scroll",this);this.on("destroy",function(){r.removeEvent(this.wrapper,"wheel",this);r.removeEvent(this.wrapper,"mousewheel",this);r.removeEvent(this.wrapper,"DOMMouseScroll",this);r.removeEvent(this.wrapper,"mouseover",this);r.removeEvent(this.wrapper,"mouseout",this);r.removeEvent(t,"scroll",this);this.__docWheelCapture=!1})},_docWheelMouseOver:function(){this.__docWheelCapture=!0;var i=t.documentElement;this.__docCaptureWinX=(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0);this.__docCaptureWinY=(n.pageYOffset||i.scrollTop)-(i.clientTop||0)},_docWheelMouseOut:function(){this.__docWheelCapture=!1},_docScroll:function(i){if(this.enabled&&this.__docWheelCapture){i.preventDefault();i.stopPropagation();i.stopImmediatePropagation();var r=t.documentElement,u=(n.pageXOffset||r.scrollLeft)-(r.clientLeft||0),f=(n.pageYOffset||r.scrollTop)-(r.clientTop||0),e=u-this.__docCaptureWinX,o=f-this.__docCaptureWinY;(e!=0||o!=0)&&(this.__docCaptureWinX=u,this.__docCaptureWinY=f,this._wheel({deltaMode:0,deltaX:e,deltaY:o,preventDefault:function(){},stopPropagation:function(){}}))}},_wheel:function(n){if(this.enabled){n.preventDefault();n.stopPropagation();var r,t,u,f,e=this;if(this.wheelTimeout===undefined&&e._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){e._execEvent("scrollEnd");e.wheelTimeout=undefined},400),"deltaX"in n)n.deltaMode===1?(r=(i.abs(n.deltaX)<6?n.deltaX*-2:-n.deltaX)*this.options.mouseWheelSpeed,t=(i.abs(n.deltaY)<6?n.deltaY*-2:-n.deltaY)*this.options.mouseWheelSpeed):(r=-n.deltaX,t=-n.deltaY);else if("wheelDeltaX"in n)r=n.wheelDeltaX/120*this.options.mouseWheelSpeed,t=n.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in n)r=t=n.wheelDelta/120*this.options.mouseWheelSpeed;else if("detail"in n)r=t=-n.detail/3*this.options.mouseWheelSpeed;else return;if(r*=this.options.invertWheelDirection,t*=this.options.invertWheelDirection,this.hasVerticalScroll||(r=t,t=0),this.options.snap){u=this.currentPage.pageX;f=this.currentPage.pageY;r>0?u--:r<0&&u++;t>0?f--:t<0&&f++;this.goToPage(u,f);return}u=this.x+i.round(this.hasHorizontalScroll?r:0);f=this.y+i.round(this.hasVerticalScroll?t:0);u>0?u=0:u<this.maxScrollX&&(u=this.maxScrollX);f>0?f=0:f<this.maxScrollY&&(f=this.maxScrollY);this.scrollTo(u,f,i.abs(t)>40?120:i.abs(t)>20?60:0)}},_initSnap:function(){this.currentPage={};typeof this.options.snap=="string"&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap));this.on("refresh",function(){var n=0,f,e=0,h,o,s,r=0,u,c=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight,t;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(o=i.round(c/2),s=i.round(l/2);r>-this.scrollerWidth;){for(this.pages[n]=[],f=0,u=0;u>-this.scrollerHeight;)this.pages[n][f]={x:i.max(r,this.maxScrollX),y:i.max(u,this.maxScrollY),width:c,height:l,cx:r-o,cy:u-s},u-=l,f++;r-=c;n++}else for(t=this.options.snap,f=t.length,h=-1;n<f;n++)(n===0||t[n].offsetLeft<=t[n-1].offsetLeft)&&(e=0,h++),this.pages[e]||(this.pages[e]=[]),r=i.max(-t[n].offsetLeft,this.maxScrollX),u=i.max(-t[n].offsetTop,this.maxScrollY),o=r-i.round(t[n].offsetWidth/2),s=u-i.round(t[n].offsetHeight/2),this.pages[e][h]={x:r,y:u,width:t[n].offsetWidth,height:t[n].offsetHeight,cx:o,cy:s},r>this.maxScrollX&&e++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}});this.on("flick",function(){var n=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,n)})},_nearestSnap:function(n,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,f=this.pages.length,u=0;if(i.abs(n-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);r<f;r++)if(n>=this.pages[r][0].cx){n=this.pages[r][0].x;break}for(f=this.pages[r].length;u<f;u++)if(t>=this.pages[0][u].cy){t=this.pages[0][u].y;break}return r==this.currentPage.pageX&&(r+=this.directionX,r<0?r=0:r>=this.pages.length&&(r=this.pages.length-1),n=this.pages[r][0].x),u==this.currentPage.pageY&&(u+=this.directionY,u<0?u=0:u>=this.pages[0].length&&(u=this.pages[0].length-1),t=this.pages[0][u].y),{x:n,y:t,pageX:r,pageY:u}},goToPage:function(n,t,r,u){u=u||this.options.bounceEasing;n>=this.pages.length?n=this.pages.length-1:n<0&&(n=0);t>=this.pages[n].length?t=this.pages[n].length-1:t<0&&(t=0);var f=this.pages[n][t].x,e=this.pages[n][t].y;r=r===undefined?this.options.snapSpeed||i.max(i.max(i.min(i.abs(f-this.x),1e3),i.min(i.abs(e-this.y),1e3)),300):r;this.currentPage={x:f,y:e,pageX:n,pageY:t};this.scrollTo(f,e,r,u)},next:function(n,t){var i=this.currentPage.pageX,r=this.currentPage.pageY;i++;i>=this.pages.length&&this.hasVerticalScroll&&(i=0,r++);this.goToPage(i,r,n,t)},prev:function(n,t){var i=this.currentPage.pageX,r=this.currentPage.pageY;i--;i<0&&this.hasVerticalScroll&&(i=0,r--);this.goToPage(i,r,n,t)},_initKeys:function(){var i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},t;if(typeof this.options.keyBindings=="object")for(t in this.options.keyBindings)typeof this.options.keyBindings[t]=="string"&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in i)this.options.keyBindings[t]=this.options.keyBindings[t]||i[t];r.addEvent(n,"keydown",this);this.on("destroy",function(){r.removeEvent(n,"keydown",this)})},_key:function(n){if(this.enabled){var t=this.options.snap,u=t?this.currentPage.pageX:this.x,f=t?this.currentPage.pageY:this.y,o=r.getTime(),s=this.keyTime||0,e;this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1);this.keyAcceleration=o-s<200?i.min(this.keyAcceleration+.25,50):0;switch(n.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?u+=t?1:this.wrapperWidth:f+=t?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?u-=t?1:this.wrapperWidth:f-=t?1:this.wrapperHeight;break;case this.options.keyBindings.end:u=t?this.pages.length-1:this.maxScrollX;f=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:u=0;f=0;break;case this.options.keyBindings.left:u+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:u-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t){this.goToPage(u,f);return}u>0?(u=0,this.keyAcceleration=0):u<this.maxScrollX&&(u=this.maxScrollX,this.keyAcceleration=0);f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0);this.scrollTo(u,f,0);this.keyTime=o}},_animate:function(n,t,i,u){function c(){var a=r.getTime(),y,p,v;if(a>=l){f.isAnimating=!1;f._translate(n,t);f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd");return}a=(a-h)/i;v=u(a);y=(n-e)*v+e;p=(t-s)*v+s;f._translate(y,p);f.isAnimating&&o(c)}var f=this,e=this.x,s=this.y,h=r.getTime(),l=h+i;this.isAnimating=!0;c()},handleEvent:function(n){switch(n.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(n);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(n);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(n);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(n);break;case"scroll":this._docScroll(n);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(n);break;case"keydown":this._key(n);break;case"click":n._constructed||(n.preventDefault(),n.stopPropagation());break;case"mouseover":this._docWheelMouseOver(n);break;case"mouseout":this._docWheelMouseOut(n)}}};e.prototype={handleEvent:function(n){switch(n.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(n);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(n);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(n)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(n,"touchmove",this),r.removeEvent(n,r.prefixPointerEvent("pointermove"),this),r.removeEvent(n,"mousemove",this),r.removeEvent(n,"touchend",this),r.removeEvent(n,r.prefixPointerEvent("pointerup"),this),r.removeEvent(n,"mouseup",this));this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault();t.stopPropagation();this.transitionTime();this.initiated=!0;this.moved=!1;this.lastPointX=i.pageX;this.lastPointY=i.pageY;this.startTime=r.getTime();this.options.disableTouch||r.addEvent(n,"touchmove",this);this.options.disablePointer||r.addEvent(n,r.prefixPointerEvent("pointermove"),this);this.options.disableMouse||r.addEvent(n,"mousemove",this);this.scroller._execEvent("beforeScrollStart")},_move:function(n){var t=n.touches?n.touches[0]:n,i,u,f,e,o=r.getTime();this.moved||this.scroller._execEvent("scrollStart");this.moved=!0;i=t.pageX-this.lastPointX;this.lastPointX=t.pageX;u=t.pageY-this.lastPointY;this.lastPointY=t.pageY;f=this.x+i;e=this.y+u;this._pos(f,e);n.preventDefault();n.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(n,"touchmove",this),r.removeEvent(n,r.prefixPointerEvent("pointermove"),this),r.removeEvent(n,"mousemove",this),this.scroller.options.snap){var u=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),f=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-u.x),1e3),i.min(i.abs(this.scroller.y-u.y),1e3)),300);(this.scroller.x!=u.x||this.scroller.y!=u.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=u,this.scroller.scrollTo(u.x,u.y,f,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(n){n=n||0;this.indicatorStyle[r.style.transitionDuration]=n+"ms";!n&&r.isBadAndroid&&(this.indicatorStyle[r.style.transitionDuration]="0.001s")},transitionTimingFunction:function(n){this.indicatorStyle[r.style.transitionTimingFunction]=n},refresh:function(){this.transitionTime();this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none";this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));var n=this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.options.shrink=="clip"?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX);this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.options.shrink=="clip"?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY);this.updatePosition()},updatePosition:function(){var n=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(n<this.minBoundaryX?(this.options.shrink=="scale"&&(this.width=i.max(this.indicatorWidth+n,8),this.indicatorStyle.width=this.width+"px"),n=this.minBoundaryX):n>this.maxBoundaryX?this.options.shrink=="scale"?(this.width=i.max(this.indicatorWidth-(n-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",n=this.maxPosX+this.indicatorWidth-this.width):n=this.maxBoundaryX:this.options.shrink=="scale"&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?(this.options.shrink=="scale"&&(this.height=i.max(this.indicatorHeight+t*3,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?this.options.shrink=="scale"?(this.height=i.max(this.indicatorHeight-(t-this.maxPosY)*3,8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:this.options.shrink=="scale"&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px"));this.x=n;this.y=t;this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=n+"px",this.indicatorStyle.top=t+"px")},_pos:function(n,t){n<0?n=0:n>this.maxPosX&&(n=this.maxPosX);t<0?t=0:t>this.maxPosY&&(t=this.maxPosY);n=this.options.listenX?i.round(n/this.sizeRatioX):this.scroller.x;t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(n,t)},fade:function(n,t){if(!t||this.visible){clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var i=n?250:500,u=n?0:300;n=n?"1":"0";this.wrapperStyle[r.style.transitionDuration]=i+"ms";this.fadeTimeout=setTimeout(function(n){this.wrapperStyle.opacity=n;this.visible=+n}.bind(this,n),u)}}};u.utils=r;typeof module!="undefined"&&module.exports?module.exports=u:n.IScroll=u})(window,document,Math);
/*!
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(n){function i(n,t){for(var i=window,r=(n||"").split(".");i&&r.length;)i=i[r.shift()];return typeof i=="function"?i:(t.push(n),Function.constructor.apply(null,t))}function r(n){return n==="GET"||n==="POST"}function e(n,t){r(t)||n.setRequestHeader("X-HTTP-Method-Override",t)}function o(t,i,r){var u;r.indexOf("application/x-javascript")===-1&&(u=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),n(t.getAttribute("data-ajax-update")).each(function(t,r){var f;switch(u){case"BEFORE":f=r.firstChild;n("<div />").html(i).contents().each(function(){r.insertBefore(this,f)});break;case"AFTER":n("<div />").html(i).contents().each(function(){r.appendChild(this)});break;default:n(r).html(i)}}))}function u(t,u){var s,h,f,c;(s=t.getAttribute("data-ajax-confirm"),!s||window.confirm(s))&&(h=n(t.getAttribute("data-ajax-loading")),c=t.getAttribute("data-ajax-loading-duration")||0,n.extend(u,{type:t.getAttribute("data-ajax-method")||undefined,url:t.getAttribute("data-ajax-url")||undefined,beforeSend:function(n){var r;return e(n,f),r=i(t.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),r!==!1&&h.show(c),r},complete:function(){h.hide(c);i(t.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(n,r,u){o(t,n,u.getResponseHeader("Content-Type")||"text/html");i(t.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:i(t.getAttribute("data-ajax-failure"),["xhr","status","error"])}),u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),f=u.type.toUpperCase(),r(f)||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:f})),n.ajax(u))}function s(t){var i=n(t).data(f);return!i||!i.validate||i.validate()}var t="unobtrusiveAjaxClick",f="unobtrusiveValidation";n("a[data-ajax=true]").live("click",function(n){n.preventDefault();u(this,{url:this.href,type:"GET",data:[]})});n("form[data-ajax=true] input[type=image]").live("click",function(i){var r=i.target.name,u=n(i.target),f=u.parents("form")[0],e=u.offset();n(f).data(t,[{name:r+".x",value:Math.round(i.pageX-e.left)},{name:r+".y",value:Math.round(i.pageY-e.top)}]);setTimeout(function(){n(f).removeData(t)},0)});n("form[data-ajax=true] :submit").live("click",function(i){var r=i.target.name,u=n(i.target).parents("form")[0];n(u).data(t,r?[{name:r,value:i.target.value}]:[]);setTimeout(function(){n(u).removeData(t)},0)});n("form[data-ajax=true]").live("submit",function(i){var r=n(this).data(t)||[];(i.preventDefault(),s(this))&&u(this,{url:this.action,type:this.method||"GET",data:r.concat(n(this).serializeArray())})})})(jQuery),function(n){n.extend(n.fn,{validate:function(t){var i,r;if(!this.length){t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}return(i=n.data(this[0],"validator"),i)?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(r=this.find("input, button"),r.filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&r.filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function r(){if(i.settings.submitHandler){if(i.submitButton)var t=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return(i.settings.debug&&t.preventDefault(),i.cancelSubmit)?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.metadataRules(r),n.validator.classRules(r),n.validator.attributeRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+t.value)},filled:function(t){return!!n.trim(""+t.value)},unchecked:function(n){return!n.checked}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return arguments.length==1?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),i)}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n){(n.name in this.submitted||n==this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}var i,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();i=this.groups={};n.each(this.settings.groups,function(t,r){n.each(r.split(/\s/),function(n,r){i[r]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",r).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",r);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t));this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0;for(var i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&n.grep(this.errorList,function(n){return n.element.name==t.name}).length==1&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return(!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules()))?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){return n(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},check:function(t){var i,r,u,f,e;t=this.validationTargetFor(this.clean(t));i=n(t).rules();r=!1;for(u in i){f={method:u,parameters:i[u]};try{if(e=n.validator.methods[u].call(this,t.value.replace(/\r/g,""),t,f.parameters),e=="dependency-mismatch"){r=!0;continue}if(r=!1,e=="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!e)return this.formatAndAdd(t,f),!1}catch(o){this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+f.method+"' method",o);throw o;}}if(!r)return this.objectLength(i)&&this.successList.push(t),!0},customMetaMessage:function(t,i){if(n.metadata){var r=this.settings.meta?n(t).metadata()[this.settings.meta]:n(t).metadata();return r&&r.messages&&r.messages[i]}},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n];return undefined},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||undefined,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t.method),r=/\$?\{(\d+)\}/g;typeof i=="function"?i=i.call(this,t.parameters,n):r.test(i)&&(i=jQuery.format(i.replace(r,"{$1}"),t.parameters));this.errorList.push({message:i,element:n});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var t,i,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.attr("generated")&&r.html(i)):(r=n("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")==i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name).not(this.settings.ignore)[0]),n},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){var i=this.currentForm;return n(document.getElementsByName(t)).map(function(n,r){return r.form==i&&r.name==t&&r||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){return!n.validator.methods.required.call(this,n.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];i&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&this.pendingRequest==0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var r={},u=n(t),i,f;for(i in n.validator.methods)f=i==="required"&&typeof n.fn.prop=="function"?u.prop(i):u.attr(i),f?r[i]=f:u[0].getAttribute("type")===i&&(r[i]=!0);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},metadataRules:function(t){if(!n.metadata)return{};var i=n.data(t.form,"validator").settings.meta;return i?n(t).metadata()[i]:n(t).metadata()},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1){delete t[r];return}if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=u.param!==undefined?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=r!=undefined?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var u=n(i).val();return u&&u.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return n.trim(t).length>0}},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r=typeof r=="string"&&{url:r}||r,this.pending[i.name])?"pending":f.old===t?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,type:"POST",success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;r=n.extend({Response:{Value:{Success:!1}}},r);r=r.Response.Value;i&&i.length>0&&n(i).removeData("valmsg-success");e=r.Success===!0;e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),r.Message&&n(i).data("valmsg-success",r.Message),u.showErrors()):(s={},o=r.Message||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")},minlength:function(t,i,r){return this.optional(i)||this.getLength(n.trim(t),i)>=r},maxlength:function(t,i,r){return this.optional(i)||this.getLength(n.trim(t),i)<=r},rangelength:function(t,i,r){var u=this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n))},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r,e,i;if(this.optional(t))return"dependency-mismatch";if(/[^0-9 -]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)e=n.charAt(r),i=parseInt(e,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return f%10==0},accept:function(n,t,i){return i=typeof i=="string"?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||n.match(new RegExp(".("+i+")$","i"))},equalTo:function(t,i,r){var u=n(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()});return t==u.val()}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;n.mode=="abort"&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return f=="abort"?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments)):i.apply(this,arguments)})}(jQuery),function(n){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||n.each({focus:"focusin",blur:"focusout"},function(t,i){function r(t){return t=n.event.fix(t),t.type=i,n.event.handle.call(this,t)}n.event.special[i]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=n.event.fix(t),arguments[0].type=i,n.event.handle.apply(this,arguments)}}});n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery);
/*!
 ** Unobtrusive validation support library for jQuery and jQuery Validate
 ** Copyright (C) Microsoft Corporation. All rights reserved.
 */
(function(n){function i(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)}function s(n){return n.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(n){return n.substr(0,n.lastIndexOf(".")+1)}function e(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function h(t,i){var r=n(this).find("[data-valmsg-for='"+i[0].name+"']"),u=n.parseJSON(r.attr("data-valmsg-replace"))!==!1;r.removeClass("field-validation-valid field-validation-success").addClass("field-validation-error");t.data("unobtrusiveContainer",r);u?(r.empty(),t.removeClass("input-validation-error").appendTo(r)):t.hide()}function c(t,i){var u=n(this).find("[data-valmsg-summary=true]"),r=u.find("ul");r&&r.length&&i.errorList.length&&(r.empty(),u.addClass("validation-summary-errors").removeClass("validation-summary-valid"),n.each(i.errorList,function(){n("<li />").html(this.message).appendTo(r)}))}function l(t){var i=t.data("unobtrusiveContainer"),u=n.parseJSON(i.attr("data-valmsg-replace")),r=n(this).find("[name='"+i.data("valmsg-for")+"']");i&&(i.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),u&&i.empty(),r&&r.data("valmsg-success")&&i.addClass("field-validation-success").text(r.data("valmsg-success")))}function o(t){var i=n(t),r=i.data(u);return r||(r={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:n.proxy(h,t),invalidHandler:n.proxy(c,t),messages:{},rules:{},success:n.proxy(l,t)},attachValidation:function(){i.validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(u,r)),r}var r=n.validator,t,u="unobtrusiveValidation";r.unobtrusive={adapters:[],parseElement:function(t,i){var u=n(t),f=u.parents("form")[0],r,e,s;f&&(r=o(f),r.options.rules[t.name]=e={},r.options.messages[t.name]=s={},n.each(this.adapters,function(){var i="data-val-"+this.name,r=u.attr(i),o={};r!==undefined&&(i+="-",n.each(this.params,function(){o[this]=u.attr(i+this)}),this.adapt({element:t,form:f,message:r,params:o,rules:e,messages:s}))}),jQuery.extend(e,{__dummy__:!0}),i||r.attachValidation())},parse:function(t){n(t).find(":input[data-val=true]").each(function(){r.unobtrusive.parseElement(this,!0)});n("form").each(function(){var n=o(this);n&&n.attachValidation()})}};t=r.unobtrusive.adapters;t.add=function(n,t,i){return i||(i=t,t=[]),this.push({name:n,params:t,adapt:i}),this};t.addBool=function(n,t){return this.add(n,function(r){i(r,t||n,!0)})};t.addMinMax=function(n,t,r,u,f,e){return this.add(n,[f||"min",e||"max"],function(n){var f=n.params.min,e=n.params.max;f&&e?i(n,u,[f,e]):f?i(n,t,f):e&&i(n,r,e)})};t.addSingleVal=function(n,t,r){return this.add(n,[t||"val"],function(u){i(u,r||n,u.params[t])})};r.addMethod("__dummy__",function(){return!0});r.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)});t.addSingleVal("accept","exts").addSingleVal("regex","pattern");t.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");t.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");t.add("equalto",["other"],function(t){var r=f(t.element.name),u=t.params.other,o=e(u,r),s=n(t.form).find(":input[name="+o+"]")[0];i(t,"equalTo",s)});t.add("required",function(n){(n.element.tagName.toUpperCase()!=="INPUT"||n.element.type.toUpperCase()!=="CHECKBOX")&&i(n,"required",!0)});t.add("remote",["url","type","additionalfields"],function(t){var r={url:t.params.url,type:t.params.type||"POST",data:{}},u=f(t.element.name);n.each(s(t.params.additionalfields||t.element.name),function(i,f){var o=e(f,u);r.data[o]=function(){return n(t.form).find(":input[name='"+o+"']").val()}});i(t,"remote",r)});n(function(){r.unobtrusive.parse(document)})})(jQuery);
/**
 * @license
 * jQuery Tools 1.2.3 Scrollable - New wave UI design
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * Modified by PawPrint.net to add itemCount, fix circular scrolling, and repair initialIndex in scroller
 *
 * http://flowplayer.org/tools/scrollable.html
 *
 * Since: March 2008
 * Date:    Aug 1 2010
 */
(function(n){function i(t,i){var r=n(i);return r.length<2?r:t.parent().find(i)}function r(r,u){var f=this,c=r.add(f),e=r.children(),o=0,l=u.vertical,a,v,s,h;if(t||(t=f),e.length>1&&(e=n(u.items,r)),n.extend(f,{getConf:function(){return u},getIndex:function(){return o},getSize:function(){return f.getItems().size()},getNaviButtons:function(){return s.add(h)},getRoot:function(){return r},getItemWrap:function(){return e},getItems:function(){return e.children(u.item).not("."+u.clonedClass)},move:function(n,t){return u.circular||o+n>=0&&o+n<=f.getSize()-u.itemCount?f.seekTo(o+n,t):f},next:function(n){return f.move(1,n)},prev:function(n){return f.move(-1,n)},begin:function(n){return f.seekTo(0,n)},end:function(n){return f.seekTo(f.getSize()-u.itemCount+1,n)},focus:function(){return t=f,f},addItem:function(t){return t=n(t),u.circular?(n(".cloned:last").before(t),n(".cloned:first").replaceWith(t.clone().addClass(u.clonedClass))):e.append(t),c.trigger("onAddItem",[t]),f},removeItem:function(n){return f.getItems().eq(n).remove(),f},replaceItems:function(n,t){return f.getItems().remove(),e.html(n),(typeof t=="undefined"||t)&&f.begin(u.speed),f},seekTo:function(i,r,s){var h,a,v;return u.circular&&i===0&&o==-1&&r!==0?f:!u.circular&&i<0||!u.circular&&i>=f.getSize()||i<-1?f:(h=i,i.jquery?i=f.getItems().index(i):h=f.getItems().eq(i),a=n.Event("onBeforeSeek"),!s&&(c.trigger(a,[i,r]),a.isDefaultPrevented()||!h.length))?f:(v=l?{top:-h.position().top}:{left:-h.position().left},o=i,t=f,r===undefined&&(r=u.speed),e.animate(v,r,u.easing,s||function(){c.trigger("onSeek",[i])}),f)}}),n.each(["onBeforeSeek","onSeek","onAddItem"],function(t,i){n.isFunction(u[i])&&n(f).bind(i,u[i]);f[i]=function(t){return n(f).bind(i,t),f}}),u.circular){a=null;v=null;v=f.getItems().slice(0,u.itemCount).clone().addClass(u.clonedClass).appendTo(e);a=f.getItems().slice(-1).clone().addClass(u.clonedClass).prependTo(e);f.onBeforeSeek(function(n,t,i){if(!n.isDefaultPrevented()){if(t==-1)return f.seekTo(a.eq(-1),i,function(){f.seekTo(f.getSize()-1,0,function(){})}),n.preventDefault();t==f.getSize()&&f.seekTo(v.eq(0),i,function(){f.begin(0)})}});f.seekTo(0,0)}if(s=i(r,u.prev).click(function(){if(!f.stopped)if(f.navigator){var n=f.navigator;f.move(-1*n.conf.pageSize,u.clickSpeed)}else f.prev(u.clickSpeed)}),h=i(r,u.next).click(function(){if(!f.stopped)if(f.navigator){var n=f.navigator;f.getIndex()+n.conf.pageSize>=f.getSize()?f.move(f.getSize()-n.conf.pageSize-1,u.clickSpeed):f.move(n.conf.pageSize,u.clickSpeed)}else f.next(u.clickSpeed)}),!u.circular)f.onBeforeSeek(function(n,t){window.setTimeout(function(){if(!n.isDefaultPrevented())if(f.getSize()<=u.itemCount)s.addClass(u.disabledClass),h.addClass(u.disabledClass);else if(u.circular||f.navigator){if(f.navigator){var i=f.navigator;s.toggleClass(u.disabledClass,t<i.conf.pageSize);h.toggleClass(u.disabledClass,t+i.conf.pageSize>f.getSize()-i.conf.pageSize)}}else s.toggleClass(u.disabledClass,t<=0),h.toggleClass(u.disabledClass,t>=f.getSize()-u.itemCount)},1)});u.mousewheel&&n.fn.mousewheel&&r.mousewheel(function(n,t){if(u.mousewheel)return f.move(t<0?1:-1,u.wheelSpeed||50),!1});u.keyboard&&n(document).bind("keydown.scrollable",function(i){if(u.keyboard&&!i.altKey&&!i.ctrlKey&&!n(i.target).is(":input")&&!f.stopped&&(u.keyboard=="static"||t==f)){var r=i.keyCode;return l&&(r==38||r==40)?(f.move(r==38?-1:1,u.clickSpeed),i.preventDefault()):!l&&(r==37||r==39)?(f.move(r==37?-1:1,u.clickSpeed),i.preventDefault()):void 0}});u.initialIndex>0?f.seekTo(u.initialIndex):setTimeout(function(){var n=Math.min(u.initialIndex,Math.max(0,f.getSize()-u.itemCount));f.seekTo(n)},u.speed)}n.tools=n.tools||{version:"1.2.3a"};n.tools.scrollable={conf:{circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,clickSpeed:150,vertical:!1,wheelSpeed:0,itemCount:4,pageSize:1}};var t;n.fn.scrollable=function(t){var i=this.data("scrollable");return i?i:(t=n.extend({},n.tools.scrollable.conf,t),this.each(function(){i=new r(n(this),t);n(this).data("scrollable",i)}),t.api?i:this)}})(jQuery);
/**
 * @license
 * jQuery Tools @VERSION / Scrollable Autoscroll
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/scrollable/autoscroll.html
 *
 * Since: September 2009
 * Date: @DATE
 */
(function(n){var t=n.tools.scrollable;t.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}};n.fn.autoscroll=function(i){typeof i=="number"&&(i={interval:i});var r=n.extend({},t.autoscroll.conf,i),u;return this.each(function(){var t=n(this).data("scrollable"),i,f;t&&(u=t);f=!1;t.stopped=!1;t.play=function(){i||t.stopped||(i=setInterval(function(){var i=t.getIndex(),r=t.getSize(),n=1;n=t.navigator?t.navigator.conf.pageSize:t.getConf().pageSize;i>=r-n?t.seekTo(0):t.seekTo(i+n)},r.interval))};t.pause=function(){i=clearInterval(i)};t.stop=function(){t.pause();t.stopped=!0};t.restart=function(){t.stopped=!1;t.play()};r.autopause&&t.getRoot().add(t.getNaviButtons()).hover(t.pause,t.play);r.autoplay&&t.play()}),r.api?u:this}})(jQuery);
/**
 * @license
 * jQuery Tools @VERSION / Scrollable Navigator
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/scrollable/navigator.html
 *
 * Since: September 2009
 * Date: @DATE
 */
(function(n){function i(t,i){var r=n(i);return r.length<2?r:t.parent().find(i)}var t=n.tools.scrollable;t.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,pageSize:0,history:!1}};n.fn.navigator=function(r){typeof r=="string"&&(r={navi:r});r=n.extend({},t.navigator.conf,r);var u;return this.each(function(){function h(n,i,r){if(t.seekTo(i),s)location.hash&&(location.hash=n.attr("href").replace("#",""));else return r.preventDefault()}function f(){return e.find(r.naviItem||"> *")}function c(t){var i=n("<"+(r.naviItem||"a")+"/>").click(function(i){h(n(this),t,i)}).attr("href","#"+t);return t===0&&i.addClass(o),r.indexed&&i.text(t+1),r.idPrefix&&i.attr("id",r.idPrefix+t),r.pageSize>0&&t%r.pageSize!=0&&i.hide(),i.appendTo(e)}function l(n,t){var i=f().eq(t.replace("#",""));i.length||(i=f().filter("[href="+t+"]"));i.click()}var t=n(this).data("scrollable"),e=r.navi.jquery?r.navi:i(t.getRoot(),r.navi),a=t.getNaviButtons(),o=r.activeClass,s=r.history&&n.fn.history;t.navigator={conf:r};t&&(u=t);t.getNaviButtons=function(){return a.add(e)};f().length?f().each(function(t){n(this).click(function(i){h(n(this),t,i)})}):n.each(t.getItems(),function(n){c(n)});t.onBeforeSeek(function(n,t){setTimeout(function(){if(!n.isDefaultPrevented()){var i=f().eq(t);!n.isDefaultPrevented()&&i.length&&f().removeClass(o).eq(t).addClass(o)}},1)});t.onAddItem(function(n,i){i=c(t.getItems().index(i));s&&i.history(l)});s&&f().history(l)}),r.api?u:this}})(jQuery);
/*!
 * jQuery UI 1.8.14
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(n,t){function i(t,i){var u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,u=i.name,!t.href||!u||i.nodeName.toLowerCase()!=="map")?!1:(t=n("img[usemap=#"+u+"]")[0],!!t&&r(t)):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"==u?t.href||i:i)&&r(t)}function r(t){return!n(t).parents().andSelf().filter(function(){return n.curCSS(this,"visibility")==="hidden"||n.expr.filters.hidden(this)}).length}n.ui=n.ui||{};n.ui.version||(n.extend(n.ui,{version:"1.8.14",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),n.fn.extend({_focus:n.fn.focus,focus:function(t,i){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){n(r).focus();i&&i.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=n.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.curCSS(this,"position",1))&&/(auto|scroll)/.test(n.curCSS(this,"overflow",1)+n.curCSS(this,"overflow-y",1)+n.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.curCSS(this,"overflow",1)+n.curCSS(this,"overflow-y",1)+n.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length){i=n(this[0]);for(var r;i.length&&i[0]!==document;){if(r=i.css("position"),(r==="absolute"||r==="relative"||r==="fixed")&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&r!==0))return r;i=i.parent()}}return 0},disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),n.each(["Width","Height"],function(i,r){function u(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.curCSS(t,"padding"+this,!0))||0;r&&(i-=parseFloat(n.curCSS(t,"border"+this+"Width",!0))||0);u&&(i-=parseFloat(n.curCSS(t,"margin"+this,!0))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],f=r.toLowerCase(),e={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?e["inner"+r].call(this):this.each(function(){n(this).css(f,u(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return typeof t!="number"?e["outer"+r].call(this,t):this.each(function(){n(this).css(f,u(this,t,!0,i)+"px")})}}),n.extend(n.expr[":"],{data:function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}}),n(function(){var i=document.body,t=i.appendChild(t=document.createElement("div"));n.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});n.support.minHeight=t.offsetHeight===100;n.support.selectstart="onselectstart"in t;i.removeChild(t).style.display="none"}),n.extend(n.ui,{plugin:{add:function(t,i,r){t=n.ui[t].prototype;for(var u in r)t.plugins[u]=t.plugins[u]||[],t.plugins[u].push([i,r[u]])},call:function(n,t,i){if((t=n.plugins[t])&&n.element[0].parentNode)for(var r=0;r<t.length;r++)n.options[t[r][0]]&&t[r][1].apply(n.element,i)}},contains:function(n,t){return document.compareDocumentPosition?n.compareDocumentPosition(t)&16:n!==t&&n.contains(t)},hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;i=i&&i==="left"?"scrollLeft":"scrollTop";var r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(n,t,i){return n>t&&n<t+i},isOver:function(t,i,r,u,f,e){return n.ui.isOverAxis(t,r,f)&&n.ui.isOverAxis(i,u,e)}}))})(jQuery);
/*!
 * jQuery UI Widget 1.8.14
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(n,t){var i,r;n.cleanData?(i=n.cleanData,n.cleanData=function(t){for(var r=0,u;(u=t[r])!=null;r++)n(u).triggerHandler("remove");i(t)}):(r=n.fn.remove,n.fn.remove=function(t,i){return this.each(function(){return i||(!t||n.filter(t,[this]).length)&&n("*",this).add([this]).each(function(){n(this).triggerHandler("remove")}),r.call(n(this),t,i)})});n.widget=function(t,i,r){var u=t.split(".")[0],f;t=t.split(".")[1];f=u+"-"+t;r||(r=i,i=n.Widget);n.expr[":"][f]=function(i){return!!n.data(i,t)};n[u]=n[u]||{};n[u][t]=function(n,t){arguments.length&&this._createWidget(n,t)};i=new i;i.options=n.extend(!0,{},i.options);n[u][t].prototype=n.extend(!0,i,{namespace:u,widgetName:t,widgetEventPrefix:n[u][t].prototype.widgetEventPrefix||t,widgetBaseClass:f},r);n.widget.bridge(t,n[u][t])};n.widget.bridge=function(i,r){n.fn[i]=function(u){var f=typeof u=="string",e=Array.prototype.slice.call(arguments,1),o=this;return(u=!f&&e.length?n.extend.apply(null,[!0,u].concat(e)):u,f&&u.charAt(0)==="_")?o:(f?this.each(function(){var r=n.data(this,i),f=r&&n.isFunction(r[u])?r[u].apply(r,e):r;if(f!==r&&f!==t)return o=f,!1}):this.each(function(){var t=n.data(this,i);t?t.option(u||{})._init():n.data(this,i,new r(u,this))}),o)}};n.Widget=function(n,t){arguments.length&&this._createWidget(n,t)};n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){n.data(i,this.widgetName,this);this.element=n(i);this.options=n.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return n.metadata&&n.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,r){var u=i;if(arguments.length===0)return n.extend({},this.options);if(typeof i=="string"){if(r===t)return this.options[i];u={};u[i]=r}return this._setOptions(u),this},_setOptions:function(t){var i=this;return n.each(t,function(n,t){i._setOption(n,t)}),this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,r){var f=this.options[t],u;if(i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r=r||{},i.originalEvent)for(t=n.event.props.length;t;)u=n.event.props[--t],i[u]=i.originalEvent[u];return this.element.trigger(i,r),!(n.isFunction(f)&&f.call(this.element[0],i,r)===!1||i.isDefaultPrevented())}}})(jQuery);
/*!
 * jQuery UI Mouse 1.8.14
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(n){var t=!1;n(document).mousedown(function(){t=!1});n.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=i.which==1,f=typeof this.options.cancel=="string"?n(i.target).closest(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(i)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted))?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0)}},_mouseMove:function(t){return n.browser.msie&&!(document.documentMode>=9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1)?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery),function(n){n.ui=n.ui||{};var t=/left|center|right/,i=/top|center|bottom/,r=n.fn.position,u=n.fn.offset;n.fn.position=function(u){if(!u||!u.of)return r.apply(this,arguments);u=n.extend({},u);var e=n(u.of),l=e[0],c=(u.collision||"flip").split(" "),o=u.offset?u.offset.split(" "):[0,0],s,h,f;return l.nodeType===9?(s=e.width(),h=e.height(),f={top:0,left:0}):l.setTimeout?(s=e.width(),h=e.height(),f={top:e.scrollTop(),left:e.scrollLeft()}):l.preventDefault?(u.at="left top",s=h=0,f={top:u.of.pageY,left:u.of.pageX}):(s=e.outerWidth(),h=e.outerHeight(),f=e.offset()),n.each(["my","at"],function(){var n=(u[this]||"").split(" ");n.length===1&&(n=t.test(n[0])?n.concat(["center"]):i.test(n[0])?["center"].concat(n):["center","center"]);n[0]=t.test(n[0])?n[0]:"center";n[1]=i.test(n[1])?n[1]:"center";u[this]=n}),c.length===1&&(c[1]=c[0]),o[0]=parseInt(o[0],10)||0,o.length===1&&(o[1]=o[0]),o[1]=parseInt(o[1],10)||0,u.at[0]==="right"?f.left+=s:u.at[0]==="center"&&(f.left+=s/2),u.at[1]==="bottom"?f.top+=h:u.at[1]==="center"&&(f.top+=h/2),f.left+=o[0],f.top+=o[1],this.each(function(){var i=n(this),r=i.outerWidth(),e=i.outerHeight(),l=parseInt(n.curCSS(this,"marginLeft",!0))||0,a=parseInt(n.curCSS(this,"marginTop",!0))||0,y=r+l+(parseInt(n.curCSS(this,"marginRight",!0))||0),p=e+a+(parseInt(n.curCSS(this,"marginBottom",!0))||0),t=n.extend({},f),v;u.my[0]==="right"?t.left-=r:u.my[0]==="center"&&(t.left-=r/2);u.my[1]==="bottom"?t.top-=e:u.my[1]==="center"&&(t.top-=e/2);t.left=Math.round(t.left);t.top=Math.round(t.top);v={left:t.left-l,top:t.top-a};n.each(["left","top"],function(i,f){n.ui.position[c[i]]&&n.ui.position[c[i]][f](t,{targetWidth:s,targetHeight:h,elemWidth:r,elemHeight:e,collisionPosition:v,collisionWidth:y,collisionHeight:p,offset:o,my:u.my,at:u.at})});n.fn.bgiframe&&i.bgiframe();i.offset(n.extend(t,{using:u.using}))})};n.ui.position={fit:{left:function(t,i){var r=n(window);r=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft();t.left=r>0?t.left-r:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var r=n(window);r=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop();t.top=r>0?t.top-r:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){var r;if(i.at[0]!=="center"){r=n(window);r=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft();var u=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,f=i.at[0]==="left"?i.targetWidth:-i.targetWidth,e=-2*i.offset[0];t.left+=i.collisionPosition.left<0?u+f+e:r>0?u+f+e:0}},top:function(t,i){var r;if(i.at[1]!=="center"){r=n(window);r=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop();var u=i.my[1]==="top"?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,f=i.at[1]==="top"?i.targetHeight:-i.targetHeight,e=-2*i.offset[1];t.top+=i.collisionPosition.top<0?u+f+e:r>0?u+f+e:0}}}};n.offset.setOffset||(n.offset.setOffset=function(t,i){/static/.test(n.curCSS(t,"position"))&&(t.style.position="relative");var u=n(t),r=u.offset(),f=parseInt(n.curCSS(t,"top",!0),10)||0,e=parseInt(n.curCSS(t,"left",!0),10)||0;r={top:i.top-r.top+f,left:i.left-r.left+e};"using"in i?i.using.call(t,r):u.css(r)},n.fn.offset=function(t){var i=this[0];return!i||!i.ownerDocument?null:t?this.each(function(){n.offset.setOffset(this,t)}):u.call(this)})}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper!="original"||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),!this.handle)?!1:(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n('<div class="ui-draggable-iframeFix" style="background: #fff;"><\/div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0)},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){if(i=this._uiHash(),this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1,r;return(n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),(!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")?!1:(this.options.revert=="invalid"&&!i||this.options.revert=="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?(r=this,n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return this.options.iframeFix===!0&&n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!n(this.options.handle,this.element).length?!0:!1;return n(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options;return t=n.isFunction(i.helper)?n(i.helper.apply(this.element[0],[t])):i.helper=="clone"?this.element.clone().removeAttr("id"):this.element,t.parents("body").length||t.appendTo(i.appendTo=="parent"?this.element[0].parentNode:i.appendTo),t[0]==this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options,i,r;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);(t.containment=="document"||t.containment=="window")&&(this.containment=[t.containment=="document"?0:n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:n(window).scrollLeft())+n(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:n(window).scrollTop())+(n(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array?t.containment.constructor==Array&&(this.containment=t.containment):(t=n(t.containment),i=t[0],i&&(t.offset(),r=n(i).css("overflow")!="hidden",this.containment=[(parseInt(n(i).css("borderLeftWidth"),10)||0)+(parseInt(n(i).css("paddingLeft"),10)||0),(parseInt(n(i).css("borderTopWidth"),10)||0)+(parseInt(n(i).css("paddingTop"),10)||0),(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n(i).css("borderLeftWidth"),10)||0)-(parseInt(n(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n(i).css("borderTopWidth"),10)||0)-(parseInt(n(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=t))},_convertPositionTo:function(t,i){i||(i=this.position);t=t=="absolute"?1:-1;var r=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,u=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*t+this.offset.parent.top*t-(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():u?0:r.scrollTop())*t),left:i.left+this.offset.relative.left*t+this.offset.parent.left*t-(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():u?0:r.scrollLeft())*t)}},_generatePosition:function(t){var f=this.options,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(e[0].tagName),r=t.pageX,u=t.pageY,i;return this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),i=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),f.grid&&(u=f.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,u=i?(u-this.offset.click.top<i[1]||u-this.offset.click.top>i[3])?(u-this.offset.click.top<i[1])?u+f.grid[1]:u-f.grid[1]:u:u,r=f.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,r=i?(r-this.offset.click.left<i[0]||r-this.offset.click.left>i[2])?(r-this.offset.click.left<i[0])?r+f.grid[0]:r-f.grid[0]:r:r)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:e.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.extend(n.ui.draggable,{version:"1.8.14"});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[];n(u.connectToSortable).each(function(){var i=n.data(this,"sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("draggable"),u=this;n.each(r.sortables,function(){this.instance.positionAbs=r.positionAbs;this.instance.helperProportions=r.helperProportions;this.instance.offset.click=r.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}});n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor"));t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i){t=n(i.helper);i=n(this).data("draggable").options;t.css("opacity")&&(i._opacity=t.css("opacity"));t.css("opacity",i.opacity)},stop:function(t,i){t=n(this).data("draggable").options;t._opacity&&n(i.helper).css("opacity",t._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("draggable");t.scrollParent[0]!=document&&t.scrollParent[0].tagName!="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("draggable"),i=r.options,u=!1;r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"?(i.axis&&i.axis=="x"||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&i.axis=="y"||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&i.axis=="x"||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&i.axis=="y"||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))));u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("draggable"),i=t.options;t.snapElements=[];n(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var d,r=n(this).data("draggable"),k=r.options,u=k.snapTolerance,c=i.offset.left,a=c+r.helperProportions.width,l=i.offset.top,v=l+r.helperProportions.height,f=r.snapElements.length-1;f>=0;f--){var e=r.snapElements[f].left,s=e+r.snapElements[f].width,o=r.snapElements[f].top,h=o+r.snapElements[f].height;if(e-u<c&&c<s+u&&o-u<l&&l<h+u||e-u<c&&c<s+u&&o-u<v&&v<h+u||e-u<a&&a<s+u&&o-u<l&&l<h+u||e-u<a&&a<s+u&&o-u<v&&v<h+u){if(k.snapMode!="inner"){var y=Math.abs(o-v)<=u,p=Math.abs(h-l)<=u,w=Math.abs(e-a)<=u,b=Math.abs(s-c)<=u;y&&(i.position.top=r._convertPositionTo("relative",{top:o-r.helperProportions.height,left:0}).top-r.margins.top);p&&(i.position.top=r._convertPositionTo("relative",{top:h,left:0}).top-r.margins.top);w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e-r.helperProportions.width}).left-r.margins.left);b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s}).left-r.margins.left)}d=y||p||w||b;k.snapMode!="outer"&&(y=Math.abs(o-l)<=u,p=Math.abs(h-v)<=u,w=Math.abs(e-c)<=u,b=Math.abs(s-a)<=u,y&&(i.position.top=r._convertPositionTo("relative",{top:o,left:0}).top-r.margins.top),p&&(i.position.top=r._convertPositionTo("relative",{top:h-r.helperProportions.height,left:0}).top-r.margins.top),w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e}).left-r.margins.left),b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s-r.helperProportions.width}).left-r.margins.left));!r.snapElements[f].snapping&&(y||p||w||b||d)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item}));r.snapElements[f].snapping=y||p||w||b||d}else r.snapElements[f].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=!1}}});n.ui.plugin.add("draggable","stack",{start:function(){var t=n(this).data("draggable").options,i;t=n.makeArray(n(t.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});t.length&&(i=parseInt(t[0].style.zIndex)||0,n(t).each(function(n){this.style.zIndex=i+n}),this[0].style.zIndex=i+t.length)}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i){t=n(i.helper);i=n(this).data("draggable").options;t.css("zIndex")&&(i._zIndex=t.css("zIndex"));t.css("zIndex",i.zIndex)},stop:function(t,i){t=n(this).data("draggable").options;t._zIndex&&n(i.helper).css("zIndex",t._zIndex)}})}(jQuery),function(n){n.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0;this.isout=1;this.accept=n.isFunction(i)?i:function(n){return n.is(i)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};n.ui.ddmanager.droppables[t.scope]=n.ui.ddmanager.droppables[t.scope]||[];n.ui.ddmanager.droppables[t.scope].push(this);t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var i=n.ui.ddmanager.droppables[this.options.scope],t=0;t<i.length;t++)i[t]==this&&i.splice(t,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){t=="accept"&&(this.accept=n.isFunction(i)?i:function(n){return n.is(i)});n.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;!i||(i.currentItem||i.element)[0]==this.element[0]||this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;!i||(i.currentItem||i.element)[0]==this.element[0]||this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u;return!r||(r.currentItem||r.element)[0]==this.element[0]?!1:(u=!1,this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=n.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(t,{offset:t.element.offset()}),t.options.tolerance))return u=!0,!1}),u)?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}});n.extend(n.ui.droppable,{version:"1.8.14"});n.ui.intersect=function(t,i,r){if(!i.offset)return!1;var e=(t.positionAbs||t.position.absolute).left,s=e+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,h=o+t.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,f=i.offset.top,l=f+i.proportions.height;switch(r){case"fit":return u<=e&&s<=c&&f<=o&&h<=l;case"intersect":return u<e+t.helperProportions.width/2&&s-t.helperProportions.width/2<c&&f<o+t.helperProportions.height/2&&h-t.helperProportions.height/2<l;case"pointer":return n.ui.isOver((t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f,u,i.proportions.height,i.proportions.width);case"touch":return(o>=f&&o<=l||h>=f&&h<=l||o<f&&h>l)&&(e>=u&&e<=c||s>=u&&s<=c||e<u&&s>c);default:return!1}};n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(droppable)").andSelf(),r=0,f;n:for(;r<u.length;r++)if(!(u[r].options.disabled||t&&!u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]==u[r].element[0]){u[r].proportions.height=0;continue n}u[r].visible=u[r].element.css("display")!="none";u[r].visible&&(o=="mousedown"&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions={width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight})}},drop:function(t,i){var r=!1;return n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance)&&(r=r||this._drop.call(this,i)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){var u,r,f;this.options.disabled||this.greedyChild||!this.visible||(u=n.ui.intersect(t,this,this.options.tolerance),(u=!u&&this.isover==1?"isout":u&&this.isover==0?"isover":null)&&(this.options.greedy&&(f=this.element.parents(":data(droppable):eq(0)"),f.length&&(r=n.data(f[0],"droppable"),r.greedyChild=u=="isover"?1:0)),r&&u=="isover"&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[u]=1,this[u=="isout"?"isover":"isout"]=0,this[u=="isover"?"_over":"_out"].call(this,i),r&&u=="isout"&&(r.isout=0,r.isover=1,r._over.call(r,i))))})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(n){n.widget("ui.resizable",n.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var r=this,t=this.options,e,u,i,f;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&n.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(n('<div class="ui-wrapper" style="overflow: hidden;"><\/div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String)for(this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},u=0;u<e.length;u++)i=n.trim(e[u]),f=n('<div class="ui-resizable-handle ui-resizable-'+i+'"><\/div>'),/sw|se|ne|nw/.test(i)&&f.css({zIndex:++t.zIndex}),"se"==i&&f.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(f);this._renderAxis=function(t){var i,r,u;t=t||this.element;for(i in this.handles)this.handles[i].constructor==String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),u=0,u=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,u),this._proportionallyResize()),n(this.handles[i])};this._renderAxis(this.element);this._handles=n(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!r.resizing){if(this.className)var n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);r.axis=n&&n[1]?n[1]:"se"}});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").hover(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),r._handles.show())},function(){t.disabled||r.resizing||(n(this).addClass("ui-resizable-autohide"),r._handles.hide())}));this._mouseInit()},destroy:function(){var i,t;return this._mouseDestroy(),i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()},this.elementIsWrapper&&(i(this.element),t=this.element,t.after(this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")})).remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var r in this.handles)n(this.handles[r])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var u=this.options,f=this.element.position(),r=this.element,e;return this.resizing=!0,this.documentScroll={top:n(document).scrollTop(),left:n(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:f.top,left:f.left}),n.browser.opera&&/relative/.test(r.css("position"))&&r.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof u.aspectRatio=="number"?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,u=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor",u=="auto"?this.axis+"-resize":u),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(n){var r=this.helper,t=this.originalMousePosition,i=this._change[this.axis];return i?(t=i.apply(this,[n,n.pageX-t.left||0,n.pageY-t.top||0]),this._updateVirtualBoundaries(n.shiftKey),(this._aspectRatio||n.shiftKey)&&(t=this._updateRatio(t,n)),t=this._respectSize(t,n),this._propagate("resize",n),r.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(t),this._trigger("resize",n,this.ui()),!1):!1},_mouseStop:function(t){var f,i,r,u,e;return this.resizing=!1,f=this.options,i=this,this._helper&&(r=this._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),r=u&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,u=u?0:i.sizeDiff.width,u={width:i.helper.width()-u,height:i.helper.height()-r},r=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,e=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null,f.animate||this.element.css(n.extend(u,{top:e,left:r})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!f.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var i=this.options,r,u,f;i={minWidth:t(i.minWidth)?i.minWidth:0,maxWidth:t(i.maxWidth)?i.maxWidth:Infinity,minHeight:t(i.minHeight)?i.minHeight:0,maxHeight:t(i.maxHeight)?i.maxHeight:Infinity};(this._aspectRatio||n)&&(n=i.minHeight*this.aspectRatio,u=i.minWidth/this.aspectRatio,r=i.maxHeight*this.aspectRatio,f=i.maxWidth/this.aspectRatio,n>i.minWidth&&(i.minWidth=n),u>i.minHeight&&(i.minHeight=u),r<i.maxWidth&&(i.maxWidth=r),f<i.maxHeight&&(i.maxHeight=f));this._vBoundaries=i},_updateCache:function(n){this.offset=this.helper.offset();t(n.left)&&(this.position.left=n.left);t(n.top)&&(this.position.top=n.top);t(n.height)&&(this.size.height=n.height);t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var i=this.position,r=this.size,u=this.axis;return t(n.height)?n.width=n.height*this.aspectRatio:t(n.width)&&(n.height=n.width/this.aspectRatio),u=="sw"&&(n.left=i.left+(r.width-n.width),n.top=null),u=="nw"&&(n.top=i.top+(r.height-n.height),n.left=i.left+(r.width-n.width)),n},_respectSize:function(n){var i=this._vBoundaries,r=this.axis,u=t(n.width)&&i.maxWidth&&i.maxWidth<n.width,f=t(n.height)&&i.maxHeight&&i.maxHeight<n.height,e=t(n.width)&&i.minWidth&&i.minWidth>n.width,o=t(n.height)&&i.minHeight&&i.minHeight>n.height;e&&(n.width=i.minWidth);o&&(n.height=i.minHeight);u&&(n.width=i.maxWidth);f&&(n.height=i.maxHeight);var s=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(r);return r=/nw|ne|n/.test(r),e&&c&&(n.left=s-i.minWidth),u&&c&&(n.left=s-i.maxWidth),o&&r&&(n.top=h-i.minHeight),f&&r&&(n.top=h-i.maxHeight),(i=!n.width&&!n.height)&&!n.left&&n.top?n.top=null:i&&!n.top&&n.left&&(n.left=null),n},_proportionallyResize:function(){var i,r,t,u,f;if(this._proportionallyResizeElements.length)for(i=this.helper||this.element,r=0;r<this._proportionallyResizeElements.length;r++)t=this._proportionallyResizeElements[r],this.borderDif||(u=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],f=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")],this.borderDif=n.map(u,function(n,t){return n=parseInt(n,10)||0,t=parseInt(f[t],10)||0,n+t})),n.browser.msie&&(n(i).is(":hidden")||n(i).parents(":hidden").length)||t.css({height:i.height()-this.borderDif[0]-this.borderDif[2]||0,width:i.width()-this.borderDif[1]-this.borderDif[3]||0})},_renderProxy:function(){var r=this.options,t,i;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||n('<div style="overflow:hidden;"><\/div>'),t=n.browser.msie&&n.browser.version<7,i=t?1:0,t=t?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+t,height:this.element.outerHeight()+t,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++r.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){return{left:this.originalPosition.left+t,width:this.originalSize.width-t}},n:function(n,t,i){return{top:this.originalPosition.top+i,height:this.originalSize.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);t!="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.extend(n.ui.resizable,{version:"1.8.14"});n.ui.plugin.add("resizable","alsoResize",{start:function(){var t=n(this).data("resizable").options,i=function(t){n(t).each(function(){var t=n(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10),position:t.css("position")})})};typeof t.alsoResize!="object"||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).data("resizable");t=r.options;var u=r.originalSize,f=r.originalPosition,o={height:r.size.height-u.height||0,width:r.size.width-u.width||0,top:r.position.top-f.top||0,left:r.position.left-f.left||0},e=function(t,u){n(t).each(function(){var t=n(this),e=n(this).data("resizable-alsoresize"),f={},s=u&&u.length?u:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(s,function(n,t){(n=(e[t]||0)+(o[t]||0))&&n>=0&&(f[t]=n||null)});n.browser.opera&&/relative/.test(t.css("position"))&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"}));t.css(f)})};typeof t.alsoResize=="object"&&!t.alsoResize.nodeType?n.each(t.alsoResize,function(n,t){e(n,t)}):e(t.alsoResize)},stop:function(){var i=n(this).data("resizable"),t=i.options,r=function(t){n(t).each(function(){var t=n(this);t.css({position:t.data("resizable-alsoresize").position})})};i._revertToRelativePosition&&(i._revertToRelativePosition=!1,typeof t.alsoResize=="object"&&!t.alsoResize.nodeType?n.each(t.alsoResize,function(n){r(n)}):r(t.alsoResize));n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).data("resizable"),o=i.options,r=i._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),f=u&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,e;u={width:i.size.width-(u?0:i.sizeDiff.width),height:i.size.height-f};f=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null;e=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(u,e&&f?{top:e,left:f}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var t=n(this).data("resizable"),r=t.element,u=t.options.containment,f,e,o,s;(r=u instanceof n?u.get(0):/parent/.test(u)?r.parent().get(0):u)&&(t.containerElement=n(r),/document/.test(u)||u==document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(f=n(r),e=[],n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(f.css("padding"+t))}),t.containerOffset=f.offset(),t.containerPosition=f.position(),t.containerSize={height:f.innerHeight()-e[3],width:f.innerWidth()-e[1]},u=t.containerOffset,o=t.containerSize.height,s=t.containerSize.width,s=n.ui.hasScroll(r,"left")?r.scrollWidth:s,o=n.ui.hasScroll(r)?r.scrollHeight:o,t.parentData={element:r,left:u.left,top:u.top,width:s,height:o}))},resize:function(t){var i=n(this).data("resizable"),f=i.options,r=i.containerOffset,e=i.position,u,o;t=i._aspectRatio||t.shiftKey;u={top:0,left:0};o=i.containerElement;o[0]!=document&&/static/.test(o.css("position"))&&(u=r);e.left<(i._helper?r.left:0)&&(i.size.width+=i._helper?i.position.left-r.left:i.position.left-u.left,t&&(i.size.height=i.size.width/f.aspectRatio),i.position.left=f.helper?r.left:0);e.top<(i._helper?r.top:0)&&(i.size.height+=i._helper?i.position.top-r.top:i.position.top,t&&(i.size.width=i.size.height*f.aspectRatio),i.position.top=i._helper?r.top:0);i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;f=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width);r=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height);e=i.containerElement.get(0)==i.element.parent().get(0);u=/relative|absolute/.test(i.containerElement.css("position"));e&&u&&(f-=i.parentData.left);f+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-f,t&&(i.size.height=i.size.width/i.aspectRatio));r+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-r,t&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("resizable"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width;i=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:i});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:i})}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("resizable"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(){var t=n(this).data("resizable"),i=t.options,o=t.size,r=t.originalSize,f=t.originalPosition,e=t.axis,u;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;u=Math.round((o.width-r.width)/(i.grid[0]||1))*(i.grid[0]||1);i=Math.round((o.height-r.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(e)?(t.size.width=r.width+u,t.size.height=r.height+i):/^(ne)$/.test(e)?(t.size.width=r.width+u,t.size.height=r.height+i,t.position.top=f.top-i):(/^(sw)$/.test(e)?(t.size.width=r.width+u,t.size.height=r.height+i):(t.size.width=r.width+u,t.size.height=r.height+i,t.position.top=f.top-i),t.position.left=f.left-u)}});var i=function(n){return parseInt(n,10)||0},t=function(n){return!isNaN(parseInt(n,10))}}(jQuery),function(n){n.widget("ui.selectable",n.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var i=this,t;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t=n(i.options.filter,i.element[0]);t.each(function(){var t=n(this),i=t.offset();n.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})};this.refresh();this.selectees=t.addClass("ui-selectee");this._mouseInit();this.helper=n("<div class='ui-selectable-helper'><\/div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var r=this,i;this.opos=[t.pageX,t.pageY];this.options.disabled||(i=this.options,this.selectees=n(i.filter,this.element[0]),this._trigger("start",t),n(i.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=n.data(this,"selectable-item");i.startselected=!0;t.metaKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,r._trigger("unselecting",t,{unselecting:i.element}))}),n(t.target).parents().andSelf().each(function(){var i=n.data(this,"selectable-item"),u;if(i)return u=!t.metaKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(u?"ui-unselecting":"ui-selected").addClass(u?"ui-selecting":"ui-unselecting"),i.unselecting=!u,i.selecting=u,(i.selected=u)?r._trigger("selecting",t,{selecting:i.element}):r._trigger("unselecting",t,{unselecting:i.element}),!1}))},_mouseDrag:function(t){var e=this,o;if(this.dragged=!0,!this.options.disabled){var s=this.options,i=this.opos[0],r=this.opos[1],u=t.pageX,f=t.pageY;return i>u&&(o=u,u=i,i=o),r>f&&(o=f,f=r,r=o),this.helper.css({left:i,top:r,width:u-i,height:f-r}),this.selectees.each(function(){var o=n.data(this,"selectable-item"),h;!o||o.element==e.element[0]||(h=!1,s.tolerance=="touch"?h=!(o.left>u||o.right<i||o.top>f||o.bottom<r):s.tolerance=="fit"&&(h=o.left>i&&o.right<u&&o.top>r&&o.bottom<f),h?(o.selected&&(o.$element.removeClass("ui-selected"),o.selected=!1),o.unselecting&&(o.$element.removeClass("ui-unselecting"),o.unselecting=!1),o.selecting||(o.$element.addClass("ui-selecting"),o.selecting=!0,e._trigger("selecting",t,{selecting:o.element}))):(o.selecting&&(t.metaKey&&o.startselected?(o.$element.removeClass("ui-selecting"),o.selecting=!1,o.$element.addClass("ui-selected"),o.selected=!0):(o.$element.removeClass("ui-selecting"),o.selecting=!1,o.startselected&&(o.$element.addClass("ui-unselecting"),o.unselecting=!0),e._trigger("unselecting",t,{unselecting:o.element}))),o.selected&&(t.metaKey||o.startselected||(o.$element.removeClass("ui-selected"),o.selected=!1,o.$element.addClass("ui-unselecting"),o.unselecting=!0,e._trigger("unselecting",t,{unselecting:o.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-unselecting");r.unselecting=!1;r.startselected=!1;i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected");r.selecting=!1;r.selected=!0;r.startselected=!0;i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}});n.extend(n.ui.selectable,{version:"1.8.14"})}(jQuery),function(n){n.widget("ui.sortable",n.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var n=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?n.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData("sortable-item");return this},_setOption:function(t,i){t==="disabled"?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):n.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var r,u,f;return this.reverting?!1:this.options.disabled||this.options.type=="static"?!1:(this._refreshItems(t),r=null,u=this,n(t.target).parents().each(function(){if(n.data(this,"sortable-item")==u)return r=n(this),!1}),n.data(t.target,"sortable-item")==u&&(r=n(t.target)),!r)?!1:this.options.handle&&!i&&(f=!1,n(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(f=!0)}),!f)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,i,r){i=this.options;var u=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(n("body").css("cursor")&&(this._storedCursor=n("body").css("cursor")),n("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,u._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,r,u,f;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(i=this.options,r=!1,this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(document).scrollTop()<i.scrollSensitivity?r=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(r=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed)),t.pageX-n(document).scrollLeft()<i.scrollSensitivity?r=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(r=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(r=this.items[i],u=r.item[0],f=this._intersectsWithPointer(r),f&&u!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=u&&!n.ui.contains(this.placeholder[0],u)&&(this.options.type=="semi-dynamic"?!n.ui.contains(this.element[0],u):!0)){if(this.direction=f==1?"down":"up",this.options.tolerance=="pointer"||this._intersectsWithSides(r))this._rearrange(t,r);else break;this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var r=this;i=r.placeholder.offset();r.reverting=!0;n(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var i=this,t;if(this.dragging)for(this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show(),t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,i._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,i._uiHash(this)),this.containers[t].containerCache.over=0);return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,u=n.left,e=u+n.width,f=n.top,o=f+n.height,r=this.offset.click.top,s=this.offset.click.left;return r=i+r>f&&i+r<o&&t+s>u&&t+s<e,this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?r:u<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<e&&f<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<o},_intersectsWithPointer:function(t){var i=n.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r;return(t=n.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=i&&t,t=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection(),!i)?!1:this.floating?r&&r=="right"||t=="down"?2:1:t&&(t=="down"?2:1)},_intersectsWithSides:function(t){var u=n.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i,r;return t=n.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection(),this.floating&&r?r=="right"&&t||r=="left"&&!t:i&&(i=="down"&&u||i=="up"&&!u)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!=0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!=0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor==String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){var o=[],r=[],f=this._connectWith(),e,u,i;if(f&&t)for(t=f.length-1;t>=0;t--)for(e=n(f[t]),u=e.length-1;u>=0;u--)i=n.data(e[u],"sortable"),i&&i!=this&&!i.options.disabled&&r.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(r.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),t=r.length-1;t>=0;t--)r[t][0].each(function(){o.push(this)});return n(o)},_removeCurrentsFromItems:function(){for(var t,i=this.currentItem.find(":data(sortable-item)"),n=0;n<this.items.length;n++)for(t=0;t<i.length;t++)i[t]==this.items[n].item[0]&&this.items.splice(n,1)},_refreshItems:function(t){var r,e,u,i;this.items=[];this.containers=[this];var s=this.items,o=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],f=this._connectWith();if(f)for(r=f.length-1;r>=0;r--)for(e=n(f[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],"sortable"),i&&i!=this&&!i.options.disabled&&(o.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=o.length-1;r>=0;r--)for(t=o[r][1],f=o[r][0],u=0,e=f.length;u<e;u++)i=n(f[u]),i.data("sortable-item",t),s.push({item:i,instance:t,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,u,r;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)u=this.items[i],u.instance!=this.currentContainer&&this.currentContainer&&u.item[0]!=this.currentItem[0]||(r=this.options.toleranceElement?n(this.options.toleranceElement,u.item):u.item,t||(u.width=r.outerWidth(),u.height=r.outerHeight()),r=r.offset(),u.left=r.left,u.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i=t||this,r=i.options,u;r.placeholder&&r.placeholder.constructor!=String||(u=r.placeholder,r.placeholder={element:function(){var t=n(document.createElement(i.currentItem[0].nodeName)).addClass(u||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return u||(t.style.visibility="hidden"),t},update:function(n,t){u&&!r.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}});i.placeholder=n(r.placeholder.element.call(i.element,i.currentItem));i.currentItem.after(i.placeholder);r.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var e,f,o,u=null,r=null,i=this.containers.length-1;i>=0;i--)n.ui.contains(this.currentItem[0],this.containers[i].element[0])||(this._intersectsWith(this.containers[i].containerCache)?u&&n.ui.contains(this.containers[i].element[0],u.element[0])||(u=this.containers[i],r=i):this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0));if(u)if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){for(u=1e4,i=null,e=this.positionAbs[this.containers[r].floating?"left":"top"],f=this.items.length-1;f>=0;f--)n.ui.contains(this.containers[r].element[0],this.items[f].item[0])&&(o=this.items[f][this.containers[r].floating?"left":"top"],Math.abs(o-e)<u&&(u=Math.abs(o-e),i=this.items[f]));(i||this.options.dropOnEmpty)&&(this.currentContainer=this.containers[r],i?this._rearrange(t,i,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1)}},_createHelper:function(t){var i=this.options;return t=n.isFunction(i.helper)?n(i.helper.apply(this.element[0],[t,this.currentItem])):i.helper=="clone"?this.currentItem.clone():this.currentItem,t.parents("body").length||n(i.appendTo!="parent"?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(t[0]),t[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(t[0].style.width==""||i.forceHelperSize)&&t.width(this.currentItem.width()),(t[0].style.height==""||i.forceHelperSize)&&t.height(this.currentItem.height()),t},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var i=this.options,t,r;i.containment=="parent"&&(i.containment=this.helper[0].parentNode);(i.containment=="document"||i.containment=="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n(i.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(n(i.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],i=n(i.containment).offset(),r=n(t).css("overflow")!="hidden",this.containment=[i.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);t=t=="absolute"?1:-1;var r=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,u=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*t+this.offset.parent.top*t-(n.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():u?0:r.scrollTop())*t),left:i.left+this.offset.relative.left*t+this.offset.parent.left*t-(n.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():u?0:r.scrollLeft())*t)}},_generatePosition:function(t){var u=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(f[0].tagName),i,r;return this.cssPosition!="relative"||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),i=t.pageX,r=t.pageY,this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),u.grid&&(r=this.originalPageY+Math.round((r-this.originalPageY)/u.grid[1])*u.grid[1],r=this.containment?(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?(r-this.offset.click.top<this.containment[1])?r+u.grid[1]:r-u.grid[1]:r:r,i=this.originalPageX+Math.round((i-this.originalPageX)/u.grid[0])*u.grid[0],i=this.containment?(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?(i-this.offset.click.left<this.containment[0])?i+u.grid[0]:i-u.grid[0]:i:i)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(n.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:f.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(n.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:f.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this,f=this.counter;window.setTimeout(function(){f==u.counter&&u.refreshPositions(!r)},0)},_clear:function(t,i){var u,r;if(this.reverting=!1,u=[],!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(r in this._storedCSS)(this._storedCSS[r]=="auto"||this._storedCSS[r]=="static")&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&u.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&u.push(function(n){this._trigger("update",n,this._uiHash())}),!n.ui.contains(this.element[0],this.currentItem[0]))for(i||u.push(function(n){this._trigger("remove",n,this._uiHash())}),r=this.containers.length-1;r>=0;r--)n.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!i&&(u.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),u.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])));for(r=this.containers.length-1;r>=0;r--)i||u.push(function(n){return function(t){n._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(u.push(function(n){return function(t){n._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&n("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",t,this._uiHash()),r=0;r<u.length;r++)u[r].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(r=0;r<u.length;r++)u[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});n.extend(n.ui.sortable,{version:"1.8.14"})}(jQuery),function(n){var t=0;n.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,r=this.element[0].ownerDocument,i;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(r){if(!(t.options.disabled||t.element.attr("readonly"))){i=!1;var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:t._move("previousPage",r);break;case u.PAGE_DOWN:t._move("nextPage",r);break;case u.UP:t._move("previous",r);r.preventDefault();break;case u.DOWN:t._move("next",r);r.preventDefault();break;case u.ENTER:case u.NUMPAD_ENTER:t.menu.active&&(i=!0,r.preventDefault());case u.TAB:if(!t.menu.active)return;t.menu.select(r);break;case u.ESCAPE:t.element.val(t.term);t.close(r);break;default:clearTimeout(t.searching);t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,r))},t.options.delay)}}}).bind("keypress.autocomplete",function(n){i&&(i=!1,n.preventDefault())}).bind("focus.autocomplete",function(){t.options.disabled||(t.selectedItem=null,t.previous=t.element.val())}).bind("blur.autocomplete",function(n){t.options.disabled||(clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(n);t._change(n)},150))});this._initSource();this.response=function(){return t._response.apply(t,arguments)};this.menu=n("<ul><\/ul>").addClass("ui-autocomplete").appendTo(n(this.options.appendTo||"body",r)[0]).mousedown(function(i){var r=t.menu.element[0];n(i.target).closest(".ui-menu-item").length||setTimeout(function(){n(document).one("mousedown",function(i){i.target===t.element[0]||i.target===r||n.ui.contains(r,i.target)||t.close()})},1);setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(n,i){i=i.item.data("item.autocomplete");!1!==t._trigger("focus",n,{item:i})&&/^key/.test(n.originalEvent.type)&&t.element.val(i.value)},selected:function(n,i){var u=i.item.data("item.autocomplete"),f=t.previous;t.element[0]!==r.activeElement&&(t.element.focus(),t.previous=f,setTimeout(function(){t.previous=f;t.selectedItem=u},1));!1!==t._trigger("select",n,{item:u})&&t.element.val(u.value);t.term=t.element.val();t.close(n);t.selectedItem=u},blur:function(){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");n.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();n.Widget.prototype.destroy.call(this)},_setOption:function(t,i){n.Widget.prototype._setOption.apply(this,arguments);t==="source"&&this._initSource();t==="appendTo"&&this.menu.element.appendTo(n(i||"body",this.element[0].ownerDocument)[0]);t==="disabled"&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var i=this,r,u;n.isArray(this.options.source)?(r=this.options.source,this.source=function(t,i){i(n.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(u=this.options.source,this.source=function(r,f){i.xhr&&i.xhr.abort();i.xhr=n.ajax({url:u,data:r,dataType:"json",autocompleteRequest:++t,success:function(n){this.autocompleteRequest===t&&f(n)},error:function(){this.autocompleteRequest===t&&f([])}})}):this.source=this.options.source},search:function(n,t){return(n=n!=null?n:this.element.val(),this.term=this.element.val(),n.length<this.options.minLength)?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(n):void 0)},_search:function(n){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:n},this.response)},_response:function(n){!this.options.disabled&&n&&n.length?(n=this._normalize(n),this._suggest(n),this._trigger("open")):this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(n){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",n))},_change:function(n){this.previous!==this.element.val()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return typeof t=="string"?{label:t,value:t}:n.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t);this.menu.deactivate();this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new n.Event("mouseover"))},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItem(t,i)})},_renderItem:function(t,i){return n("<li><\/li>").data("item.autocomplete",i).append(n("<a><\/a>").text(i.label)).appendTo(t)},_move:function(n,t){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(n)||this.menu.last()&&/^next/.test(n)?(this.element.val(this.term),this.menu.deactivate()):this.menu[n](t):this.search(null,t)},widget:function(){return this.menu.element}});n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=new RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}})}(jQuery),function(n){n.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){n(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))});this.refresh()},refresh:function(){var t=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,n(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(n,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),u=this.element.height();i<0?this.element.scrollTop(r+i):i>=u&&this.element.scrollTop(r+i-u+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",n,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(n){this.move("next",".ui-menu-item:first",n)},previous:function(n){this.move("prev",".ui-menu-item:last",n)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(n,t,i){this.active?(n=this.active[n+"All"](".ui-menu-item").eq(0),n.length?this.activate(i,n):this.activate(i,this.element.children(t))):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll())if(!this.active||this.last())this.activate(t,this.element.children(".ui-menu-item:first"));else{var r=this.active.offset().top,u=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=n(this).offset().top-r-u+n(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last"));this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll())if(!this.active||this.first())this.activate(t,this.element.children(".ui-menu-item:last"));else{var i=this.active.offset().top,r=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=n(this).offset().top-i+r-n(this).height();return t<10&&t>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[n.fn.prop?"prop":"attr"]("scrollHeight")},select:function(n){this._trigger("selected",n,{item:this.active})}})}(jQuery),function(n,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},u=n.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};n.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=n(this).css(t).offset().top;i<0&&n(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){var u,r;this.originalTitle=this.element.attr("title");typeof this.originalTitle!="string"&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var t=this,i=t.options,o=i.title||"&#160;",e=n.ui.dialog.getTitleId(t.element),f=(t.uiDialog=n("<div><\/div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(r){i.closeOnEscape&&r.keyCode&&r.keyCode===n.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(n){t.moveToTop(!1,n)});t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);u=(t.uiDialogTitlebar=n("<div><\/div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f);r=n('<a href="#"><\/a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){r.addClass("ui-state-hover")},function(){r.removeClass("ui-state-hover")}).focus(function(){r.addClass("ui-state-focus")}).blur(function(){r.removeClass("ui-state-focus")}).click(function(n){return t.close(n),!1}).appendTo(u);(t.uiDialogTitlebarCloseText=n("<span><\/span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(r);n("<span><\/span>").addClass("ui-dialog-title").attr("id",e).html(o).prependTo(u);n.isFunction(i.beforeclose)&&!n.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose);u.find("*").add(u).disableSelection();i.draggable&&n.fn.draggable&&t._makeDraggable();i.resizable&&n.fn.resizable&&t._makeResizable();t._createButtons(i.buttons);t._isOpen=!1;n.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var n=this;return n.overlay&&n.overlay.destroy(),n.uiDialog.hide(),n.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),n.uiDialog.remove(),n.originalTitle&&n.element.attr("title",n.originalTitle),n},widget:function(){return this.uiDialog},close:function(t){var i=this,r,u;if(!1!==i._trigger("beforeClose",t))return i.overlay&&i.overlay.destroy(),i.uiDialog.unbind("keypress.ui-dialog"),i._isOpen=!1,i.options.hide?i.uiDialog.hide(i.options.hide,function(){i._trigger("close",t)}):(i.uiDialog.hide(),i._trigger("close",t)),n.ui.dialog.overlay.resize(),i.options.modal&&(r=0,n(".ui-dialog").each(function(){this!==i.uiDialog[0]&&(u=n(this).css("z-index"),isNaN(u)||(r=Math.max(r,u)))}),n.ui.dialog.maxZ=r),i},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var r=this,u=r.options;return u.modal&&!t||!u.stack&&!u.modal?r._trigger("focus",i):(u.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=u.zIndex),r.overlay&&(n.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",n.ui.dialog.overlay.maxZ=n.ui.dialog.maxZ)),t={scrollTop:r.element.attr("scrollTop"),scrollLeft:r.element.attr("scrollLeft")},n.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",n.ui.dialog.maxZ),r.element.attr(t),r._trigger("focus",i),r)},open:function(){if(!this._isOpen){var t=this,i=t.options,r=t.uiDialog;return t.overlay=i.modal?new n.ui.dialog.overlay(t):null,t._size(),t._position(i.position),r.show(i.show),t.moveToTop(!0),i.modal&&r.bind("keypress.ui-dialog",function(t){if(t.keyCode===n.ui.keyCode.TAB){var i=n(":tabbable",this),r=i.filter(":first");if(i=i.filter(":last"),t.target!==i[0]||t.shiftKey){if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}else return r.focus(1),!1}}),n(t.element.find(":tabbable").get().concat(r.find(".ui-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,r=!1,f=n("<div><\/div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),e=n("<div><\/div>").addClass("ui-dialog-buttonset").appendTo(f);i.uiDialog.find(".ui-dialog-buttonpane").remove();typeof t=="object"&&t!==null&&n.each(t,function(){return!(r=!0)});r&&(n.each(t,function(t,r){r=n.isFunction(r)?{click:r,text:t}:r;var f=n('<button type="button"><\/button>').click(function(){r.click.apply(i.element[0],arguments)}).appendTo(e);n.each(r,function(n,t){n!=="click"&&(n in u?f[n](t):f.attr(n,t))});n.fn.button&&f.button()}),f.appendTo(i.uiDialog))},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=t.options,u=n(document),f;t.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(u,e){f=r.height==="auto"?"auto":n(this).height();n(this).height(n(this).height()).addClass("ui-dialog-dragging");t._trigger("dragStart",u,i(e))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(e,o){r.position=[o.position.left-u.scrollLeft(),o.position.top-u.scrollTop()];n(this).removeClass("ui-dialog-dragging").height(f);t._trigger("dragStop",e,i(o));n.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function f(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}i=i===t?this.options.resizable:i;var r=this,u=r.options,e=r.uiDialog.css("position");i=typeof i=="string"?i:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:u.maxWidth,maxHeight:u.maxHeight,minWidth:u.minWidth,minHeight:r._minHeight(),handles:i,start:function(t,i){n(this).addClass("ui-dialog-resizing");r._trigger("resizeStart",t,f(i))},resize:function(n,t){r._trigger("resize",n,f(t))},stop:function(t,i){n(this).removeClass("ui-dialog-resizing");u.height=n(this).height();u.width=n(this).width();r._trigger("resizeStop",t,f(i));n.ui.dialog.overlay.resize()}}).css("position",e).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var n=this.options;return n.height==="auto"?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(t){var i=[],r=[0,0],u;t?((typeof t=="string"||typeof t=="object"&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],i.length===1&&(i[1]=i[0]),n.each(["left","top"],function(n,t){+i[n]===i[n]&&(r[n]=i[n],i[n]=t)}),t={my:i.join(" "),at:i.join(" "),offset:r.join(" ")}),t=n.extend({},n.ui.dialog.prototype.options.position,t)):t=n.ui.dialog.prototype.options.position;(u=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(n.extend({of:window},t));u||this.uiDialog.hide()},_setOptions:function(t){var e=this,u={},f=!1;n.each(t,function(n,t){e._setOption(n,t);n in i&&(f=!0);n in r&&(u[n]=t)});f&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(t,i){var r=this,u=r.uiDialog,f;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":r._createButtons(i);break;case"closeText":r.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":u.removeClass(r.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i);break;case"disabled":i?u.addClass("ui-dialog-disabled"):u.removeClass("ui-dialog-disabled");break;case"draggable":f=u.is(":data(draggable)");f&&!i&&u.draggable("destroy");!f&&i&&r._makeDraggable();break;case"position":r._position(i);break;case"resizable":(f=u.is(":data(resizable)"))&&!i&&u.resizable("destroy");f&&typeof i=="string"&&u.resizable("option","handles",i);f||i===!1||r._makeResizable(i);break;case"title":n(".ui-dialog-title",r.uiDialogTitlebar).html(""+(i||"&#160;"))}n.Widget.prototype._setOption.apply(r,arguments)},_size:function(){var t=this.options,i,r,u=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});t.minWidth>t.width&&(t.width=t.minWidth);i=this.uiDialog.css({height:"auto",width:t.width}).height();r=Math.max(0,t.minHeight-i);t.height==="auto"?n.support.minHeight?this.element.css({minHeight:r,height:"auto"}):(this.uiDialog.show(),t=this.element.css("height","auto").height(),u||this.uiDialog.hide(),this.element.height(Math.max(t,r))):this.element.height(Math.max(t.height-i,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});n.extend(n.ui.dialog,{version:"1.8.14",uuid:0,maxZ:0,getTitleId:function(n){return n=n.attr("id"),n||(this.uuid+=1,n=this.uuid),"ui-dialog-title-"+n},overlay:function(t){this.$el=n.ui.dialog.overlay.create(t)}});n.extend(n.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(n){return n+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(t){if(n(t.target).zIndex()<n.ui.dialog.overlay.maxZ)return!1})},1),n(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&i.keyCode&&i.keyCode===n.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||n("<div><\/div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return n.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var r=n.inArray(t,this.instances),i;r!=-1&&this.oldInstances.push(this.instances.splice(r,1)[0]);this.instances.length===0&&n([document,window]).unbind(".dialog-overlay");t.remove();i=0;n.each(this.instances,function(){i=Math.max(i,this.css("z-index"))});this.maxZ=i},height:function(){var t,i;return n.browser.msie&&n.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<i?n(window).height()+"px":t+"px"):n(document).height()+"px"},width:function(){var t,i;return n.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<i?n(window).width()+"px":t+"px"):n(document).width()+"px"},resize:function(){var t=n([]);n.each(n.ui.dialog.overlay.instances,function(){t=t.add(this)});t.css({width:0,height:0}).css({width:n.ui.dialog.overlay.width(),height:n.ui.dialog.overlay.height()})}});n.extend(n.ui.dialog.overlay.prototype,{destroy:function(){n.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(n,t){function f(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1};n.extend(this._defaults,this.regional[""]);this.dpDiv=e(n('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"><\/div>'))}function e(t){return t.bind("mouseout",function(t){t=n(t.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");t.length&&t.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){i=n(i.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");n.datepicker._isDisabledDatepicker(u.inline?t.parent()[0]:u.input[0])||!i.length||(i.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),i.addClass("ui-state-hover"),i.hasClass("ui-datepicker-prev")&&i.addClass("ui-datepicker-prev-hover"),i.hasClass("ui-datepicker-next")&&i.addClass("ui-datepicker-next-hover"))})}function r(i,r){n.extend(i,r);for(var u in r)(r[u]==null||r[u]==t)&&(i[u]=r[u]);return i}n.extend(n.ui,{datepicker:{version:"1.8.14"}});var i=(new Date).getTime(),u;n.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return r(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var f=null,r,u,e;for(r in this._defaults)if(u=t.getAttribute("date:"+r),u){f=f||{};try{f[r]=eval(u)}catch(o){f[r]=u}}r=t.nodeName.toLowerCase();u=r=="div"||r=="span";t.id||(this.uuid+=1,t.id="dp"+this.uuid);e=this._newInst(n(t),u);e.settings=n.extend({},i||{},f||{});r=="input"?this._connectDatepicker(t,e):u&&this._inlineDatepicker(t,e)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?e(n('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"><\/div>')):this.dpDiv}},_connectDatepicker:function(t,i){var r=n(t);i.append=n([]);i.trigger=n([]);r.hasClass(this.markerClassName)||(this._attachments(r,i),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(n,t,r){i.settings[t]=r}).bind("getData.datepicker",function(n,t){return this._get(i,t)}),this._autoSize(i),n.data(t,"datepicker",i))},_attachments:function(t,i){var r=this._get(i,"appendText"),f=this._get(i,"isRTL"),u;i.append&&i.append.remove();r&&(i.append=n('<span class="'+this._appendClass+'">'+r+"<\/span>"),t[f?"before":"after"](i.append));t.unbind("focus",this._showDatepicker);i.trigger&&i.trigger.remove();r=this._get(i,"showOn");(r=="focus"||r=="both")&&t.focus(this._showDatepicker);(r=="button"||r=="both")&&(r=this._get(i,"buttonText"),u=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:u,alt:r,title:r}):n('<button type="button"><\/button>').addClass(this._triggerClass).html(u==""?r:n("<img/>").attr({src:u,alt:r,title:r}))),t[f?"before":"after"](i.trigger),i.trigger.click(function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput==t[0]?n.datepicker._hideDatepicker():n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){var t,i,r;this._get(n,"autoSize")&&!n.inline&&(t=new Date(2009,11,20),i=this._get(n,"dateFormat"),i.match(/[DM]/)&&(r=function(n){for(var i=0,r=0,t=0;t<n.length;t++)n[t].length>i&&(i=n[t].length,r=t);return r},t.setMonth(r(this._get(n,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(n,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())),n.input.attr("size",this._formatDate(n,t).length))},_inlineDatepicker:function(t,i){var r=n(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv).bind("setData.datepicker",function(n,t,r){i.settings[t]=r}).bind("getData.datepicker",function(n,t){return this._get(i,t)}),n.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.dpDiv.show())},_dialogDatepicker:function(t,i,u,f,e){return t=this._dialogInst,t||(this.uuid+=1,this._dialogInput=n('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),t=this._dialogInst=this._newInst(this._dialogInput,!1),t.settings={},n.data(this._dialogInput[0],"datepicker",t)),r(t.settings,f||{}),i=i&&i.constructor==Date?this._formatDate(t,i):i,this._dialogInput.val(i),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),t.settings.onSelect=u,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],"datepicker",t),this},_destroyDatepicker:function(t){var r=n(t),u=n.data(t,"datepicker"),i;r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),n.removeData(t,"datepicker"),i=="input"?(u.append.remove(),u.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(i=="div"||i=="span")&&r.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i=n(t),u=n.data(t,"datepicker"),r;i.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),r=="input"?(t.disabled=!1,u.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(r=="div"||r=="span")&&(i=i.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")),this._disabledInputs=n.map(this._disabledInputs,function(n){return n==t?null:n}))},_disableDatepicker:function(t){var i=n(t),u=n.data(t,"datepicker"),r;i.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),r=="input"?(t.disabled=!0,u.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(r=="div"||r=="span")&&(i=i.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")),this._disabledInputs=n.map(this._disabledInputs,function(n){return n==t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==n)return!0;return!1},_getInst:function(t){try{return n.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(i,u,f){var e=this._getInst(i),o;if(arguments.length==2&&typeof u=="string")return u=="defaults"?n.extend({},n.datepicker._defaults):e?u=="all"?n.extend({},e.settings):this._get(e,u):null;if(o=u||{},typeof u=="string"&&(o={},o[u]=f),e){this._curInst==e&&this._hideDatepicker();var c=this._getDateDatepicker(i,!0),s=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max");r(e.settings,o);s!==null&&o.dateFormat!==t&&o.minDate===t&&(e.settings.minDate=this._formatDate(e,s));h!==null&&o.dateFormat!==t&&o.maxDate===t&&(e.settings.maxDate=this._formatDate(e,h));this._attachments(n(i),e);this._autoSize(e);this._setDate(e,c);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){(n=this._getInst(n))&&this._updateDatepicker(n)},_setDateDatepicker:function(n,t){(n=this._getInst(n))&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(n,t){return(n=this._getInst(n))&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var i=n.datepicker._getInst(t.target),r=!0,u=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return r=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),r[0]?n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,r[0]):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,u?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,u?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else t.keyCode==36&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var r=n.datepicker._getInst(i.target),u;if(n.datepicker._get(r,"constrainInput"))return r=n.datepicker._possibleChars(n.datepicker._get(r,"dateFormat")),u=String.fromCharCode(i.charCode==t?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||u<" "||!r||r.indexOf(u)>-1},_doKeyUp:function(t){if(t=n.datepicker._getInst(t.target),t.input.val()!=t.lastVal)try{n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,n.datepicker._getFormatConfig(t))&&(n.datepicker._setDateFromField(t),n.datepicker._updateAlternate(t),n.datepicker._updateDatepicker(t))}catch(i){n.datepicker.log(i)}return!0},_showDatepicker:function(t){var i,u,f,e,o;t=t.target||t;t.nodeName.toLowerCase()!="input"&&(t=n("input",t.parentNode)[0]);n.datepicker._isDisabledDatepicker(t)||n.datepicker._lastInput==t||(i=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!=i&&(n.datepicker._datepickerShowing&&n.datepicker._triggerOnClose(n.datepicker._curInst),n.datepicker._curInst.dpDiv.stop(!0,!0)),u=n.datepicker._get(i,"beforeShow"),r(i.settings,u?u.apply(t,[t,i]):{}),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),f=!1,n(t).parents().each(function(){return f|=n(this).css("position")=="fixed",!f}),f&&n.browser.opera&&(n.datepicker._pos[0]-=document.documentElement.scrollLeft,n.datepicker._pos[1]-=document.documentElement.scrollTop),u={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),u=n.datepicker._checkOffset(i,u,f),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":f?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),i.inline||(u=n.datepicker._get(i,"showAnim"),e=n.datepicker._get(i,"duration"),o=function(){var r=i.dpDiv.find("iframe.ui-datepicker-cover"),t;r.length&&(t=n.datepicker._getBorders(i.dpDiv),r.css({left:-t[0],top:-t[1],width:i.dpDiv.outerWidth(),height:i.dpDiv.outerHeight()}))},i.dpDiv.zIndex(n(t).zIndex()+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects[u]?i.dpDiv.show(u,n.datepicker._get(i,"showOptions"),e,o):i.dpDiv[u||"show"](u?e:null,o),u&&e||o(),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),n.datepicker._curInst=i))},_updateDatepicker:function(t){var i,r,f;this.maxRows=4;i=n.datepicker._getBorders(t.dpDiv);u=t;t.dpDiv.empty().append(this._generateHTML(t));r=t.dpDiv.find("iframe.ui-datepicker-cover");r.length&&r.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()});t.dpDiv.find("."+this._dayOverClass+" a").mouseover();i=this._getNumberOfMonths(t);r=i[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em");t.dpDiv[(i[0]!=1||i[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");t==n.datepicker._curInst&&n.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus();t.yearshtml&&(f=t.yearshtml,setTimeout(function(){f===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);f=t.yearshtml=null},0))},_getBorders:function(n){var t=function(n){return{thin:1,medium:2,thick:3}[n]||n};return[parseFloat(t(n.css("border-left-width"))),parseFloat(t(n.css("border-top-width")))]},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+n(document).scrollLeft(),s=document.documentElement.clientHeight+n(document).scrollTop();return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left==t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top==t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i=this._get(this._getInst(t),"isRTL");t&&(t.type=="hidden"||t.nodeType!=1||n.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return t=n(t).offset(),[t.left,t.top]},_triggerOnClose:function(n){var t=this._get(n,"onClose");t&&t.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n])},_hideDatepicker:function(t){var i=this._curInst,u,r;!i||t&&i!=n.data(t,"datepicker")||this._datepickerShowing&&(t=this._get(i,"showAnim"),u=this._get(i,"duration"),r=function(){n.datepicker._tidyDialog(i);this._curInst=null},n.effects&&n.effects[t]?i.dpDiv.hide(t,n.datepicker._get(i,"showOptions"),u,r):i.dpDiv[t=="slideDown"?"slideUp":t=="fadeIn"?"fadeOut":"hide"](t?u:null,r),t||r(),n.datepicker._triggerOnClose(i),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){n.datepicker._curInst&&(t=n(t.target),t[0].id==n.datepicker._mainDivId||t.parents("#"+n.datepicker._mainDivId).length!=0||t.hasClass(n.datepicker.markerClassName)||t.hasClass(n.datepicker._triggerClass)||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI||n.datepicker._hideDatepicker())},_adjustDate:function(t,i,r){t=n(t);var u=this._getInst(t[0]);this._isDisabledDatepicker(t[0])||(this._adjustInstDate(u,i+(r=="M"?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var i,r;t=n(t);i=this._getInst(t[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(t)},_selectMonthYear:function(t,i,r){t=n(t);var u=this._getInst(t[0]);u._selectingMonthYear=!1;u["selected"+(r=="M"?"Month":"Year")]=u["draw"+(r=="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(t)},_clickMonthYear:function(t){var i=this._getInst(n(t)[0]);i.input&&i._selectingMonthYear&&setTimeout(function(){i.input.focus()},0);i._selectingMonthYear=!i._selectingMonthYear},_selectDay:function(t,i,r,u){var f=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){t=n(t);this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(t,i){t=this._getInst(n(t)[0]);i=i!=null?i:this._formatDate(t);t.input&&t.input.val(i);this._updateAlternate(t);var r=this._get(t,"onSelect");r?r.apply(t.input?t.input[0]:null,[i,t]):t.input&&t.input.trigger("change");t.inline?this._updateDatepicker(t):(this._hideDatepicker(),this._lastInput=t.input[0],typeof t.input[0]!="object"&&t.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i=this._get(t,"altField");if(i){var r=this._get(t,"altFormat")||this._get(t,"dateFormat"),u=this._getDate(t),f=this.formatDate(r,u,this._getFormatConfig(t));n(i).each(function(){n(this).val(f)})}},noWeekends:function(n){return n=n.getDay(),[n>0&&n<6,""]},iso8601Week:function(n){n=new Date(n.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));var t=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,i,r){var e,u;if(t==null||i==null)throw"Invalid arguments";if(i=typeof i=="object"?i.toString():i+"",i=="")return null;e=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);for(var w=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,b=(r?r.dayNames:null)||this._defaults.dayNames,k=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,d=(r?r.monthNames:null)||this._defaults.monthNames,o=r=-1,s=-1,a=-1,v=!1,l=function(n){return(n=h+1<t.length&&t.charAt(h+1)==n)&&h++,n},c=function(n){var t=l(n);if(n=new RegExp("^\\d{1,"+(n=="@"?14:n=="!"?20:n=="y"&&t?4:n=="o"?3:2)+"}"),n=i.substring(f).match(n),!n)throw"Missing number at position "+f;return f+=n[0].length,parseInt(n[0],10)},p=function(t,r,u){t=n.map(l(t)?u:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});var e=-1;if(n.each(t,function(n,t){return n=t[1],i.substr(f,n.length).toLowerCase()==n.toLowerCase()?(e=t[0],f+=n.length,!1):void 0}),e!=-1)return e+1;throw"Unknown name at position "+f;},y=function(){if(i.charAt(f)!=t.charAt(h))throw"Unexpected literal at position "+f;f++},f=0,h=0;h<t.length;h++)if(v)t.charAt(h)!="'"||l("'")?y():v=!1;else switch(t.charAt(h)){case"d":s=c("d");break;case"D":p("D",w,b);break;case"o":a=c("o");break;case"m":o=c("m");break;case"M":o=p("M",k,d);break;case"y":r=c("y");break;case"@":u=new Date(c("@"));r=u.getFullYear();o=u.getMonth()+1;s=u.getDate();break;case"!":u=new Date((c("!")-this._ticksTo1970)/1e4);r=u.getFullYear();o=u.getMonth()+1;s=u.getDate();break;case"'":l("'")?y():v=!0;break;default:y()}if(f<i.length)throw"Extra/unparsed characters found in date: "+i.substring(f);if(r==-1?r=(new Date).getFullYear():r<100&&(r+=(new Date).getFullYear()-(new Date).getFullYear()%100+(r<=e?0:-100)),a>-1){o=1;s=a;do{if(e=this._getDaysInMonth(r,o-1),s<=e)break;o++;s-=e}while(1)}if(u=this._daylightSavingAdjust(new Date(r,o-1,s)),u.getFullYear()!=r||u.getMonth()+1!=o||u.getDate()!=s)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864e9,formatDate:function(n,t,i){var u;if(!t)return"";var h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort;i=(i?i.monthNames:null)||this._defaults.monthNames;var f=function(t){return(t=u+1<n.length&&n.charAt(u+1)==t)&&u++,t},e=function(n,t,i){if(t=""+t,f(n))for(;t.length<i;)t="0"+t;return t},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;u<n.length;u++)if(o)n.charAt(u)!="'"||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,i);break;case"y":r+=f("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=t.getTime()*1e4+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){return(i=t+1<n.length&&n.charAt(t+1)==i)&&t++,i},t=0;t<n.length;t++)if(r)n.charAt(t)!="'"||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,i){return n.settings[i]!==t?n.settings[i]:this._defaults[i]},_setDateFromField:function(n,t){var u,r,i,f,e;if(n.input.val()!=n.lastVal){u=this._get(n,"dateFormat");r=n.lastVal=n.input?n.input.val():null;i=f=this._getDefaultDate(n);e=this._getFormatConfig(n);try{i=this.parseDate(u,r,e)||f}catch(o){this.log(o);r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var u=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},f=function(i){var o,u;try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(s){}var r=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=r.getFullYear(),e=r.getMonth();for(r=r.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=o.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=parseInt(u[1],10)*7;break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=o.exec(i)}return new Date(f,e,r)};return(i=(i=i==null||i===""?r:typeof i=="string"?f(i):typeof i=="number"?isNaN(i)?r:u(i):new Date(i.getTime()))&&i.toString()=="Invalid Date"?r:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var r=!t,u=n.selectedMonth,f=n.selectedYear;t=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=t.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=t.getMonth();n.drawYear=n.selectedYear=n.currentYear=t.getFullYear();u==n.selectedMonth&&f==n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(r?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&n.input.val()==""?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_generateHTML:function(t){var p=new Date,e,o,h,ot,k,l,u,st,ht;p=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth(),p.getDate()));var v=this._get(t,"isRTL"),it=this._get(t,"showButtonPanel"),g=this._get(t,"hideIfNoPrevNext"),s=this._get(t,"navigationAsDateFormat"),y=this._getNumberOfMonths(t),r=this._get(t,"showCurrentAtPos"),c=this._get(t,"stepMonths"),rt=y[0]!=1||y[1]!=1,ut=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),b=this._getMinMaxDate(t,"min"),w=this._getMinMaxDate(t,"max");if(r=t.drawMonth-r,e=t.drawYear,r<0&&(r+=12,e--),w)for(o=this._daylightSavingAdjust(new Date(w.getFullYear(),w.getMonth()-y[0]*y[1]+1,w.getDate())),o=b&&o<b?b:o;this._daylightSavingAdjust(new Date(e,r,1))>o;)r--,r<0&&(r=11,e--);t.drawMonth=r;t.drawYear=e;o=this._get(t,"prevText");o=s?this.formatDate(o,this._daylightSavingAdjust(new Date(e,r-c,1)),this._getFormatConfig(t)):o;o=this._canAdjustMonth(t,-1,e,r)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+i+".datepicker._adjustDate('#"+t.id+"', -"+c+", 'M');\" title=\""+o+'"><span class="ui-icon ui-icon-circle-triangle-'+(v?"e":"w")+'">'+o+"<\/span><\/a>":g?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+o+'"><span class="ui-icon ui-icon-circle-triangle-'+(v?"e":"w")+'">'+o+"<\/span><\/a>";h=this._get(t,"nextText");h=s?this.formatDate(h,this._daylightSavingAdjust(new Date(e,r+c,1)),this._getFormatConfig(t)):h;g=this._canAdjustMonth(t,1,e,r)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+i+".datepicker._adjustDate('#"+t.id+"', +"+c+", 'M');\" title=\""+h+'"><span class="ui-icon ui-icon-circle-triangle-'+(v?"w":"e")+'">'+h+"<\/span><\/a>":g?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+h+'"><span class="ui-icon ui-icon-circle-triangle-'+(v?"w":"e")+'">'+h+"<\/span><\/a>";c=this._get(t,"currentText");h=this._get(t,"gotoCurrent")&&t.currentDay?ut:p;c=s?this.formatDate(c,h,this._getFormatConfig(t)):c;s=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+i+'.datepicker._hideDatepicker();">'+this._get(t,"closeText")+"<\/button>";it=it?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(v?s:"")+(this._isInRange(t,h)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+i+".datepicker._gotoToday('#"+t.id+"');\">"+c+"<\/button>":"")+(v?"":s)+"<\/div>":"";s=parseInt(this._get(t,"firstDay"),10);s=isNaN(s)?0:s;c=this._get(t,"showWeek");h=this._get(t,"dayNames");this._get(t,"dayNamesShort");var yt=this._get(t,"dayNamesMin"),pt=this._get(t,"monthNames"),wt=this._get(t,"monthNamesShort"),lt=this._get(t,"beforeShowDay"),ft=this._get(t,"showOtherMonths"),bt=this._get(t,"selectOtherMonths");this._get(t,"calculateWeek");for(var at=this._getDefaultDate(t),et="",nt=0;nt<y[0];nt++){for(ot="",this.maxRows=4,k=0;k<y[1];k++){var vt=this._daylightSavingAdjust(new Date(e,r,t.selectedDay)),f=" ui-corner-all",a="";if(rt){if(a+='<div class="ui-datepicker-group',y[1]>1)switch(k){case 0:a+=" ui-datepicker-group-first";f=" ui-corner-"+(v?"right":"left");break;case y[1]-1:a+=" ui-datepicker-group-last";f=" ui-corner-"+(v?"left":"right");break;default:a+=" ui-datepicker-group-middle";f=""}a+='">'}for(a+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+f+'">'+(/all|left/.test(f)&&nt==0?v?g:o:"")+(/all|right/.test(f)&&nt==0?v?o:g:"")+this._generateMonthYearHeader(t,r,e,b,w,nt>0||k>0,pt,wt)+'<\/div><table class="ui-datepicker-calendar"><thead><tr>',l=c?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"<\/th>":"",f=0;f<7;f++)u=(f+s)%7,l+="<th"+((f+s+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+h[u]+'">'+yt[u]+"<\/span><\/th>";for(a+=l+"<\/tr><\/thead><tbody>",l=this._getDaysInMonth(e,r),e==t.selectedYear&&r==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,l)),f=(this._getFirstDayOfMonth(e,r)-s+7)%7,l=Math.ceil((f+l)/7),this.maxRows=l=rt?this.maxRows>l?this.maxRows:l:l,u=this._daylightSavingAdjust(new Date(e,r,1-f)),st=0;st<l;st++){for(a+="<tr>",ht=c?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(u)+"<\/td>":"",f=0;f<7;f++){var tt=lt?lt.apply(t.input?t.input[0]:null,[u]):[!0,""],d=u.getMonth()!=r,ct=d&&!bt||!tt[0]||b&&u<b||w&&u>w;ht+='<td class="'+((f+s+6)%7>=5?" ui-datepicker-week-end":"")+(d?" ui-datepicker-other-month":"")+(u.getTime()==vt.getTime()&&r==t.selectedMonth&&t._keyEvent||at.getTime()==u.getTime()&&at.getTime()==vt.getTime()?" "+this._dayOverClass:"")+(ct?" "+this._unselectableClass+" ui-state-disabled":"")+(d&&!ft?"":" "+tt[1]+(u.getTime()==ut.getTime()?" "+this._currentClass:"")+(u.getTime()==p.getTime()?" ui-datepicker-today":""))+'"'+((!d||ft)&&tt[2]?' title="'+tt[2]+'"':"")+(ct?"":' onclick="DP_jQuery_'+i+".datepicker._selectDay('#"+t.id+"',"+u.getMonth()+","+u.getFullYear()+', this);return false;"')+">"+(d&&!ft?"&#xa0;":ct?'<span class="ui-state-default">'+u.getDate()+"<\/span>":'<a class="ui-state-default'+(u.getTime()==p.getTime()?" ui-state-highlight":"")+(u.getTime()==ut.getTime()?" ui-state-active":"")+(d?" ui-priority-secondary":"")+'" href="#">'+u.getDate()+"<\/a>")+"<\/td>";u.setDate(u.getDate()+1);u=this._daylightSavingAdjust(u)}a+=ht+"<\/tr>"}r++;r>11&&(r=0,e++);a+="<\/tbody><\/table>"+(rt?"<\/div>"+(y[0]>0&&k==y[1]-1?'<div class="ui-datepicker-row-break"><\/div>':""):"");ot+=a}et+=ot}return et+=it+(n.browser.msie&&parseInt(n.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"><\/iframe>':""),t._keyEvent=!1,et},_generateMonthYearHeader:function(n,t,r,u,f,e,o,s){var a=this._get(n,"changeMonth"),v=this._get(n,"changeYear"),p=this._get(n,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',l="",w,h,y;if(e||!a)l+='<span class="ui-datepicker-month">'+o[t]+"<\/span>";else{for(o=u&&u.getFullYear()==r,w=f&&f.getFullYear()==r,l+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+i+".datepicker._selectMonthYear('#"+n.id+"', this, 'M');\" onclick=\"DP_jQuery_"+i+".datepicker._clickMonthYear('#"+n.id+"');\">",h=0;h<12;h++)(!o||h>=u.getMonth())&&(!w||h<=f.getMonth())&&(l+='<option value="'+h+'"'+(h==t?' selected="selected"':"")+">"+s[h]+"<\/option>");l+="<\/select>"}if(p||(c+=l+(e||!(a&&v)?"&#xa0;":"")),!n.yearshtml)if(n.yearshtml="",e||!v)c+='<span class="ui-datepicker-year">'+r+"<\/span>";else{for(s=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),o=function(n){return n=n.match(/c[+-].*/)?r+parseInt(n.substring(1),10):n.match(/[+-].*/)?y+parseInt(n,10):parseInt(n,10),isNaN(n)?y:n},t=o(s[0]),s=Math.max(t,o(s[1]||"")),t=u?Math.max(t,u.getFullYear()):t,s=f?Math.min(s,f.getFullYear()):s,n.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+i+".datepicker._selectMonthYear('#"+n.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+i+".datepicker._clickMonthYear('#"+n.id+"');\">";t<=s;t++)n.yearshtml+='<option value="'+t+'"'+(t==r?' selected="selected"':"")+">"+t+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),p&&(c+=(e||!(a&&v)?"&#xa0;":"")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var r=n.drawYear+(i=="Y"?t:0),u=n.drawMonth+(i=="M"?t:0);t=Math.min(n.selectedDay,this._getDaysInMonth(r,u))+(i=="D"?t:0);r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(r,u,t)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();(i=="M"||i=="Y")&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min");return n=this._getMinMaxDate(n,"max"),t=i&&t<i?i:t,n&&t>n?n:t},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){return n=this._get(n,"numberOfMonths"),n==null?[1,1]:typeof n=="number"?[1,n]:n},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var u=this._getNumberOfMonths(n);return i=this._daylightSavingAdjust(new Date(i,r+(t<0?t:u[0]*u[1]),1)),t<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(n,i)},_isInRange:function(n,t){var i=this._getMinMaxDate(n,"min");return n=this._getMinMaxDate(n,"max"),(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){return t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear),t=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay)),this.formatDate(this._get(n,"dateFormat"),t,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick).find("body").append(n.datepicker.dpDiv),n.datepicker.initialized=!0);var i=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t=="isDisabled"||t=="getDate"||t=="widget")?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):t=="option"&&arguments.length==2&&typeof arguments[1]=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)})};n.datepicker=new f;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.8.14";window["DP_jQuery_"+i]=n}(jQuery),function(n,t){n.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();n.Widget.prototype.destroy.apply(this,arguments)},value:function(n){return n===t?this._value():(this._setOption("value",n),this)},_setOption:function(t,i){t==="value"&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));n.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var n=this.options.value;return typeof n!="number"&&(n=0),Math.min(this.options.max,Math.max(this.min,n))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var n=this.value(),t=this._percentage();this.oldValue!==n&&(this.oldValue=n,this._trigger("change"));this.valueDiv.toggle(n>this.min).toggleClass("ui-corner-right",n===this.options.max).width(t.toFixed(0)+"%");this.element.attr("aria-valuenow",n)}});n.extend(n.ui.progressbar,{version:"1.8.14"})}(jQuery);jQuery.effects||function(n,t){function u(t){var i;return t&&t.constructor==Array&&t.length==3?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(i[1])*2.55,parseFloat(i[2])*2.55,parseFloat(i[3])*2.55]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(t)?o.transparent:o[n.trim(t).toLowerCase()]}function h(t,i){var r;do{if(r=n.curCSS(t,i),r!=""&&r!="transparent"||n.nodeName(t,"body"))break;i="backgroundColor"}while(t=t.parentNode);return u(r)}function f(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={},t,u,r;if(n&&n.length&&n[0]&&n[n[0]])for(r=n.length;r--;)t=n[r],typeof n[t]=="string"&&(u=t.replace(/\-(\w)/g,function(n,t){return t.toUpperCase()}),i[u]=n[t]);else for(t in n)typeof n[t]=="string"&&(i[t]=n[t]);return i}function e(t){var i,r;for(i in t)r=t[i],(r==null||n.isFunction(r)||i in l||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(r)))&&delete t[i];return t}function c(n,t){var r={_:0};for(var i in t)n[i]!=t[i]&&(r[i]=t[i]);return r}function i(t,i,r,u){return typeof t=="object"&&(u=i,r=null,i=t,t=i.effect),n.isFunction(i)&&(u=i,r=null,i={}),(typeof i=="number"||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i=i||{},r=r||i.duration,r=n.fx.off?0:typeof r=="number"?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,u=u||i.complete,[t,i,r,u]}function r(t){return!t||typeof t=="number"||n.fx.speeds[t]?!0:typeof t=="string"&&!n.effects[t]?!0:!1}n.effects={};n.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,i){n.fx.step[i]=function(n){n.colorInit||(n.start=h(n.elem,i),n.end=u(n.end),n.colorInit=!0);n.elem.style[i]="rgb("+Math.max(Math.min(parseInt(n.pos*(n.end[0]-n.start[0])+n.start[0],10),255),0)+","+Math.max(Math.min(parseInt(n.pos*(n.end[1]-n.start[1])+n.start[1],10),255),0)+","+Math.max(Math.min(parseInt(n.pos*(n.end[2]-n.start[2])+n.start[2],10),255),0)+")"}});var o={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},s=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.effects.animateClass=function(t,i,r,u){return n.isFunction(r)&&(u=r,r=null),this.queue(function(){var o=n(this),h=o.attr("style")||" ",a=e(f.call(this)),l,v=o.attr("class");n.each(s,function(n,i){t[i]&&o[i+"Class"](t[i])});l=e(f.call(this));o.attr("class",v);o.animate(c(a,l),{queue:!1,duration:i,easing:r,complete:function(){n.each(s,function(n,i){t[i]&&o[i+"Class"](t[i])});typeof o.attr("style")=="object"?(o.attr("style").cssText="",o.attr("style").cssText=h):o.attr("style",h);u&&u.apply(this,arguments);n.dequeue(this)}})})};n.fn.extend({_addClass:n.fn.addClass,addClass:function(t,i,r,u){return i?n.effects.animateClass.apply(this,[{add:t},i,r,u]):this._addClass(t)},_removeClass:n.fn.removeClass,removeClass:function(t,i,r,u){return i?n.effects.animateClass.apply(this,[{remove:t},i,r,u]):this._removeClass(t)},_toggleClass:n.fn.toggleClass,toggleClass:function(i,r,u,f,e){return typeof r=="boolean"||r===t?u?n.effects.animateClass.apply(this,[r?{add:i}:{remove:i},u,f,e]):this._toggleClass(i,r):n.effects.animateClass.apply(this,[{toggle:i},r,u,f])},switchClass:function(t,i,r,u,f){return n.effects.animateClass.apply(this,[{add:i,remove:t},r,u,f])}});n.extend(n.effects,{version:"1.8.14",save:function(n,t){for(var i=0;i<t.length;i++)t[i]!==null&&n.data("ec.storage."+t[i],n[0].style[t[i]])},restore:function(n,t){for(var i=0;i<t.length;i++)t[i]!==null&&n.css(t[i],n.data("ec.storage."+t[i]))},setMode:function(n,t){return t=="toggle"&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=n[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},r=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return t.wrap(r),r=t.parent(),t.css("position")=="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(i).show()},removeWrapper:function(n){return n.parent().is(".ui-effects-wrapper")?n.parent().replaceWith(n):n},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){unit=t.cssUnit(i);unit[0]>0&&(u[i]=unit[0]*r+unit[1])}),u}});n.fn.extend({effect:function(t){var r=i.apply(this,arguments),u={options:r[1],duration:r[2],callback:r[3]},f;return(r=u.options.mode,f=n.effects[t],n.fx.off||!f)?r?this[r](u.duration,u.callback):this.each(function(){u.callback&&u.callback.call(this)}):f.call(this,u)},_show:n.fn.show,show:function(n){if(r(n))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:n.fn.hide,hide:function(n){if(r(n))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:n.fn.toggle,toggle:function(t){if(r(t)||typeof t=="boolean"||n.isFunction(t))return this.__toggle.apply(this,arguments);var u=i.apply(this,arguments);return u[1].mode="toggle",this.effect.apply(this,u)},cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}});n.easing.jswing=n.easing.swing;n.extend(n.easing,{def:"easeOutQuad",swing:function(t,i,r,u,f){return n.easing[n.easing.def](t,i,r,u,f)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,r,u){return r*(t/=u)*t*t*t+i},easeOutQuart:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,r,u){return r*(t/=u)*t*t*t*t+i},easeOutQuint:function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInExpo:function(n,t,i,r,u){return t==0?i:r*Math.pow(2,10*(t/u-1))+i},easeOutExpo:function(n,t,i,r,u){return t==u?i+r:r*(-Math.pow(2,-10*t/u)+1)+i},easeInOutExpo:function(n,t,i,r,u){return t==0?i:t==u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(n,t,i,r,u){return-r*(Math.sqrt(1-(t/=u)*t)-1)+i},easeOutCirc:function(n,t,i,r,u){return r*Math.sqrt(1-(t=t/u-1)*t)+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,r,u){n=1.70158;var f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,n=f/4):n=f/(2*Math.PI)*Math.asin(r/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t*u-n)*2*Math.PI/f))+i)},easeOutElastic:function(n,t,i,r,u){n=1.70158;var f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,n=f/4):n=f/(2*Math.PI)*Math.asin(r/e),e*Math.pow(2,-10*t)*Math.sin((t*u-n)*2*Math.PI/f)+r+i)},easeInOutElastic:function(n,t,i,r,u){n=1.70158;var f=0,e=r;return t==0?i:(t/=u/2)==2?i+r:(f||(f=u*.3*1.5),e<Math.abs(r)?(e=r,n=f/4):n=f/(2*Math.PI)*Math.asin(r/e),t<1)?-.5*e*Math.pow(2,10*(t-=1))*Math.sin((t*u-n)*2*Math.PI/f)+i:e*Math.pow(2,-10*(t-=1))*Math.sin((t*u-n)*2*Math.PI/f)*.5+r+i},easeInBack:function(n,i,r,u,f,e){return e==t&&(e=1.70158),u*(i/=f)*i*((e+1)*i-e)+r},easeOutBack:function(n,i,r,u,f,e){return e==t&&(e=1.70158),u*((i=i/f-1)*i*((e+1)*i+e)+1)+r},easeInOutBack:function(n,i,r,u,f,e){return(e==t&&(e=1.70158),(i/=f/2)<1)?u/2*i*i*(((e*=1.525)+1)*i-e)+r:u/2*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)+r},easeInBounce:function(t,i,r,u,f){return u-n.easing.easeOutBounce(t,f-i,0,u,f)+r},easeOutBounce:function(n,t,i,r,u){return(t/=u)<1/2.75?r*7.5625*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(t,i,r,u,f){return i<f/2?n.easing.easeInBounce(t,i*2,0,u,f)*.5+r:n.easing.easeOutBounce(t,i*2-f,0,u,f)*.5+u*.5+r}})}(jQuery),function(n){n.effects.bounce=function(t){return this.queue(function(){var i=n(this),l=["position","top","bottom","left","right"],o=n.effects.setMode(i,t.options.mode||"effect"),u=t.options.direction||"up",r=t.options.distance||20,a=t.options.times||5,s=t.duration||250,f,e,h,c;for(/show|hide/.test(o)&&l.push("opacity"),n.effects.save(i,l),i.show(),n.effects.createWrapper(i),f=u=="up"||u=="down"?"top":"left",u=u=="up"||u=="left"?"pos":"neg",r=t.options.distance||(f=="top"?i.outerHeight({margin:!0})/3:i.outerWidth({margin:!0})/3),o=="show"&&i.css("opacity",0).css(f,u=="pos"?-r:r),o=="hide"&&(r/=a*2),o!="hide"&&a--,o=="show"&&(e={opacity:1},e[f]=(u=="pos"?"+=":"-=")+r,i.animate(e,s/2,t.options.easing),r/=2,a--),e=0;e<a;e++)h={},c={},h[f]=(u=="pos"?"-=":"+=")+r,c[f]=(u=="pos"?"+=":"-=")+r,i.animate(h,s/2,t.options.easing).animate(c,s/2,t.options.easing),r=o=="hide"?r*2:r/2;o=="hide"?(e={opacity:0},e[f]=(u=="pos"?"-=":"+=")+r,i.animate(e,s/2,t.options.easing,function(){i.hide();n.effects.restore(i,l);n.effects.removeWrapper(i);t.callback&&t.callback.apply(this,arguments)})):(h={},c={},h[f]=(u=="pos"?"-=":"+=")+r,c[f]=(u=="pos"?"+=":"-=")+r,i.animate(h,s/2,t.options.easing).animate(c,s/2,t.options.easing,function(){n.effects.restore(i,l);n.effects.removeWrapper(i);t.callback&&t.callback.apply(this,arguments)}));i.queue("fx",function(){i.dequeue()});i.dequeue()})}}(jQuery),function(n){n.effects.drop=function(t){return this.queue(function(){var i=n(this),s=["position","top","bottom","left","right","opacity"],u=n.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"left",f,e,o;n.effects.save(i,s);i.show();n.effects.createWrapper(i);f=r=="up"||r=="down"?"top":"left";r=r=="up"||r=="left"?"pos":"neg";e=t.options.distance||(f=="top"?i.outerHeight({margin:!0})/2:i.outerWidth({margin:!0})/2);u=="show"&&i.css("opacity",0).css(f,r=="pos"?-e:e);o={opacity:u=="show"?1:0};o[f]=(u=="show"?r=="pos"?"+=":"-=":r=="pos"?"-=":"+=")+e;i.animate(o,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){u=="hide"&&i.hide();n.effects.restore(i,s);n.effects.removeWrapper(i);t.callback&&t.callback.apply(this,arguments);i.dequeue()}})})}}(jQuery),function(n){n.effects.fade=function(t){return this.queue(function(){var i=n(this),r=n.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments);i.dequeue()}})})}}(jQuery),function(n){n.effects.highlight=function(t){return this.queue(function(){var i=n(this),u=["backgroundImage","backgroundColor","opacity"],r=n.effects.setMode(i,t.options.mode||"show"),f={backgroundColor:i.css("backgroundColor")};r=="hide"&&(f.opacity=0);n.effects.save(i,u);i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(f,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){r=="hide"&&i.hide();n.effects.restore(i,u);r!="show"||n.support.opacity||this.style.removeAttribute("filter");t.callback&&t.callback.apply(this,arguments);i.dequeue()}})})}}(jQuery),function(n){n.effects.pulsate=function(t){return this.queue(function(){var i=n(this),r=n.effects.setMode(i,t.options.mode||"show");for(times=(t.options.times||5)*2-1,duration=t.duration?t.duration/2:n.fx.speeds._default/2,isVisible=i.is(":visible"),animateTo=0,isVisible||(i.css("opacity",0).show(),animateTo=1),(r=="hide"&&isVisible||r=="show"&&!isVisible)&&times--,r=0;r<times;r++)i.animate({opacity:animateTo},duration,t.options.easing),animateTo=(animateTo+1)%2;i.animate({opacity:animateTo},duration,t.options.easing,function(){animateTo==0&&i.hide();t.callback&&t.callback.apply(this,arguments)});i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(n){n.effects.puff=function(t){return this.queue(function(){var i=n(this),r=n.effects.setMode(i,t.options.mode||"hide"),f=parseInt(t.options.percent,10)||150,e=f/100,u={height:i.height(),width:i.width()};n.extend(t.options,{fade:!0,mode:r,percent:r=="hide"?f:100,from:r=="hide"?u:{height:u.height*e,width:u.width*e}});i.effect("scale",t.options,t.duration,t.callback);i.dequeue()})};n.effects.scale=function(t){return this.queue(function(){var i=n(this),r=n.extend(!0,{},t.options),u=n.effects.setMode(i,t.options.mode||"effect"),f=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:u=="hide"?0:100),o=t.options.direction||"both",e=t.options.origin;u!="effect"&&(r.origin=e||["middle","center"],r.restore=!0);e={height:i.height(),width:i.width()};i.from=t.options.from||(u=="show"?{height:0,width:0}:e);f={y:o!="horizontal"?f/100:1,x:o!="vertical"?f/100:1};i.to={height:e.height*f.y,width:e.width*f.x};t.options.fade&&(u=="show"&&(i.from.opacity=0,i.to.opacity=1),u=="hide"&&(i.from.opacity=1,i.to.opacity=0));r.from=i.from;r.to=i.to;r.mode=u;i.effect("size",r,t.duration,t.callback);i.dequeue()})};n.effects.size=function(t){return this.queue(function(){var i=n(this),f=["position","top","bottom","left","right","width","height","overflow","opacity"],v=["position","top","bottom","left","right","overflow","opacity"],a=["width","height","overflow"],c=["fontSize"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],y=n.effects.setMode(i,t.options.mode||"effect"),l=t.options.restore||!1,h=t.options.scale||"both",s=t.options.origin,u={height:i.height(),width:i.width()},r;i.from=t.options.from||u;i.to=t.options.to||u;s&&(s=n.effects.getBaseline(s,u),i.from.top=(u.height-i.from.height)*s.y,i.from.left=(u.width-i.from.width)*s.x,i.to.top=(u.height-i.to.height)*s.y,i.to.left=(u.width-i.to.width)*s.x);r={from:{y:i.from.height/u.height,x:i.from.width/u.width},to:{y:i.to.height/u.height,x:i.to.width/u.width}};(h=="box"||h=="both")&&(r.from.y!=r.to.y&&(f=f.concat(e),i.from=n.effects.setTransition(i,e,r.from.y,i.from),i.to=n.effects.setTransition(i,e,r.to.y,i.to)),r.from.x!=r.to.x&&(f=f.concat(o),i.from=n.effects.setTransition(i,o,r.from.x,i.from),i.to=n.effects.setTransition(i,o,r.to.x,i.to)));(h=="content"||h=="both")&&r.from.y!=r.to.y&&(f=f.concat(c),i.from=n.effects.setTransition(i,c,r.from.y,i.from),i.to=n.effects.setTransition(i,c,r.to.y,i.to));n.effects.save(i,l?f:v);i.show();n.effects.createWrapper(i);i.css("overflow","hidden").css(i.from);(h=="content"||h=="both")&&(e=e.concat(["marginTop","marginBottom"]).concat(c),o=o.concat(["marginLeft","marginRight"]),a=f.concat(e).concat(o),i.find("*[width]").each(function(){child=n(this);l&&n.effects.save(child,a);var i={height:child.height(),width:child.width()};child.from={height:i.height*r.from.y,width:i.width*r.from.x};child.to={height:i.height*r.to.y,width:i.width*r.to.x};r.from.y!=r.to.y&&(child.from=n.effects.setTransition(child,e,r.from.y,child.from),child.to=n.effects.setTransition(child,e,r.to.y,child.to));r.from.x!=r.to.x&&(child.from=n.effects.setTransition(child,o,r.from.x,child.from),child.to=n.effects.setTransition(child,o,r.to.x,child.to));child.css(child.from);child.animate(child.to,t.duration,t.options.easing,function(){l&&n.effects.restore(child,a)})}));i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i.to.opacity===0&&i.css("opacity",i.from.opacity);y=="hide"&&i.hide();n.effects.restore(i,l?f:v);n.effects.removeWrapper(i);t.callback&&t.callback.apply(this,arguments);i.dequeue()}})})}}(jQuery),function(n){n.effects.shake=function(t){return this.queue(function(){var i=n(this),c=["position","top","bottom","left","right"],e,o,s,h;n.effects.setMode(i,t.options.mode||"effect");var r=t.options.direction||"left",u=t.options.distance||20,l=t.options.times||3,f=t.duration||t.options.duration||140;for(n.effects.save(i,c),i.show(),n.effects.createWrapper(i),e=r=="up"||r=="down"?"top":"left",o=r=="up"||r=="left"?"pos":"neg",r={},s={},h={},r[e]=(o=="pos"?"-=":"+=")+u,s[e]=(o=="pos"?"+=":"-=")+u*2,h[e]=(o=="pos"?"-=":"+=")+u*2,i.animate(r,f,t.options.easing),u=1;u<l;u++)i.animate(s,f,t.options.easing).animate(h,f,t.options.easing);i.animate(s,f,t.options.easing).animate(r,f/2,t.options.easing,function(){n.effects.restore(i,c);n.effects.removeWrapper(i);t.callback&&t.callback.apply(this,arguments)});i.queue("fx",function(){i.dequeue()});i.dequeue()})}}(jQuery),function(n){n.effects.slide=function(t){return this.queue(function(){var i=n(this),s=["position","top","bottom","left","right"],e=n.effects.setMode(i,t.options.mode||"show"),r=t.options.direction||"left",f,u,o;n.effects.save(i,s);i.show();n.effects.createWrapper(i).css({overflow:"hidden"});f=r=="up"||r=="down"?"top":"left";r=r=="up"||r=="left"?"pos":"neg";u=t.options.distance||(f=="top"?i.outerHeight({margin:!0}):i.outerWidth({margin:!0}));e=="show"&&i.css(f,r=="pos"?isNaN(u)?"-"+u:-u:u);o={};o[f]=(e=="show"?r=="pos"?"+=":"-=":r=="pos"?"-=":"+=")+u;i.animate(o,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){e=="hide"&&i.hide();n.effects.restore(i,s);n.effects.removeWrapper(i);t.callback&&t.callback.apply(this,arguments);i.dequeue()}})})}}(jQuery),function(n){n.effects.transfer=function(t){return this.queue(function(){var i=n(this),r=n(t.options.to),u=r.offset(),f;r={top:u.top,left:u.left,height:r.innerHeight(),width:r.innerWidth()};u=i.offset();f=n('<div class="ui-effects-transfer"><\/div>').appendTo(document.body).addClass(t.options.className).css({top:u.top,left:u.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(r,t.duration,t.options.easing,function(){f.remove();t.callback&&t.callback.apply(i[0],arguments);i.dequeue()})})}}(jQuery),function(n){n.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options,r,u;t.running=0;t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||n(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||n(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||n(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||n(this).removeClass("ui-state-focus")});t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");i.navigation&&(r=t.element.find("a").filter(i.navigationFilter).eq(0),r.length&&(u=r.closest(".ui-accordion-header"),t.active=u.length?u:r.closest(".ui-accordion-content").prev()));t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");t.active.next().addClass("ui-accordion-content-active");t._createIcons();t.resize();t.element.attr("role","tablist");t.headers.attr("role","tab").bind("keydown.accordion",function(n){return t._keydown(n)}).next().attr("role","tabpanel");t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0);n.browser.safari||t.headers.find("a").attr("tabIndex",-1);i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(n){t._clickHandler.call(t,n,this);n.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(n("<span><\/span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options,i;return this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons(),i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled"),(t.autoHeight||t.fillHeight)&&i.css("height",""),n.Widget.prototype.destroy.call(this)},_setOption:function(t,i){n.Widget.prototype._setOption.apply(this,arguments);t=="active"&&this.activate(i);t=="icons"&&(this._destroyIcons(),i&&this._createIcons());t=="disabled"&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target);t.preventDefault()}return r?(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),r.focus(),!1):!0}},resize:function(){var i=this.options,t,r;return i.fillSpace?(n.browser.msie&&(r=this.element.parent().css("overflow"),this.element.parent().css("overflow","hidden")),t=this.element.parent().height(),n.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).height("").height())}).height(t)),this},activate:function(n){return this.options.active=n,n=this._findActive(n)[0],this._clickHandler({target:n},n),this},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?n([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var r=this.options,o,s;if(!r.disabled)if(t.target)t=n(t.currentTarget||i),i=t[0]===this.active[0],r.active=r.collapsible&&i?!1:this.headers.index(t),this.running||!r.collapsible&&i||(o=this.active,f=t.next(),u=this.active.next(),e={options:r,newHeader:i&&r.collapsible?n([]):t,oldHeader:this.active,newContent:i&&r.collapsible?n([]):f,oldContent:u},s=this.headers.index(this.active[0])>this.headers.index(t[0]),this.active=i?n([]):t,this._toggle(f,u,e,i,s),o.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),i||(t.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),t.next().addClass("ui-accordion-content-active")));else if(r.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header);this.active.next().addClass("ui-accordion-content-active");var u=this.active.next(),e={options:r,newHeader:n([]),oldHeader:r.active,newContent:n([]),oldContent:u},f=this.active=n([]);this._toggle(f,u,e)}},_toggle:function(t,i,r,u,f){var o=this,e=o.options,h,c,s;o.toShow=t;o.toHide=i;o.data=r;h=function(){if(o)return o._completed.apply(o,arguments)};o._trigger("changestart",null,o.data);o.running=i.size()===0?t.size():i.size();e.animated?(r={},r=e.collapsible&&u?{toShow:n([]),toHide:i,complete:h,down:f,autoHeight:e.autoHeight||e.fillSpace}:{toShow:t,toHide:i,complete:h,down:f,autoHeight:e.autoHeight||e.fillSpace},e.proxied||(e.proxied=e.animated),e.proxiedDuration||(e.proxiedDuration=e.duration),e.animated=n.isFunction(e.proxied)?e.proxied(r):e.proxied,e.duration=n.isFunction(e.proxiedDuration)?e.proxiedDuration(r):e.proxiedDuration,u=n.ui.accordion.animations,c=e.duration,s=e.animated,!s||u[s]||n.easing[s]||(s="slide"),u[s]||(u[s]=function(n){this.slide(n,{easing:s,duration:c||700})}),u[s](r)):(e.collapsible&&u?t.toggle():(i.hide(),t.show()),h(!0));i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur();t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(n){this.running=n?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}});n.extend(n.ui.accordion,{version:"1.8.16",animations:{slide:function(t,i){if(t=n.extend({easing:"swing",duration:300},t,i),t.toHide.size())if(t.toShow.size()){var o=t.toShow.css("overflow"),u=0,r={},f={},e;i=t.toShow;e=i[0].style.width;i.width(parseInt(i.parent().width(),10)-parseInt(i.css("paddingLeft"),10)-parseInt(i.css("paddingRight"),10)-(parseInt(i.css("borderLeftWidth"),10)||0)-(parseInt(i.css("borderRightWidth"),10)||0));n.each(["height","paddingTop","paddingBottom"],function(i,u){f[u]="hide";i=(""+n.css(t.toShow[0],u)).match(/^([\d+-.]+)(.*)$/);r[u]={value:i[1],unit:i[2]||"px"}});t.toShow.css({height:0,overflow:"hidden"}).show();t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(f,{step:function(n,i){i.prop=="height"&&(u=i.end-i.start==0?0:(i.now-i.start)/(i.end-i.start));t.toShow[0].style[i.prop]=u*r[i.prop].value+r[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height","");t.toShow.css({width:e,overflow:o});t.complete()}})}else t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);else t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t)},bounceslide:function(n){this.slide(n,{easing:n.down?"easeOutBounce":"swing",duration:n.down?1e3:200})}}})}(jQuery),function(n){n.jGrowl=function(t,i){n("#jGrowl").size()==0&&n('<div id="jGrowl"><\/div>').addClass(i&&i.position?i.position:n.jGrowl.defaults.position).appendTo("body");n("#jGrowl").jGrowl(t,i)};n.fn.jGrowl=function(t,i){if(n.isFunction(this.each)){var r=arguments;return this.each(function(){var u=this;n(this).data("jGrowl.instance")==undefined&&(n(this).data("jGrowl.instance",n.extend(new n.fn.jGrowl,{notifications:[],element:null,interval:null})),n(this).data("jGrowl.instance").startup(this));n.isFunction(n(this).data("jGrowl.instance")[t])?n(this).data("jGrowl.instance")[t].apply(n(this).data("jGrowl.instance"),n.makeArray(r).slice(1)):n(this).data("jGrowl.instance").create(t,i)})}};n.extend(n.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"bottom-left",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]<\/div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,i){var i=n.extend({},this.defaults,i);typeof i.speed!="undefined"&&(i.openDuration=i.speed,i.closeDuration=i.speed);this.notifications.push({message:t,options:i});i.log.apply(this.element,[this.element,t,i])},render:function(t){var r=this,u=t.message,i=t.options,t=n('<div class="jGrowl-notification '+i.themeState+" ui-corner-all"+(i.group!=undefined&&i.group!=""?" "+i.group:"")+'"><div class="jGrowl-close">'+i.closeTemplate+'<\/div><div class="jGrowl-header">'+i.header+'<\/div><div class="jGrowl-message">'+u+"<\/div><\/div>").data("jGrowl",i).addClass(i.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){n(this).parent().trigger("jGrowl.close")}).parent();if(Modernizr.touch)t.on("click",function(){t.trigger("jGrowl.close")});n(t).bind("mouseover.jGrowl",function(){n("div.jGrowl-notification",r.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){n("div.jGrowl-notification",r.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){i.beforeOpen.apply(t,[t,u,i,r.element])!=!1&&n(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){i.open.apply(t,[t,u,i,r.element])!=!1&&(i.glue=="after"?n("div.jGrowl-notification:last",r.element).after(t):n("div.jGrowl-notification:first",r.element).before(t),n(this).animate(i.animateOpen,i.openDuration,i.easing,function(){n.browser.msie&&(parseInt(n(this).css("opacity"),10)===1||parseInt(n(this).css("opacity"),10)===0)&&this.style.removeAttribute("filter");n(this).data("jGrowl").created=new Date;n(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){i.afterOpen.apply(t,[t,u,i,r.element])}).bind("jGrowl.beforeClose",function(){i.beforeClose.apply(t,[t,u,i,r.element])!=!1&&n(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){n(this).data("jGrowl.pause",!0);n(this).animate(i.animateClose,i.closeDuration,i.easing,function(){n(this).remove();var f=i.close.apply(t,[t,u,i,r.element]);n.isFunction(f)&&f.apply(t,[t,u,i,r.element])})}).trigger("jGrowl.beforeOpen");i.corners!=""&&n.fn.corner!=undefined&&n(t).corner(i.corners);n("div.jGrowl-notification:parent",r.element).size()>1&&n("div.jGrowl-closer",r.element).size()==0&&this.defaults.closer!=!1&&n(this.defaults.closerTemplate).addClass("jGrowl-closer ui-state-highlight ui-corner-all").addClass(this.defaults.theme).appendTo(r.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){n(this).siblings().trigger("jGrowl.beforeClose");n.isFunction(r.defaults.closer)&&r.defaults.closer.apply(n(this).parent()[0],[n(this).parent()[0]])})},update:function(){n(this.element).find("div.jGrowl-notification:parent").each(function(){n(this).data("jGrowl")!=undefined&&n(this).data("jGrowl").created!=undefined&&n(this).data("jGrowl").created.getTime()+parseInt(n(this).data("jGrowl").life)<(new Date).getTime()&&n(this).data("jGrowl").sticky!=!0&&(n(this).data("jGrowl.pause")==undefined||n(this).data("jGrowl.pause")!=!0)&&n(this).trigger("jGrowl.beforeClose")});this.notifications.length>0&&(this.defaults.pool==0||n(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift());n(this.element).find("div.jGrowl-notification:parent").size()<2&&n(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){n(this).remove()})},startup:function(t){this.element=n(t).addClass("jGrowl").append('<div class="jGrowl-notification"><\/div>');this.interval=setInterval(function(){n(t).data("jGrowl.instance").update()},parseInt(this.defaults.check));n.browser.msie&&parseInt(n.browser.version)<7&&!window.XMLHttpRequest&&n(this.element).addClass("ie6")},shutdown:function(){n(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){n(this.element).find("div.jGrowl-notification").each(function(){n(this).trigger("jGrowl.beforeClose")})}});n.jGrowl.defaults=n.fn.jGrowl.prototype.defaults}(jQuery),function(n){n.Jcrop=function(t,i){function h(n){return n+"px"}function ft(n){return r.baseClass+"-"+n}function wi(){return n.fx.step.hasOwnProperty("backgroundColor")}function vt(t){var i=n(t).offset();return[i.left,i.top]}function et(n){return[n.pageX-nt[0],n.pageY-nt[1]]}function ti(t){typeof t!="object"&&(t={});r=n.extend(r,t);n.each(["onChange","onSelect","onRelease","onDblClick"],function(n,t){typeof r[t]!="function"&&(r[t]=function(){})})}function ii(n,t){if(nt=vt(e),p.setCursor(n==="move"?n:n+"-resize"),n==="move")return p.activateHandlers(ki(t),bt);var r=s.getFixed(),i=ri(n),u=s.getCorner(ri(i));s.setPressed(s.getCorner(i));s.setCurrent(u);p.activateHandlers(bi(n,r),bt)}function bi(n,t){return function(i){if(r.aspectRatio)switch(n){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(n){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}s.setCurrent(i);u.update()}}function ki(n){var t=n;return dt.watchKeys(),function(n){s.moveOffset([n[0]-t[0],n[1]-t[1]]);t=n;u.update()}}function ri(n){switch(n){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function ui(n){return function(t){return r.disabled?!1:n==="move"&&!r.allowMove?!1:(nt=vt(e),ut=!0,ii(n,et(t)),t.stopPropagation(),t.preventDefault(),!1)}}function fi(n,t,i){var r=n.width(),u=n.height();r>t&&t>0&&(r=t,u=t/n.width()*n.height());u>i&&i>0&&(u=i,r=i/n.height()*n.width());l=n.width()/r;a=n.height()/u;n.width(r).height(u)}function ot(n){return{x:n.x*l,y:n.y*a,x2:n.x2*l,y2:n.y2*a,w:n.w*l,h:n.h*a}}function bt(){var n=s.getFixed();n.w>r.minSelect[0]&&n.h>r.minSelect[1]?(u.enableHandles(),u.done()):u.release();p.setCursor(r.allowSelect?"crosshair":"default")}function ei(n){if(r.disabled||!r.allowSelect)return!1;ut=!0;nt=vt(e);u.disableHandles();p.setCursor("crosshair");var t=et(n);return s.setPressed(t),u.update(),p.activateHandlers(di,bt),dt.watchKeys(),n.stopPropagation(),n.preventDefault(),!1}function di(n){s.setCurrent(n);u.update()}function oi(){var t=n("<div><\/div>").addClass(ft("tracker"));return n.browser.msie&&t.css({opacity:0,backgroundColor:"white"}),t}function gi(n){w.removeClass().addClass(ft("holder")).addClass(n)}function nr(n,t){function w(){window.setTimeout(b,g)}var k=n[0]/l,d=n[1]/a,c=n[2]/l,p=n[3]/a,b;if(!ci){var o=s.flipCoords(k,d,c,p),h=s.getFixed(),e=[h.x,h.y,h.x2,h.y2],i=e,g=r.animationDelay,nt=o[0]-e[0],tt=o[1]-e[1],it=o[2]-e[2],rt=o[3]-e[3],f=0,ut=r.swingSpeed;x=i[0];y=i[1];c=i[2];p=i[3];u.animMode(!0);b=function(){return function(){f+=(100-f)/ut;i[0]=x+f/100*nt;i[1]=y+f/100*tt;i[2]=c+f/100*it;i[3]=p+f/100*rt;f>=99.8&&(f=100);f<100?(vi(i),w()):(u.done(),typeof t=="function"&&t.call(v))}}();w()}}function ai(n){vi([n[0]/l,n[1]/a,n[2]/l,n[3]/a]);r.onSelect.call(v,ot(s.getFixed()));u.enableHandles()}function vi(n){s.setPressed([n[0],n[1]]);s.setCurrent([n[2],n[3]]);u.update()}function tr(){return ot(s.getFixed())}function ir(){return s.getFixed()}function rr(n){ti(n);ni()}function yi(){r.disabled=!0;u.disableHandles();u.setCursor("default");p.setCursor("default")}function pi(){r.disabled=!1;ni()}function ur(){u.done();p.activateHandlers(null,null)}function fr(){w.remove();c.show();n(t).removeData("Jcrop")}function er(n,t){u.release();yi();var i=new Image;i.onload=function(){var u=i.width,s=i.height,h=r.boxWidth,c=r.boxHeight;e.width(u).height(s);e.attr("src",n);b.attr("src",n);fi(e,h,c);o=e.width();f=e.height();b.width(o).height(f);k.width(o+rt*2).height(f+rt*2);w.width(o).height(f);g.resize(o,f);pi();typeof t=="function"&&t.call(v)};i.src=n}function gt(n,t,i){var u=t||r.bgColor;r.bgFade&&wi()&&r.fadeTime&&!i?n.animate({backgroundColor:u},{queue:!1,duration:r.fadeTime}):n.css("backgroundColor",u)}function ni(n){r.allowResize?n?u.enableOnly():u.enableHandles():u.disableHandles();p.setCursor(r.allowSelect?"crosshair":"default");u.setCursor(r.allowMove?"move":"default");r.hasOwnProperty("trueSize")&&(l=r.trueSize[0]/o,a=r.trueSize[1]/f);r.hasOwnProperty("setSelect")&&(ai(r.setSelect),u.done(),delete r.setSelect);g.refresh();r.bgColor!=hi&&(gt(r.shade?g.getShades():w,r.shade?r.shadeColor||r.bgColor:r.bgColor),hi=r.bgColor);st!=r.bgOpacity&&(st=r.bgOpacity,r.shade?g.refresh():u.setBgOpacity(st));ht=r.maxSize[0]||0;ct=r.maxSize[1]||0;lt=r.minSize[0]||0;at=r.minSize[1]||0;r.hasOwnProperty("outerImage")&&(e.attr("src",r.outerImage),delete r.outerImage);u.refresh()}var r=n.extend({},n.Jcrop.defaults),nt,wt=!1,yt,e,v;n.browser.msie&&n.browser.version.split(".")[0]==="6"&&(wt=!0);typeof t!="object"&&(t=n(t)[0]);typeof i!="object"&&(i={});ti(i);var kt={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},c=n(t),si=!0;t.tagName=="IMG"?(c[0].width!=0&&c[0].height!=0?(c.width(c[0].width),c.height(c[0].height)):(yt=new Image,yt.src=c[0].src,c.width(yt.width),c.height(yt.height)),e=c.clone().removeAttr("id").css(kt).show(),e.width(c.width()),e.height(c.height()),c.after(e).hide()):(e=c.css(kt).show(),si=!1,r.shade===null&&(r.shade=!0));fi(e,r.boxWidth,r.boxHeight);var o=e.width(),f=e.height(),w=n("<div />").width(o).height(f).addClass(ft("holder")).css({position:"relative",backgroundColor:r.bgColor}).insertAfter(c).append(e);r.addClass&&w.addClass(r.addClass);var b=n("<div />"),pt=n("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),tt=n("<div />").width("100%").height("100%").css("zIndex",320),it=n("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var n=s.getFixed();r.onDblClick.call(v,n)}).insertBefore(e).append(pt,tt);si&&(b=n("<img />").attr("src",e.attr("src")).css(kt).width(o).height(f),pt.append(b));wt&&it.css({overflowY:"hidden"});var rt=r.boundary,k=oi().width(o+rt*2).height(f+rt*2).css({position:"absolute",top:h(-rt),left:h(-rt),zIndex:290}).mousedown(ei),hi=r.bgColor,st=r.bgOpacity,ht,ct,lt,at,l,a,ut,ci,li;nt=vt(e);var d=function(){function n(){var i={},u=["touchstart","touchmove","touchend"],f=document.createElement("div"),t,n,r;try{for(t=0;t<u.length;t++)n=u[t],n="on"+n,r=n in f,r||(f.setAttribute(n,"return;"),r=typeof f[n]=="function"),i[u[t]]=r;return i.touchstart&&i.touchend&&i.touchmove}catch(e){return!1}}function t(){return r.touchSupport===!0||r.touchSupport===!1?r.touchSupport:n()}return{createDragger:function(n){return function(t){return(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,r.disabled)?!1:n==="move"&&!r.allowMove?!1:(ut=!0,ii(n,et(t)),t.stopPropagation(),t.preventDefault(),!1)}},newSelection:function(n){return n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,ei(n)},isSupported:n,support:t()}}(),s=function(){function p(r){r=v(r);u=n=r[0];i=t=r[1]}function w(n){n=v(n);s=n[0]-u;h=n[1]-i;u=n[0];i=n[1]}function b(){return[s,h]}function k(r){var e=r[0],s=r[1];0>n+e&&(e-=e+n);0>t+s&&(s-=s+t);f<i+s&&(s+=f-(i+s));o<u+e&&(e+=o-(u+e));n+=e;u+=e;t+=s;i+=s}function d(n){var t=c();switch(n){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function c(){if(!r.aspectRatio)return g();var c=r.aspectRatio,b=r.minSize[0]/l,w=r.maxSize[0]/l,nt=r.maxSize[1]/a,k=u-n,d=i-t,tt=Math.abs(k),it=Math.abs(d),rt=tt/it,s,h,v,p;return w===0&&(w=o*10),nt===0&&(nt=f*10),rt<c?(h=i,v=it*c,s=k<0?n-v:v+n,s<0?(s=0,p=Math.abs((s-n)/c),h=d<0?t-p:p+t):s>o&&(s=o,p=Math.abs((s-n)/c),h=d<0?t-p:p+t)):(s=u,p=tt/c,h=d<0?t-p:t+p,h<0?(h=0,v=Math.abs((h-t)*c),s=k<0?n-v:v+n):h>f&&(h=f,v=Math.abs(h-t)*c,s=k<0?n-v:v+n)),s>n?(s-n<b?s=n+b:s-n>w&&(s=n+w),h=h>t?t+(s-n)/c:t-(s-n)/c):s<n&&(n-s<b?s=n-b:n-s>w&&(s=n-w),h=h>t?t+(n-s)/c:t-(n-s)/c),s<0?(n-=s,s=0):s>o&&(n-=s-o,s=o),h<0?(t-=h,h=0):h>f&&(t-=h-f,h=f),y(e(n,t,s,h))}function v(n){return n[0]<0&&(n[0]=0),n[1]<0&&(n[1]=0),n[0]>o&&(n[0]=o),n[1]>f&&(n[1]=f),[n[0],n[1]]}function e(n,t,i,r){var u=n,f=i,e=t,o=r;return i<n&&(u=i,f=n),r<t&&(e=r,o=t),[u,e,f,o]}function g(){var s=u-n,h=i-t,r;return ht&&Math.abs(s)>ht&&(u=s>0?n+ht:n-ht),ct&&Math.abs(h)>ct&&(i=h>0?t+ct:t-ct),at/a&&Math.abs(h)<at/a&&(i=h>0?t+at/a:t-at/a),lt/l&&Math.abs(s)<lt/l&&(u=s>0?n+lt/l:n-lt/l),n<0&&(u-=n,n-=n),t<0&&(i-=t,t-=t),u<0&&(n-=u,u-=u),i<0&&(t-=i,i-=i),u>o&&(r=u-o,n-=r,u-=r),i>f&&(r=i-f,t-=r,i-=r),n>o&&(r=n-f,i-=r,t-=r),t>f&&(r=t-f,i-=r,t-=r),y(e(n,t,u,i))}function y(n){return{x:n[0],y:n[1],x2:n[2],y2:n[3],w:n[2]-n[0],h:n[3]-n[1]}}var n=0,t=0,u=0,i=0,s,h;return{flipCoords:e,setPressed:p,setCurrent:w,getOffset:b,moveOffset:k,getCorner:d,getFixed:c}}(),g=function(){function nt(n,t){i.left.css({height:h(t)});i.right.css({height:h(t)})}function v(){return y(s.getFixed())}function y(n){i.top.css({left:h(n.x),width:h(n.w),height:h(n.y)});i.bottom.css({top:h(n.y2),left:h(n.x),width:h(n.w),height:h(f-n.y2)});i.right.css({left:h(n.x2),width:h(o-n.x2)});i.left.css({width:h(n.x)})}function l(){return n("<div />").css({position:"absolute",backgroundColor:r.shadeColor||r.bgColor}).appendTo(t)}function p(){c||(c=!0,t.insertBefore(e),v(),u.setBgOpacity(1,0,1),b.hide(),k(r.shadeColor||r.bgColor,1),u.isAwake()?a(r.bgOpacity,1):a(1,1))}function k(n,t){gt(g(),n,t)}function d(){c&&(t.remove(),b.show(),c=!1,u.isAwake()?u.setBgOpacity(r.bgOpacity,1,1):(u.setBgOpacity(1,1,1),u.disableHandles()),gt(w,0,1))}function a(n,i){c&&(r.bgFade&&!i?t.animate({opacity:1-n},{queue:!1,duration:r.fadeTime}):t.css({opacity:1-n}))}function tt(){r.shade?p():d();u.isAwake()&&a(r.bgOpacity)}function g(){return t.children()}var c=!1,t=n("<div />").css({position:"absolute",zIndex:240,opacity:0}),i={top:l(),left:l().height(f),right:l().height(f),bottom:l()};return{update:v,updateRaw:y,getShades:g,setBgColor:k,enable:p,disable:d,resize:nt,refresh:tt,opacity:a}}(),u=function(){function et(t){var i=n("<div />").css({position:"absolute",opacity:r.borderOpacity}).addClass(ft(t));return pt.append(i),i}function l(t,i){var r=n("<div />").mousedown(ui(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return d.support&&r.bind("touchstart.jcrop",d.createDragger(t)),tt.append(r),r}function ht(n){var t=r.handleSize;return l(n,c++).css({opacity:r.handleOpacity}).width(t).height(t).addClass(ft("handle"))}function ct(n){return l(n,c++).addClass("jcrop-dragbar")}function lt(n){for(var t=0;t<n.length;t++)ut[n[t]]=ct(n[t])}function at(n){for(var t,i=0;i<n.length;i++){switch(n[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}nt[n[i]]=et(t)}}function vt(n){for(var t=0;t<n.length;t++)rt[n[t]]=ht(n[t])}function yt(n,t){r.shade||b.css({top:h(-t),left:h(-n)});it.css({top:h(t),left:h(n)})}function wt(n,t){it.width(n).height(t)}function a(){var n=s.getFixed();s.setPressed([n.x,n.y]);s.setCurrent([n.x2,n.y2]);y()}function y(n){if(t)return p(n)}function p(n){var i=s.getFixed();wt(i.w,i.h);yt(i.x,i.y);r.shade&&g.updateRaw(i);t||bt();n?r.onSelect.call(v,ot(i)):r.onChange.call(v,ot(i))}function o(n,i,u){(t||i)&&(r.bgFade&&!u?e.animate({opacity:n},{queue:!1,duration:r.fadeTime}):e.css("opacity",n))}function bt(){it.show();r.shade?g.opacity(st):o(st,!0);t=!0}function kt(){u();it.hide();r.shade?g.opacity(1):o(1);t=!1;r.onRelease.call(v)}function dt(){i&&tt.show()}function w(){return i=!0,r.allowResize?(tt.show(),!0):void 0}function u(){i=!1;tt.hide()}function k(n){ci===n?u():w()}function gt(){k(!1);a()}var t,c=370,nt={},rt={},ut={},i=!1,f;return r.dragEdges&&n.isArray(r.createDragbars)&&lt(r.createDragbars),n.isArray(r.createHandles)&&vt(r.createHandles),r.drawBorders&&n.isArray(r.createBorders)&&at(r.createBorders),n(document).bind("touchstart.jcrop-ios",function(t){n(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()}),f=oi().mousedown(ui("move")).css({cursor:"move",position:"absolute",zIndex:360}),d.support&&f.bind("touchstart.jcrop",d.createDragger("move")),pt.append(f),u(),{updateVisible:y,update:p,release:kt,refresh:a,isAwake:function(){return t},setCursor:function(n){f.css("cursor",n)},enableHandles:w,enableOnly:function(){i=!0},showHandles:dt,disableHandles:u,animMode:k,setBgOpacity:o,done:gt}}(),p=function(){function c(){k.css({zIndex:450});d.support&&n(document).bind("touchmove.jcrop",y).bind("touchend.jcrop",p);h&&n(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",t)}function l(){k.css({zIndex:290});n(document).unbind(".jcrop")}function o(n){return i(et(n)),!1}function t(n){return n.preventDefault(),n.stopPropagation(),ut&&(ut=!1,f(et(n)),u.isAwake()&&r.onSelect.call(v,ot(s.getFixed())),l(),i=function(){},f=function(){}),!1}function a(n,t){return ut=!0,i=n,f=t,c(),!1}function y(n){return n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,o(n)}function p(n){return n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,t(n)}function w(n){k.css("cursor",n)}var i=function(){},f=function(){},h=r.trackDocument;return h||k.mousemove(o).mouseup(t).mouseout(t),e.before(k),{activateHandlers:a,setCursor:w}}(),dt=function(){function o(){r.keySupport&&(t.show(),t.focus())}function h(){t.hide()}function i(n,t,i){r.allowMove&&(s.moveOffset([t,i]),u.updateVisible(!0));n.preventDefault();n.stopPropagation()}function c(n){if(n.ctrlKey||n.metaKey)return!0;li=n.shiftKey?!0:!1;var t=li?10:1;switch(n.keyCode){case 37:i(n,-t,0);break;case 39:i(n,t,0);break;case 38:i(n,0,-t);break;case 40:i(n,0,t);break;case 27:r.allowSelect&&u.release();break;case 9:return!0}return!1}var t=n('<input type="radio" />').css({position:"fixed",left:"-99999px",width:"12px"}),f=n("<div />").css({position:"absolute",overflow:"hidden"}).append(t);return r.keySupport&&(t.keydown(c).blur(h),wt||!r.fixedSupport?(t.css({position:"absolute",left:"-20px"}),f.append(t).insertBefore(e)):t.insertBefore(e)),{watchKeys:o}}();return d.support&&k.bind("touchstart.jcrop",d.newSelection),tt.hide(),ni(!0),v={setImage:er,animateTo:nr,setSelect:ai,setOptions:rr,tellSelect:tr,tellScaled:ir,setClass:gi,disable:yi,enable:pi,cancel:ur,release:u.release,destroy:fr,focus:dt.watchKeys,getBounds:function(){return[o*l,f*a]},getWidgetSize:function(){return[o,f]},getScaleFactor:function(){return[l,a]},getOptions:function(){return r},ui:{holder:w,selection:it}},n.browser.msie&&w.bind("selectstart",function(){return!1}),c.data("Jcrop",v),v};n.fn.Jcrop=function(t,i){var r;return this.each(function(){if(n(this).data("Jcrop")){if(t==="api")return n(this).data("Jcrop");n(this).data("Jcrop").setOptions(t)}else this.tagName=="IMG"?n.Jcrop.Loader(this,function(){n(this).css({display:"block",visibility:"hidden"});r=n.Jcrop(this,t);n.isFunction(i)&&i.call(r)}):(n(this).css({display:"block",visibility:"hidden"}),r=n.Jcrop(this,t),n.isFunction(i)&&i.call(r))}),this};n.Jcrop.Loader=function(t,i,r){function e(){f.complete?(u.unbind(".jcloader"),n.isFunction(i)&&i.call(f)):window.setTimeout(e,50)}var u=n(t),f=u[0];u.bind("load.jcloader",e).bind("error.jcloader",function(){u.unbind(".jcloader");n.isFunction(r)&&r.call(f)});f.complete&&n.isFunction(i)&&(u.unbind(".jcloader"),i.call(f))};n.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:7,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery);window.JSON||(window.JSON={}),function(){function i(n){return n<10?"0"+n:n}function e(n){return s.lastIndex=0,s.test(n)?'"'+n.replace(s,function(n){var t=h[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,u){var c,l,s,a,v=n,h,o=u[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(u,i,o));switch(typeof o){case"string":return e(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=f,h=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,c=0;c<a;c+=1)h[c]=r(c,o)||"null";return s=h.length===0?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+v+"]":"["+h.join(",")+"]",n=v,s}if(t&&typeof t=="object")for(a=t.length,c=0;c<a;c+=1)l=t[c],typeof l=="string"&&(s=r(l,o),s&&h.push(e(l)+(n?": ":":")+s));else for(l in o)Object.hasOwnProperty.call(o,l)&&(s=r(l,o),s&&h.push(e(l)+(n?": ":":")+s));return s=h.length===0?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+v+"}":"{"+h.join(",")+"}",n=v,s}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var u=window.JSON,o=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,f,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof u.stringify!="function"&&(u.stringify=function(i,u,e){var o;if(n="",f="",typeof e=="number")for(o=0;o<e;o+=1)f+=" ";else typeof e=="string"&&(f=e);if(t=u,!u||typeof u=="function"||typeof u=="object"&&typeof u.length=="number")return r("",{"":i});throw new Error("JSON.stringify");});typeof u.parse!="function"&&(u.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),o.lastIndex=0,o.test(n)&&(n=n.replace(o,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}(),function(n,t){var i=n.History=n.History||{},r=n.jQuery;if(typeof i.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");i.Adapter={bind:function(n,t,i){r(n).bind(t,i)},trigger:function(n,t,i){r(n).trigger(t,i)},extractEventData:function(n,i,r){return i&&i.originalEvent&&i.originalEvent[n]||r&&r[n]||t},onDomLoad:function(n){r(n)}};typeof i.init!="undefined"&&i.init()}(window),function(n){var i=n.document,u=n.setTimeout||u,f=n.clearTimeout||f,r=n.setInterval||r,t=n.History=n.History||{};if(typeof t.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");t.initHtml4=function(){if(typeof t.initHtml4.initialized!="undefined")return!1;t.initHtml4.initialized=!0;t.enabled=!0;t.savedHashes=[];t.isLastHash=function(n){var r=t.getHashByIndex(),i;return i=n===r,i};t.saveHash=function(n){return t.isLastHash(n)?!1:(t.savedHashes.push(n),!0)};t.getHashByIndex=function(n){var i=null;return i=typeof n=="undefined"?t.savedHashes[t.savedHashes.length-1]:n<0?t.savedHashes[t.savedHashes.length+n]:t.savedHashes[n],i};t.discardedHashes={};t.discardedStates={};t.discardState=function(n,i,r){var f=t.getHashByState(n),u;return u={discardedState:n,backState:r,forwardState:i},t.discardedStates[f]=u,!0};t.discardHash=function(n,i,r){var u={discardedHash:n,backState:r,forwardState:i};return t.discardedHashes[n]=u,!0};t.discardedState=function(n){var r=t.getHashByState(n),i;return i=t.discardedStates[r]||!1,i};t.discardedHash=function(n){return t.discardedHashes[n]||!1};t.recycleState=function(n){var i=t.getHashByState(n);return t.discardedState(n)&&delete t.discardedStates[i],!0};t.emulated.hashChange&&(t.hashChangeInit=function(){t.checkerFunction=null;var f="",s,u,e,o;return t.isInternetExplorer()?(s="historyjs-iframe",u=i.createElement("iframe"),u.setAttribute("id",s),u.style.display="none",i.body.appendChild(u),u.contentWindow.document.open(),u.contentWindow.document.close(),e="",o=!1,t.checkerFunction=function(){if(o)return!1;o=!0;var i=t.getHash()||"",r=t.unescapeHash(u.contentWindow.document.location.hash)||"";return i!==f?(f=i,r!==i&&(e=r=i,u.contentWindow.document.open(),u.contentWindow.document.close(),u.contentWindow.document.location.hash=t.escapeHash(i)),t.Adapter.trigger(n,"hashchange")):r!==e&&(e=r,t.setHash(r,!1)),o=!1,!0}):t.checkerFunction=function(){var i=t.getHash();return i!==f&&(f=i,t.Adapter.trigger(n,"hashchange")),!0},t.intervalList.push(r(t.checkerFunction,t.options.hashChangeInterval)),!0},t.Adapter.onDomLoad(t.hashChangeInit));t.emulated.pushState&&(t.onHashChange=function(r){var o=r&&r.newURL||i.location.href,f=t.getHashByUrl(o),u=null,s=null,e;return t.isLastHash(f)?(t.busy(!1),!1):(t.doubleCheckComplete(),t.saveHash(f),f&&t.isTraditionalAnchor(f)?(t.Adapter.trigger(n,"anchorchange"),t.busy(!1),!1):(u=t.extractState(t.getFullUrl(f||i.location.href,!1),!0),t.isLastSavedState(u)?(t.busy(!1),!1):(s=t.getHashByState(u),e=t.discardedState(u),e?(t.getHashByIndex(-2)===t.getHashByState(e.forwardState)?t.back(!1):t.forward(!1),!1):(t.pushState(u.data,u.title,u.url,!1),!0))))},t.Adapter.bind(n,"hashchange",t.onHashChange),t.pushState=function(r,u,f,e){if(t.getHashByUrl(f))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&t.busy())return t.pushQueue({scope:t,callback:t.pushState,args:arguments,queue:e}),!1;t.busy(!0);var o=t.createStateObject(r,u,f),s=t.getHashByState(o),h=t.getState(!1),c=t.getHashByState(h),l=t.getHash();return t.storeState(o),t.expectedStateId=o.id,t.recycleState(o),t.setTitle(o),s===c?(t.busy(!1),!1):s!==l&&s!==t.getShortUrl(i.location.href)?(t.setHash(s,!1),!1):(t.saveState(o),t.Adapter.trigger(n,"statechange"),t.busy(!1),!0)},t.replaceState=function(n,i,r,u){if(t.getHashByUrl(r))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(u!==!1&&t.busy())return t.pushQueue({scope:t,callback:t.replaceState,args:arguments,queue:u}),!1;t.busy(!0);var f=t.createStateObject(n,i,r),e=t.getState(!1),o=t.getStateByIndex(-2);return t.discardState(e,f,o),t.pushState(f.data,f.title,f.url,!1),!0});t.emulated.pushState&&t.getHash()&&!t.emulated.hashChange&&t.Adapter.onDomLoad(function(){t.Adapter.trigger(n,"hashchange")})};typeof t.init!="undefined"&&t.init()}(window),function(n,t){var f=n.console||t,r=n.document,e=n.navigator,o=n.sessionStorage||!1,h=n.setTimeout,c=n.clearTimeout,l=n.setInterval,a=n.clearInterval,u=n.JSON,v=n.alert,i=n.History=n.History||{},s=n.history;if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,typeof i.init!="undefined")throw new Error("History.js Core has already been loaded...");i.init=function(){return typeof i.Adapter=="undefined"?!1:(typeof i.initCore!="undefined"&&i.initCore(),typeof i.initHtml4!="undefined"&&i.initHtml4(),!0)};i.initCore=function(){if(typeof i.initCore.initialized!="undefined")return!1;if(i.initCore.initialized=!0,i.options=i.options||{},i.options.hashChangeInterval=i.options.hashChangeInterval||100,i.options.safariPollInterval=i.options.safariPollInterval||500,i.options.doubleCheckInterval=i.options.doubleCheckInterval||500,i.options.storeInterval=i.options.storeInterval||1e3,i.options.busyDelay=i.options.busyDelay||250,i.options.debug=i.options.debug||!1,i.options.initialTitle=i.options.initialTitle||r.title,i.options.disableSuid=i.options.disableSuid||!1,i.intervalList=[],i.clearAllIntervals=function(){var n,t=i.intervalList;if(typeof t!="undefined"&&t!==null){for(n=0;n<t.length;n++)a(t[n]);i.intervalList=null}},i.debug=function(){(i.options.debug||!1)&&i.log.apply(i,arguments)},i.log=function(){var s=typeof f!="undefined"&&typeof f.log!="undefined"&&typeof f.log.apply!="undefined",t=r.getElementById("log"),n,e,h,o,i;for(s?(o=Array.prototype.slice.call(arguments),n=o.shift(),typeof f.debug!="undefined"?f.debug.apply(f,[n,o]):f.log.apply(f,[n,o])):n="\n"+arguments[0]+"\n",e=1,h=arguments.length;e<h;++e){if(i=arguments[e],typeof i=="object"&&typeof u!="undefined")try{i=u.stringify(i)}catch(c){}n+="\n"+i+"\n"}return t?(t.value+=n+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):s||v(n),!0},i.getInternetExplorerMajorVersion=function(){return i.getInternetExplorerMajorVersion.cached=typeof i.getInternetExplorerMajorVersion.cached!="undefined"?i.getInternetExplorerMajorVersion.cached:function(){for(var n=3,t=r.createElement("div"),i=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->")&&i[0];);return n>4?n:!1}()},i.isInternetExplorer=function(){return i.isInternetExplorer.cached=typeof i.isInternetExplorer.cached!="undefined"?i.isInternetExplorer.cached:Boolean(i.getInternetExplorerMajorVersion())},i.emulated={pushState:!Boolean(n.history&&n.history.pushState&&n.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in n||"onhashchange"in r)||i.isInternetExplorer()&&i.getInternetExplorerMajorVersion()<8)},i.enabled=!i.emulated.pushState,i.bugs={setHash:Boolean(!i.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!i.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(i.isInternetExplorer()&&i.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(i.isInternetExplorer()&&i.getInternetExplorerMajorVersion()<7)},i.isEmptyObject=function(n){for(var t in n)return!1;return!0},i.cloneObject=function(n){var i,t;return n?(i=u.stringify(n),t=u.parse(i)):t={},t},i.getRootUrl=function(){var n=r.location.protocol+"//"+(r.location.hostname||r.location.host);return(r.location.port||!1)&&(n+=":"+r.location.port),n+="/",n},i.getBaseHref=function(){var t=r.getElementsByTagName("base"),i=null,n="";return t.length===1&&(i=t[0],n=i.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},i.getBaseUrl=function(){return i.getBaseHref()||i.getBasePageUrl()||i.getRootUrl()},i.getPageUrl=function(){var t=i.getState(!1,!1),u=(t||{}).url||r.location.href,n;return n=u.replace(/\/+$/,"").replace(/[^\/]+$/,function(n){return/\./.test(n)?n:n+"/"}),n},i.getBasePageUrl=function(){return r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(n){return/[^\/]$/.test(n)?"":n}).replace(/\/+$/,"")+"/"},i.getFullUrl=function(n,t){var u=n,r=n.substring(0,1);return t=typeof t=="undefined"?!0:t,/[a-z]+\:\/\//.test(n)||(u=r==="/"?i.getRootUrl()+n.replace(/^\/+/,""):r==="#"?i.getPageUrl().replace(/#.*/,"")+n:r==="?"?i.getPageUrl().replace(/[\?#].*/,"")+n:t?i.getBaseUrl()+n.replace(/^(\.\/)+/,""):i.getBasePageUrl()+n.replace(/^(\.\/)+/,"")),u.replace(/\#$/,"")},i.getShortUrl=function(n){var t=n,r=i.getBaseUrl(),u=i.getRootUrl();return i.emulated.pushState&&(t=t.replace(r,"")),t=t.replace(u,"/"),i.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),t},i.store={},i.idToState=i.idToState||{},i.stateToId=i.stateToId||{},i.urlToId=i.urlToId||{},i.storedStates=i.storedStates||[],i.savedStates=i.savedStates||[],i.normalizeStore=function(){i.store.idToState=i.store.idToState||{};i.store.urlToId=i.store.urlToId||{};i.store.stateToId=i.store.stateToId||{}},i.getState=function(n,t){typeof n=="undefined"&&(n=!0);typeof t=="undefined"&&(t=!0);var r=i.getLastSavedState();return!r&&t&&(r=i.createStateObject()),n&&(r=i.cloneObject(r),r.url=r.cleanUrl||r.url),r},i.getIdByState=function(n){var t=i.extractId(n.url),r;if(!t)if(r=i.getStateString(n),typeof i.stateToId[r]!="undefined")t=i.stateToId[r];else if(typeof i.store.stateToId[r]!="undefined")t=i.store.stateToId[r];else{for(;;)if(t=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),typeof i.idToState[t]=="undefined"&&typeof i.store.idToState[t]=="undefined")break;i.stateToId[r]=t;i.idToState[t]=n}return t},i.normalizeState=function(n){var t,u;return(n&&typeof n=="object"||(n={}),typeof n.normalized!="undefined")?n:(n.data&&typeof n.data=="object"||(n.data={}),t={},t.normalized=!0,t.title=n.title||"",t.url=i.getFullUrl(i.unescapeString(n.url||r.location.href)),t.hash=i.getShortUrl(t.url),t.data=i.cloneObject(n.data),t.id=i.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,u=!i.isEmptyObject(t.data),(t.title||u)&&!i.options.disableSuid&&(t.hash=i.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=i.getFullUrl(t.hash),(i.emulated.pushState||i.bugs.safariPoll)&&i.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},i.createStateObject=function(n,t,r){var u={data:n,title:t,url:r};return u=i.normalizeState(u),u},i.getStateById=function(n){n=String(n);return i.idToState[n]||i.store.idToState[n]||t},i.getStateString=function(n){var t,r,f;return t=i.normalizeState(n),r={data:t.data,title:n.title,url:n.url},f=u.stringify(r),f},i.getStateId=function(n){var t,r;return t=i.normalizeState(n),r=t.id,r},i.getHashByState=function(n){var t,r;return t=i.normalizeState(n),r=t.hash,r},i.extractId=function(n){var i,t,r;return t=/(.*)\&_suid=([0-9]+)$/.exec(n),r=t?t[1]||n:n,i=t?String(t[2]||""):"",i||!1},i.isTraditionalAnchor=function(n){return!/[\/\?\.]/.test(n)},i.extractState=function(n,t){var r=null,u,f;return t=t||!1,u=i.extractId(n),u&&(r=i.getStateById(u)),r||(f=i.getFullUrl(n),u=i.getIdByUrl(f)||!1,u&&(r=i.getStateById(u)),!r&&t&&!i.isTraditionalAnchor(n)&&(r=i.createStateObject(null,null,f))),r},i.getIdByUrl=function(n){return i.urlToId[n]||i.store.urlToId[n]||t},i.getLastSavedState=function(){return i.savedStates[i.savedStates.length-1]||t},i.getLastStoredState=function(){return i.storedStates[i.storedStates.length-1]||t},i.hasUrlDuplicate=function(n){var r=!1,t;return t=i.extractState(n.url),r=t&&t.id!==n.id,r},i.storeState=function(n){return i.urlToId[n.url]=n.id,i.storedStates.push(i.cloneObject(n)),n},i.isLastSavedState=function(n){var t=!1,r,u,f;return i.savedStates.length&&(r=n.id,u=i.getLastSavedState(),f=u.id,t=r===f),t},i.saveState=function(n){return i.isLastSavedState(n)?!1:(i.savedStates.push(i.cloneObject(n)),!0)},i.getStateByIndex=function(n){var t=null;return t=typeof n=="undefined"?i.savedStates[i.savedStates.length-1]:n<0?i.savedStates[i.savedStates.length+n]:i.savedStates[n],t},i.getHash=function(){return i.unescapeHash(r.location.hash)},i.unescapeString=function(t){for(var i=t,r;;){if(r=n.unescape(i),r===i)break;i=r}return i},i.unescapeHash=function(n){var t=i.normalizeHash(n);return t=i.unescapeString(t),t},i.normalizeHash=function(n){return n.replace(/[^#]*#/,"").replace(/#.*/,"")},i.setHash=function(n,t){var f,u,e;return t!==!1&&i.busy()?(i.pushQueue({scope:i,callback:i.setHash,args:arguments,queue:t}),!1):(f=i.escapeHash(n),i.busy(!0),u=i.extractState(n,!0),u&&!i.emulated.pushState?i.pushState(u.data,u.title,u.url,!1):r.location.hash!==f&&(i.bugs.setHash?(e=i.getPageUrl(),i.pushState(null,null,e+"#"+f,!1)):r.location.hash=f),i)},i.escapeHash=function(t){var r=i.normalizeHash(t);return r=n.escape(r),i.bugs.hashEscape||(r=r.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),r},i.getHashByUrl=function(n){var t=String(n).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=i.unescapeHash(t),t},i.setTitle=function(n){var t=n.title,u;t||(u=i.getStateByIndex(0),u&&u.url===n.url&&(t=u.title||i.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return r.title=t,i},i.queues=[],i.busy=function(n){if(typeof n!="undefined"?i.busy.flag=n:typeof i.busy.flag=="undefined"&&(i.busy.flag=!1),!i.busy.flag){c(i.busy.timeout);var t=function(){var n,r,u;if(!i.busy.flag)for(n=i.queues.length-1;n>=0;--n)(r=i.queues[n],r.length!==0)&&(u=r.shift(),i.fireQueueItem(u),i.busy.timeout=h(t,i.options.busyDelay))};i.busy.timeout=h(t,i.options.busyDelay)}return i.busy.flag},i.busy.flag=!1,i.fireQueueItem=function(n){return n.callback.apply(n.scope||i,n.args||[])},i.pushQueue=function(n){return i.queues[n.queue||0]=i.queues[n.queue||0]||[],i.queues[n.queue||0].push(n),i},i.queue=function(n,t){return typeof n=="function"&&(n={callback:n}),typeof t!="undefined"&&(n.queue=t),i.busy()?i.pushQueue(n):i.fireQueueItem(n),i},i.clearQueue=function(){return i.busy.flag=!1,i.queues=[],i},i.stateChanged=!1,i.doubleChecker=!1,i.doubleCheckComplete=function(){return i.stateChanged=!0,i.doubleCheckClear(),i},i.doubleCheckClear=function(){return i.doubleChecker&&(c(i.doubleChecker),i.doubleChecker=!1),i},i.doubleCheck=function(n){return i.stateChanged=!1,i.doubleCheckClear(),i.bugs.ieDoubleCheck&&(i.doubleChecker=h(function(){return i.doubleCheckClear(),i.stateChanged||n(),!0},i.options.doubleCheckInterval)),i},i.safariStatePoll=function(){var u=i.extractState(r.location.href),t;if(!i.isLastSavedState(u))return t=u,t||(t=i.createStateObject()),i.Adapter.trigger(n,"popstate"),i},i.back=function(n){return n!==!1&&i.busy()?(i.pushQueue({scope:i,callback:i.back,args:arguments,queue:n}),!1):(i.busy(!0),i.doubleCheck(function(){i.back(!1)}),s.go(-1),!0)},i.forward=function(n){return n!==!1&&i.busy()?(i.pushQueue({scope:i,callback:i.forward,args:arguments,queue:n}),!1):(i.busy(!0),i.doubleCheck(function(){i.forward(!1)}),s.go(1),!0)},i.go=function(n,t){var r;if(n>0)for(r=1;r<=n;++r)i.forward(t);else{if(!(n<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(r=-1;r>=n;--r)i.back(t)}return i},i.emulated.pushState){var y=function(){};i.pushState=i.pushState||y;i.replaceState=i.replaceState||y}else i.onPopState=function(t,u){var o=!1,f=!1,s,e;return i.doubleCheckComplete(),s=i.getHash(),s?(e=i.extractState(s||r.location.href,!0),e?i.replaceState(e.data,e.title,e.url,!1):(i.Adapter.trigger(n,"anchorchange"),i.busy(!1)),i.expectedStateId=!1,!1):(o=i.Adapter.extractEventData("state",t,u)||!1,f=o?i.getStateById(o):i.expectedStateId?i.getStateById(i.expectedStateId):i.extractState(r.location.href),f||(f=i.createStateObject(null,null,r.location.href)),i.expectedStateId=!1,i.isLastSavedState(f)?(i.busy(!1),!1):(i.storeState(f),i.saveState(f),i.setTitle(f),i.Adapter.trigger(n,"statechange"),i.busy(!1),!0))},i.Adapter.bind(n,"popstate",i.onPopState),i.pushState=function(t,r,u,f){if(i.getHashByUrl(u)&&i.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.pushState,args:arguments,queue:f}),!1;i.busy(!0);var e=i.createStateObject(t,r,u);return i.isLastSavedState(e)?i.busy(!1):(i.storeState(e),i.expectedStateId=e.id,s.pushState(e.id,e.title,e.url),i.Adapter.trigger(n,"popstate")),!0},i.replaceState=function(t,r,u,f){if(i.getHashByUrl(u)&&i.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.replaceState,args:arguments,queue:f}),!1;i.busy(!0);var e=i.createStateObject(t,r,u);return i.isLastSavedState(e)?i.busy(!1):(i.storeState(e),i.expectedStateId=e.id,s.replaceState(e.id,e.title,e.url),i.Adapter.trigger(n,"popstate")),!0};if(o){try{i.store=u.parse(o.getItem("History.store"))||{}}catch(p){i.store={}}i.normalizeStore()}else i.store={},i.normalizeStore();i.Adapter.bind(n,"beforeunload",i.clearAllIntervals);i.Adapter.bind(n,"unload",i.clearAllIntervals);i.saveState(i.storeState(i.extractState(r.location.href,!0)));o&&(i.onUnload=function(){var n,t;try{n=u.parse(o.getItem("History.store"))||{}}catch(r){n={}}n.idToState=n.idToState||{};n.urlToId=n.urlToId||{};n.stateToId=n.stateToId||{};for(t in i.idToState)i.idToState.hasOwnProperty(t)&&(n.idToState[t]=i.idToState[t]);for(t in i.urlToId)i.urlToId.hasOwnProperty(t)&&(n.urlToId[t]=i.urlToId[t]);for(t in i.stateToId)i.stateToId.hasOwnProperty(t)&&(n.stateToId[t]=i.stateToId[t]);i.store=n;i.normalizeStore();o.setItem("History.store",u.stringify(n))},i.intervalList.push(l(i.onUnload,i.options.storeInterval)),i.Adapter.bind(n,"beforeunload",i.onUnload),i.Adapter.bind(n,"unload",i.onUnload));i.emulated.pushState||(i.bugs.safariPoll&&i.intervalList.push(l(i.safariStatePoll,i.options.safariPollInterval)),(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")&&(i.Adapter.bind(n,"hashchange",function(){i.Adapter.trigger(n,"popstate")}),i.getHash()&&i.Adapter.onDomLoad(function(){i.Adapter.trigger(n,"hashchange")})))};i.init()}(window),function(n){n.fn.aToolTip=function(t){var i=n.extend({},{closeTipBtn:"aToolTipCloseBtn",toolTipId:"aToolTip",fixed:!1,clickIt:!1,inSpeed:200,outSpeed:100,tipContent:"",toolTipClass:"defaultTheme",xOffset:5,yOffset:5,onShow:null,onHide:null},t);return this.each(function(){var t=n(this),r=t.attr("title")?t.attr("title"):i.tipContent;var u=function(){n("body").append("<div id='"+i.toolTipId+"' class='"+i.toolTipClass+"'><p class='aToolTipContent'>"+r+"<\/p><\/div>");r&&i.clickIt&&n("#"+i.toolTipId+" p.aToolTipContent").append("<a id='"+i.closeTipBtn+"' href='#' alt='close'>close<\/a>")},f=function(){var r=t.offset().top-n("#"+i.toolTipId).outerHeight()-i.yOffset+"px",u=t.offset().left+t.outerWidth()+i.xOffset+"px";n("#"+i.toolTipId).css({top:r,left:u}).stop().fadeIn(i.inSpeed,function(){if(n.isFunction(i.onShow))i.onShow(t)})},e=function(){n("#"+i.toolTipId).stop().fadeOut(i.outSpeed,function(){if(n(this).remove(),n.isFunction(i.onHide))i.onHide(t)})};r&&!i.clickIt&&t.hover(function(){n("#"+i.toolTipId).remove();t.attr({title:""});u();f()},function(){e()});r&&i.clickIt&&t.click(function(){return n("#"+i.toolTipId).remove(),t.attr({title:""}),u(),f(),n("#"+i.closeTipBtn).click(function(){return e(),!1}),!1});i.fixed||i.clickIt||t.mousemove(function(t){n("#"+i.toolTipId).css({top:t.pageY-n("#"+i.toolTipId).outerHeight()-i.yOffset,left:t.pageX+i.xOffset})})})}}(jQuery),function(){var n,i,u,f,e,o,t,s,r=[].slice,h={}.hasOwnProperty,c=function(n,t){function r(){this.constructor=n}for(var i in t)h.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};t=function(){};i=function(){function n(){}return n.prototype.addEventListener=n.prototype.on,n.prototype.on=function(n,t){return this._callbacks=this._callbacks||{},this._callbacks[n]||(this._callbacks[n]=[]),this._callbacks[n].push(t),this},n.prototype.emit=function(){var i,u,t,f,n,e;if(f=arguments[0],i=2<=arguments.length?r.call(arguments,1):[],this._callbacks=this._callbacks||{},t=this._callbacks[f])for(n=0,e=t.length;e>n;n++)u=t[n],u.apply(this,i);return this},n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=n.prototype.off,n.prototype.removeEventListener=n.prototype.off,n.prototype.off=function(n,t){var f,i,r,u,e;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[n],!i)return this;if(1===arguments.length)return delete this._callbacks[n],this;for(r=u=0,e=i.length;e>u;r=++u)if(f=i[r],f===t){i.splice(r,1);break}return this},n}();n=function(n){function u(n,t){var r,i,e;if(this.element=n,this.version=u.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(u.instances.push(this),this.element.dropzone=this,r=null!=(e=u.optionsForElement(this.element))?e:{},this.options=f({},this.defaultOptions,r,null!=t?t:{}),this.options.forceFallback||!u.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes);this.options.method=this.options.method.toUpperCase();(i=this.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i);this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?u.getElement(this.options.previewsContainer,"previewsContainer"):this.element);this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:u.getElements(this.options.clickable,"clickable"));this.init()}var f,e;return c(u,n),u.prototype.Emitter=i,u.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],u.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(n,t){return t()},init:function(){return t},forceFallback:!1,fallback:function(){var t,n,r,i,e,f;for(this.element.className=""+this.element.className+" dz-browser-not-supported",f=this.element.getElementsByTagName("div"),i=0,e=f.length;e>i;i++)t=f[i],/(^| )dz-message($| )/.test(t.className)&&(n=t,t.className="dz-message");return n||(n=u.createElement('<div class="dz-message"><span><\/span><\/div>'),this.element.appendChild(n)),r=n.getElementsByTagName("span")[0],r&&(r.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(n){var t,i,r;return t={srcX:0,srcY:0,srcWidth:n.width,srcHeight:n.height},i=n.width/n.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=i*t.optHeight:null==t.optHeight&&(t.optHeight=1/i*t.optWidth),r=t.optWidth/t.optHeight,n.height<t.optHeight||n.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):i>r?(t.srcHeight=n.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=n.width,t.srcHeight=t.srcWidth/r),t.srcX=(n.width-t.srcWidth)/2,t.srcY=(n.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:t,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:t,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(n){var t,c,l,i,r,f,a,v,y,e,o,s,h;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(n.previewElement=u.createElement(this.options.previewTemplate.trim()),n.previewTemplate=n.previewElement,this.previewsContainer.appendChild(n.previewElement),e=n.previewElement.querySelectorAll("[data-dz-name]"),i=0,a=e.length;a>i;i++)t=e[i],t.textContent=n.name;for(o=n.previewElement.querySelectorAll("[data-dz-size]"),r=0,v=o.length;v>r;r++)t=o[r],t.innerHTML=this.filesize(n.size);for(this.options.addRemoveLinks&&(n._removeLink=u.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"<\/a>"),n.previewElement.appendChild(n._removeLink)),c=function(t){return function(i){return i.preventDefault(),i.stopPropagation(),n.status===u.UPLOADING?u.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(n)}):t.options.dictRemoveFileConfirmation?u.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(n)}):t.removeFile(n)}}(this),s=n.previewElement.querySelectorAll("[data-dz-remove]"),h=[],f=0,y=s.length;y>f;f++)l=s[f],h.push(l.addEventListener("click",c));return h}},removedfile:function(n){var t;return n.previewElement&&null!=(t=n.previewElement)&&t.parentNode.removeChild(n.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(n,t){var r,i,f,u;if(n.previewElement){for(n.previewElement.classList.remove("dz-file-preview"),u=n.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,f=u.length;f>i;i++)r=u[i],r.alt=n.name,r.src=t;return setTimeout(function(){return function(){return n.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(n,t){var f,i,e,r,u;if(n.previewElement){for(n.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),r=n.previewElement.querySelectorAll("[data-dz-errormessage]"),u=[],i=0,e=r.length;e>i;i++)f=r[i],u.push(f.textContent=t);return u}},errormultiple:t,processing:function(n){if(n.previewElement&&(n.previewElement.classList.add("dz-processing"),n._removeLink))return n._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:t,uploadprogress:function(n,t){var i,r,e,u,f;if(n.previewElement){for(u=n.previewElement.querySelectorAll("[data-dz-uploadprogress]"),f=[],r=0,e=u.length;e>r;r++)i=u[r],f.push("PROGRESS"===i.nodeName?i.value=t:i.style.width=""+t+"%");return f}},totaluploadprogress:t,sending:t,sendingmultiple:t,success:function(n){if(n.previewElement)return n.previewElement.classList.add("dz-success")},successmultiple:t,canceled:function(n){return this.emit("error",n,"Upload canceled.")},canceledmultiple:t,complete:function(n){return n._removeLink&&(n._removeLink.textContent=this.options.dictRemoveFile),n.previewElement?n.previewElement.classList.add("dz-complete"):void 0},completemultiple:t,maxfilesexceeded:t,maxfilesreached:t,queuecomplete:t,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /><\/div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size><\/span><\/div>\n    <div class="dz-filename"><span data-dz-name><\/span><\/div>\n  <\/div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress><\/span><\/div>\n  <div class="dz-error-message"><span data-dz-errormessage><\/span><\/div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check<\/title>\n      <defs><\/defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"><\/path>\n      <\/g>\n    <\/svg>\n  <\/div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error<\/title>\n      <defs><\/defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"><\/path>\n        <\/g>\n      <\/g>\n    <\/svg>\n  <\/div>\n<\/div>'},f=function(){var t,i,u,f,e,n,o;for(f=arguments[0],u=2<=arguments.length?r.call(arguments,1):[],n=0,o=u.length;o>n;n++){i=u[n];for(t in i)e=i[t],f[t]=e}return f},u.prototype.getAcceptedFiles=function(){var t,n,u,i,r;for(i=this.files,r=[],n=0,u=i.length;u>n;n++)t=i[n],t.accepted&&r.push(t);return r},u.prototype.getRejectedFiles=function(){var t,n,u,i,r;for(i=this.files,r=[],n=0,u=i.length;u>n;n++)t=i[n],t.accepted||r.push(t);return r},u.prototype.getFilesWithStatus=function(n){var i,t,f,r,u;for(r=this.files,u=[],t=0,f=r.length;f>t;t++)i=r[t],i.status===n&&u.push(i);return u},u.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(u.QUEUED)},u.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(u.UPLOADING)},u.prototype.getActiveFiles=function(){var n,t,f,i,r;for(i=this.files,r=[],t=0,f=i.length;f>t;t++)n=i[t],(n.status===u.UPLOADING||n.status===u.QUEUED)&&r.push(n);return r},u.prototype.init=function(){var i,n,f,t,e,o,r;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(u.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"<\/span><\/div>")),this.clickableElements.length&&(f=function(n){return function(){return n.hiddenFileInput&&document.body.removeChild(n.hiddenFileInput),n.hiddenFileInput=document.createElement("input"),n.hiddenFileInput.setAttribute("type","file"),(null==n.options.maxFiles||n.options.maxFiles>1)&&n.hiddenFileInput.setAttribute("multiple","multiple"),n.hiddenFileInput.className="dz-hidden-input",null!=n.options.acceptedFiles&&n.hiddenFileInput.setAttribute("accept",n.options.acceptedFiles),null!=n.options.capture&&n.hiddenFileInput.setAttribute("capture",n.options.capture),n.hiddenFileInput.style.visibility="hidden",n.hiddenFileInput.style.position="absolute",n.hiddenFileInput.style.top="0",n.hiddenFileInput.style.left="0",n.hiddenFileInput.style.height="0",n.hiddenFileInput.style.width="0",document.body.appendChild(n.hiddenFileInput),n.hiddenFileInput.addEventListener("change",function(){var r,t,i,u;if(t=n.hiddenFileInput.files,t.length)for(i=0,u=t.length;u>i;i++)r=t[i],n.addFile(r);return f()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,r=this.events,t=0,e=r.length;e>t;t++)i=r[t],this.on(i,this.options[i]);return this.on("uploadprogress",function(n){return function(){return n.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(n){return function(){return n.updateTotalUploadProgress()}}(this)),this.on("canceled",function(n){return function(t){return n.emit("complete",t)}}(this)),this.on("complete",function(n){return function(){if(0===n.getUploadingFiles().length&&0===n.getQueuedFiles().length)return setTimeout(function(){return n.emit("queuecomplete")},0)}}(this)),n=function(n){return n.stopPropagation(),n.preventDefault?n.preventDefault():n.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(n){return function(t){return n.emit("dragstart",t)}}(this),dragenter:function(t){return function(i){return n(i),t.emit("dragenter",i)}}(this),dragover:function(t){return function(i){var r;try{r=i.dataTransfer.effectAllowed}catch(u){}return i.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",n(i),t.emit("dragover",i)}}(this),dragleave:function(n){return function(t){return n.emit("dragleave",t)}}(this),drop:function(t){return function(i){return n(i),t.drop(i)}}(this),dragend:function(n){return function(t){return n.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(n){return function(t){return n.listeners.push({element:t,events:{click:function(i){if(t!==n.element||i.target===n.element||u.elementInside(i.target,n.element.querySelector(".dz-message")))return n.hiddenFileInput.click()}}})}}(this)),this.enable(),this.options.init.call(this)},u.prototype.destroy=function(){var n;return this.disable(),this.removeAllFiles(!0),(null!=(n=this.hiddenFileInput)?n.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,u.instances.splice(u.instances.indexOf(this),1)},u.prototype.updateTotalUploadProgress=function(){var e,r,n,t,u,i,o,f;if(t=0,n=0,e=this.getActiveFiles(),e.length){for(f=this.getActiveFiles(),i=0,o=f.length;o>i;i++)r=f[i],t+=r.upload.bytesSent,n+=r.upload.total;u=100*t/n}else u=100;return this.emit("totaluploadprogress",u,n,t)},u.prototype._getParamName=function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")},u.prototype.getFallbackForm=function(){var r,i,n,t;return(r=this.getExistingFallback())?r:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"<\/p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"><\/div>',i=u.createElement(n),"FORM"!==this.element.tagName?(t=u.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"><\/form>'),t.appendChild(i)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i)},u.prototype.getExistingFallback=function(){var i,r,u,n,f,t;for(r=function(n){for(var i,t=0,r=n.length;r>t;t++)if(i=n[t],/(^| )fallback($| )/.test(i.className))return i},t=["div","form"],n=0,f=t.length;f>n;n++)if(u=t[n],i=r(this.element.getElementsByTagName(u)))return i},u.prototype.setupEventListeners=function(){var t,i,f,n,e,r,u;for(r=this.listeners,u=[],n=0,e=r.length;e>n;n++)t=r[n],u.push(function(){var n,r;n=t.events;r=[];for(i in n)f=n[i],r.push(t.element.addEventListener(i,f,!1));return r}());return u},u.prototype.removeEventListeners=function(){var t,i,f,n,e,r,u;for(r=this.listeners,u=[],n=0,e=r.length;e>n;n++)t=r[n],u.push(function(){var n,r;n=t.events;r=[];for(i in n)f=n[i],r.push(t.element.removeEventListener(i,f,!1));return r}());return u},u.prototype.disable=function(){var r,n,u,t,i;for(this.clickableElements.forEach(function(n){return n.classList.remove("dz-clickable")}),this.removeEventListeners(),t=this.files,i=[],n=0,u=t.length;u>n;n++)r=t[n],i.push(this.cancelUpload(r));return i},u.prototype.enable=function(){return this.clickableElements.forEach(function(n){return n.classList.add("dz-clickable")}),this.setupEventListeners()},u.prototype.filesize=function(n){var e,t,i,r,o,u,f,s;for(u=["TB","GB","MB","KB","b"],i=r=null,t=f=0,s=u.length;s>f;t=++f)if(o=u[t],e=Math.pow(this.options.filesizeBase,4-t)/10,n>=e){i=n/Math.pow(this.options.filesizeBase,4-t);r=o;break}return i=Math.round(10*i)/10,"<strong>"+i+"<\/strong> "+r},u.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},u.prototype.drop=function(n){var i,t;n.dataTransfer&&(this.emit("drop",n),i=n.dataTransfer.files,i.length&&(t=n.dataTransfer.items,t&&t.length&&null!=t[0].webkitGetAsEntry?this._addFilesFromItems(t):this.handleFiles(i)))},u.prototype.paste=function(n){var t,i;if(null!=(null!=n&&null!=(i=n.clipboardData)?i.items:void 0))return this.emit("paste",n),t=n.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},u.prototype.handleFiles=function(n){var r,t,u,i;for(i=[],t=0,u=n.length;u>t;t++)r=n[t],i.push(this.addFile(r));return i},u.prototype._addFilesFromItems=function(n){var i,t,r,f,u;for(u=[],r=0,f=n.length;f>r;r++)t=n[r],u.push(null!=t.webkitGetAsEntry&&(i=t.webkitGetAsEntry())?i.isFile?this.addFile(t.getAsFile()):i.isDirectory?this._addFilesFromDirectory(i,i.name):void 0:null!=t.getAsFile?null==t.kind||"file"===t.kind?this.addFile(t.getAsFile()):void 0:void 0);return u},u.prototype._addFilesFromDirectory=function(n,t){var i,r;return i=n.createReader(),r=function(n){return function(i){for(var r,u=0,f=i.length;f>u;u++)r=i[u],r.isFile?r.file(function(i){if(!n.options.ignoreHiddenFiles||"."!==i.name.substring(0,1))return(i.fullPath=""+t+"/"+i.name,n.addFile(i))}):r.isDirectory&&n._addFilesFromDirectory(r,""+t+"/"+r.name)}}(this),i.readEntries(r,function(n){if("undefined"!=typeof console&&null!==console&&"function"==typeof console.log)return console.log(n)})},u.prototype.accept=function(n,t){return n.size>1048576*this.options.maxFilesize?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(n.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):u.isValidFile(n,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",n)):this.options.accept.call(this,n,t):t(this.options.dictInvalidFileType)},u.prototype.addFile=function(n){return n.upload={progress:0,total:n.size,bytesSent:0},this.files.push(n),n.status=u.ADDED,this.emit("addedfile",n),this._enqueueThumbnail(n),this.accept(n,function(t){return function(i){return i?(n.accepted=!1,t._errorProcessing([n],i)):(n.accepted=!0,t.options.autoQueue&&t.enqueueFile(n)),t._updateMaxFilesReachedClass()}}(this))},u.prototype.enqueueFiles=function(n){for(var i,t=0,r=n.length;r>t;t++)i=n[t],this.enqueueFile(i);return null},u.prototype.enqueueFile=function(n){if(n.status!==u.ADDED||n.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return n.status=u.QUEUED,this.options.autoProcessQueue?setTimeout(function(n){return function(){return n.processQueue()}}(this),0):void 0},u.prototype._thumbnailQueue=[],u.prototype._processingThumbnail=!1,u.prototype._enqueueThumbnail=function(n){if(this.options.createImageThumbnails&&n.type.match(/image.*/)&&n.size<=1048576*this.options.maxThumbnailFilesize)return(this._thumbnailQueue.push(n),setTimeout(function(n){return function(){return n._processThumbnailQueue()}}(this),0))},u.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(n){return function(){return n._processingThumbnail=!1,n._processThumbnailQueue()}}(this)))},u.prototype.removeFile=function(n){return n.status===u.UPLOADING&&this.cancelUpload(n),this.files=s(this.files,n),this.emit("removedfile",n),0===this.files.length?this.emit("reset"):void 0},u.prototype.removeAllFiles=function(n){var i,t,f,r;for(null==n&&(n=!1),r=this.files.slice(),t=0,f=r.length;f>t;t++)i=r[t],(i.status!==u.UPLOADING||n)&&this.removeFile(i);return null},u.prototype.createThumbnail=function(n,t){var i;return i=new FileReader,i.onload=function(r){return function(){var u;return"image/svg+xml"===n.type?(r.emit("thumbnail",n,i.result),void(null!=t&&t())):(u=document.createElement("img"),u.onload=function(){var f,e,i,s,h,c,l,a;return n.width=u.width,n.height=u.height,i=r.options.resize.call(r,n),null==i.trgWidth&&(i.trgWidth=i.optWidth),null==i.trgHeight&&(i.trgHeight=i.optHeight),f=document.createElement("canvas"),e=f.getContext("2d"),f.width=i.trgWidth,f.height=i.trgHeight,o(e,u,null!=(h=i.srcX)?h:0,null!=(c=i.srcY)?c:0,i.srcWidth,i.srcHeight,null!=(l=i.trgX)?l:0,null!=(a=i.trgY)?a:0,i.trgWidth,i.trgHeight),s=f.toDataURL("image/png"),r.emit("thumbnail",n,s),null!=t?t():void 0},u.onerror=t,u.src=i.result)}}(this),i.readAsDataURL(n)},u.prototype.processQueue=function(){var r,t,i,n;if(t=this.options.parallelUploads,i=this.getUploadingFiles().length,r=i,!(i>=t)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));for(;t>r;){if(!n.length)return;this.processFile(n.shift());r++}}},u.prototype.processFile=function(n){return this.processFiles([n])},u.prototype.processFiles=function(n){for(var t,i=0,r=n.length;r>i;i++)t=n[i],t.processing=!0,t.status=u.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",n),this.uploadFiles(n)},u.prototype._getFilesWithXhr=function(n){var t;return function(){var i,f,r,u;for(r=this.files,u=[],i=0,f=r.length;f>i;i++)t=r[i],t.xhr===n&&u.push(t);return u}.call(this)},u.prototype.cancelUpload=function(n){var i,t,r,f,e,o,s;if(n.status===u.UPLOADING){for(t=this._getFilesWithXhr(n.xhr),r=0,e=t.length;e>r;r++)i=t[r],i.status=u.CANCELED;for(n.xhr.abort(),f=0,o=t.length;o>f;f++)i=t[f],this.emit("canceled",i);this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else((s=n.status)===u.ADDED||s===u.QUEUED)&&(n.status=u.CANCELED,this.emit("canceled",n),this.options.uploadMultiple&&this.emit("canceledmultiple",[n]));if(this.options.autoProcessQueue)return this.processQueue()},e=function(){var t,n;return n=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],"function"==typeof n?n.apply(this,t):n},u.prototype.uploadFile=function(n){return this.uploadFiles([n])},u.prototype.uploadFiles=function(n){var i,r,b,k,et,a,h,o,d,g,nt,ot,tt,st,s,it,ht,ct,t,v,y,p,w,lt,at,vt,yt,c,pt,rt,ut,ft,wt,l;for(t=new XMLHttpRequest,v=0,lt=n.length;lt>v;v++)i=n[v],i.xhr=t;ot=e(this.options.method,n);ht=e(this.options.url,n);t.open(ot,ht,!0);t.withCredentials=!!this.options.withCredentials;s=null;b=function(r){return function(){var u,e,f;for(f=[],u=0,e=n.length;e>u;u++)i=n[u],f.push(r._errorProcessing(n,s||r.options.dictResponseError.replace("{{statusCode}}",t.status),t));return f}}(this);it=function(t){return function(r){var s,u,f,e,o,c,l,a,h;if(null!=r)for(u=100*r.loaded/r.total,f=0,c=n.length;c>f;f++)i=n[f],i.upload={progress:u,total:r.total,bytesSent:r.loaded};else{for(s=!0,u=100,e=0,l=n.length;l>e;e++)i=n[e],(100!==i.upload.progress||i.upload.bytesSent!==i.upload.total)&&(s=!1),i.upload.progress=u,i.upload.bytesSent=i.upload.total;if(s)return}for(h=[],o=0,a=n.length;a>o;o++)i=n[o],h.push(t.emit("uploadprogress",i,u,i.upload.bytesSent));return h}}(this);t.onload=function(i){return function(r){var f;if(n[0].status!==u.CANCELED&&4===t.readyState){if(s=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json"))try{s=JSON.parse(s)}catch(e){r=e;s="Invalid JSON response from server."}return it(),200<=(f=t.status)&&300>f?i._finished(n,s,r):b()}}}(this);t.onerror=function(){return function(){if(n[0].status!==u.CANCELED)return b()}}(this);st=null!=(pt=t.upload)?pt:t;st.onprogress=it;a={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&f(a,this.options.headers);for(k in a)et=a[k],t.setRequestHeader(k,et);if(r=new FormData,this.options.params){rt=this.options.params;for(nt in rt)ct=rt[nt],r.append(nt,ct)}for(y=0,at=n.length;at>y;y++)i=n[y],this.emit("sending",i,t,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",n,t,r),"FORM"===this.element.tagName)for(ut=this.element.querySelectorAll("input, textarea, select, button"),p=0,vt=ut.length;vt>p;p++)if(o=ut[p],d=o.getAttribute("name"),g=o.getAttribute("type"),"SELECT"===o.tagName&&o.hasAttribute("multiple"))for(ft=o.options,w=0,yt=ft.length;yt>w;w++)tt=ft[w],tt.selected&&r.append(d,tt.value);else(!g||"checkbox"!==(wt=g.toLowerCase())&&"radio"!==wt||o.checked)&&r.append(d,o.value);for(h=c=0,l=n.length-1;l>=0?l>=c:c>=l;h=l>=0?++c:--c)r.append(this._getParamName(h),n[h],n[h].name);return t.send(r)},u.prototype._finished=function(n,t,i){for(var r,f=0,e=n.length;e>f;f++)r=n[f],r.status=u.SUCCESS,this.emit("success",r,t,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",n,t,i),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0},u.prototype._errorProcessing=function(n,t,i){for(var r,f=0,e=n.length;e>f;f++)r=n[f],r.status=u.ERROR,this.emit("error",r,t,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",n,t,i),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0},u}(i);n.version="4.0.1";n.options={};n.optionsForElement=function(t){if(t.getAttribute("id"))return n.options[u(t.getAttribute("id"))]};n.instances=[];n.forElement=function(n){if("string"==typeof n&&(n=document.querySelector(n)),null==(null!=n?n.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return n.dropzone};n.autoDiscover=!0;n.discover=function(){var r,u,t,i,e,f;for(document.querySelectorAll?t=document.querySelectorAll(".dropzone"):(t=[],r=function(n){var r,i,f,u;for(u=[],i=0,f=n.length;f>i;i++)r=n[i],u.push(/(^| )dropzone($| )/.test(r.className)?t.push(r):void 0);return u},r(document.getElementsByTagName("div")),r(document.getElementsByTagName("form"))),f=[],i=0,e=t.length;e>i;i++)u=t[i],f.push(n.optionsForElement(u)!==!1?new n(u):void 0);return f};n.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];n.isBrowserSupported=function(){var t,u,i,f,r;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(r=n.blacklistedBrowsers,i=0,f=r.length;f>i;i++)u=r[i],u.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t};s=function(n,t){var r,i,f,u;for(u=[],i=0,f=n.length;f>i;i++)r=n[i],r!==t&&u.push(r);return u};u=function(n){return n.replace(/[\-_](\w)/g,function(n){return n.charAt(1).toUpperCase()})};n.createElement=function(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.childNodes[0]};n.elementInside=function(n,t){if(n===t)return!0;for(;n=n.parentNode;)if(n===t)return!0;return!1};n.getElement=function(n,t){var i;if("string"==typeof n?i=document.querySelector(n):null!=n.nodeType&&(i=n),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i};n.getElements=function(n,t){var h,r,i,u,f,o,s,e;if(n instanceof Array){i=[];try{for(u=0,o=n.length;o>u;u++)r=n[u],i.push(this.getElement(r,t))}catch(c){h=c;i=null}}else if("string"==typeof n)for(i=[],e=document.querySelectorAll(n),f=0,s=e.length;s>f;f++)r=e[f],i.push(r);else null!=n.nodeType&&(i=[n]);if(null==i||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i};n.confirm=function(n,t,i){return window.confirm(n)?t():null!=i?i():void 0};n.isValidFile=function(n,t){var f,u,i,r,e;if(!t)return!0;for(t=t.split(","),u=n.type,f=u.replace(/\/.*$/,""),r=0,e=t.length;e>r;r++)if(i=t[r],i=i.trim(),"."===i.charAt(0)){if(-1!==n.name.toLowerCase().indexOf(i.toLowerCase(),n.name.length-i.length))return!0}else if(/\/\*$/.test(i)){if(f===i.replace(/\/.*$/,""))return!0}else if(u===i)return!0;return!1};"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new n(this,t)})});"undefined"!=typeof module&&null!==module?module.exports=n:window.Dropzone=n;n.ADDED="added";n.QUEUED="queued";n.ACCEPTED=n.QUEUED;n.UPLOADING="uploading";n.PROCESSING=n.UPLOADING;n.CANCELED="canceled";n.ERROR="error";n.SUCCESS="success";e=function(n){var s,r,f,h,e,i,c,t,o,u;for(c=n.naturalWidth,i=n.naturalHeight,r=document.createElement("canvas"),r.width=1,r.height=i,f=r.getContext("2d"),f.drawImage(n,0,0),h=f.getImageData(0,0,1,i).data,u=0,e=i,t=i;t>u;)s=h[4*(t-1)+3],0===s?e=t:u=t,t=e+u>>1;return o=t/i,0===o?1:o};o=function(n,t,i,r,u,f,o,s,h,c){var l;return l=e(t),n.drawImage(t,i,r,u,f,o,s,h,c/l)};f=function(n,t){var f,i,e,r,o,u,c,s,h;if(e=!1,h=!0,i=n.document,s=i.documentElement,f=i.addEventListener?"addEventListener":"attachEvent",c=i.addEventListener?"removeEventListener":"detachEvent",u=i.addEventListener?"":"on",r=function(f){if("readystatechange"!==f.type||"complete"===i.readyState)return(("load"===f.type?n:i)[c](u+f.type,r,!1),!e&&(e=!0)?t.call(n,f.type||f):void 0)},o=function(){var n;try{s.doScroll("left")}catch(t){return n=t,void setTimeout(o,50)}return r("poll")},"complete"!==i.readyState){if(i.createEventObject&&s.doScroll){try{h=!n.frameElement}catch(l){}h&&o()}return i[f](u+"DOMContentLoaded",r,!1),i[f](u+"readystatechange",r,!1),n[f](u+"load",r,!1)}};n._autoDiscoverFunction=function(){if(n.autoDiscover)return n.discover()};f(window,n._autoDiscoverFunction)}.call(this),function(n){n.fn.scrollTo=function(t){if(!this.length)return this;var i=n.extend({offSetTop:0,offSetBottom:0,speed:200},t);return this.each(function(){var t=n(this),r=-i.offSetTop+i.offSetBottom,u=t.offset().top+r;n("html,body").animate({scrollTop:u},i.speed)})}}(jQuery),function(n){n.fn.checkBoxSlider=function(){return this.each(function(){var t=n(this),i;return t.data("checkBoxSlider")?t:(t.data("checkBoxSlider",!0),i=t.wrap('<label class="checkboxSlider" for="'+t.attr("name").replace(/\./g,"_")+'"><\/label>').parent(),i.append('<span class="cover"><\/span><span class="sliderOn">On<\/span><span class="sliderOff">Off<\/span>'),t)})}}(jQuery);jQuery(window).load(function(){SetEqualHeights()}),function(n){n.fn.autogrow=function(){return this.filter("textarea").each(function(){var t=n(this),u=t.height(),f=t.css("lineHeight"),r=n("<div><\/div>").css({position:"absolute",top:-1e4,left:-1e4,width:n(this).width(),fontSize:t.css("fontSize"),fontFamily:t.css("fontFamily"),lineHeight:t.css("lineHeight"),resize:"none"}).appendTo(document.body),i=function(){var t=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n/g,"<br/>");r.html(t);n(this).css("height",Math.max(r.height()+20,u))};n(this).change(i).keyup(i).keydown(i);i.apply(this)}),this};n.ajaxPrefilter(function(n){var i,r,t;(n.url.indexOf("/")==0||n.url.indexOf((WHT||{}).urlBase||"/")==0)&&(i=function(n){for(var i=n.url+(n.url.indexOf("?")>-1?"&":"?")+"rt=json&rn="+String((new Date).valueOf())+String(Math.random()*1e3),o=i.substring(i.lastIndexOf("=")+1).split("."),s,h="",c=i.lastIndexOf("/"),l=Math.ceil(Math.random()*1e3),a="t",v="",y,p=9,w=i.substring(0,c).toLowerCase(),t=i.substring(c),b=y=Math.floor(Math.random()*p)+2,f="e",e=t.indexOf("?"),r="rk="+String(Number(o[0])%Number(o[1])+l),u;--b>0;)v+="%"+String(0)+p;for(u=1;u<arguments.length;u++)r+="&"+arguments[u];return r="_="+v+"&"+r,s=r.length,e>-1&&(h=t.substring(e),t=t.substring(0,e)),i=w+t.toLowerCase()+String(t.length>0&&t[t.length-1]=="/"||t.indexOf(".")>-1?"":"/")+h,{uri:i,xrl:["x".toUpperCase(),"r".toUpperCase()+f+"qu"+f+"s"+a,"l".toUpperCase()+f+"ng"+a+"h"].join("-"),args:r,prn:String(l-y+s)}},r=(n.data||"").split("&"),r.unshift(n),t=i.apply(i,r),n.data=t.args,n.url=t.uri,arguments[2].setRequestHeader(t.xrl,t.prn))});n.cachedScript=function(t,i){return i=n.extend(i||{},{dataType:"script",cache:!0,url:t}),jQuery.ajax(i)};n.fn.equals=function(n){if(!n||!n.length||this.length!=n.length)return!1;for(var t=0;t<this.length;t++)if(this[t]!==n[t])return!1;return!0};n.fn.setEqualHeight=function(){var t=n(this),i=0;t.css({height:"auto"});t.each(function(){var t=n(this).height();t>i&&(i=t)});t.height(i)};n.validator.unobtrusive.adapters.add("email",function(n){var t=n.Message;return function(n){if(!n||!n.length)return!0;return/^([a-z0-9_\-\.\']+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-z0-9\-]+\.)+))([a-z]{2,4}|[0-9]{1,3})$/.test(n)}});n.validator.unobtrusive.adapters.add("url",function(n){var t=n.Message;return function(n){if(!n||!n.length)return!0;return/^(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(:[a-zA-Z0-9]*)?\/?([a-zA-Z0-9\-\._\?\,\'/\\\+&amp;%\$#\=~])*$/.test(n)}});n.setCookie||n.extend({setCookie:function(n,t,i){var r,u,f;try{if(r=window.location.hostname,r=r.substring(r.indexOf(".")),!n)return!1;u=new Date;u.setDate(u.getDate()+i);f=escape(t)+(i==null?"":"; expires="+u.toUTCString());document.cookie=n+"="+f+";path=/;domain="+r+";"}catch(e){return!1}return!0}});n.getCookie||n.extend({getCookie:function(n){try{for(var r,u,i=document.cookie.split(";"),t=0;t<i.length;t++)if(r=i[t].substr(0,i[t].indexOf("=")),u=i[t].substr(i[t].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==n)return unescape(u)}catch(f){return!1}return!1}});n.validator.unobtrusive.parseDynamicContent=function(t){if(n(t).length===0)throw"Error 36: Container"+t+" is null or undefined.";n.validator.unobtrusive.parse(t);var i=n(t).find("form");i==null||i.length<1||n.each(i,function(){var t=n(this).data("unobtrusiveValidation"),r=i.validate();t!=null&&n.each(t.options.rules,function(i,u){if(r.settings.rules[i]==undefined){var f={};n.extend(f,u);f.messages=t.options.messages[i];n('[name="'+i+'"]').rules("add",f)}else n.each(u,function(u,f){if(r.settings.rules[i][u]==undefined){var e={};e[u]=f;e.messages=t.options.messages[i][u];n('[name="'+i+'"]').rules("add",e)}})})})};n("body").ajaxStart(function(){});n("body").ajaxComplete(function(){});n("body").ajaxError(function(t,i,r){try{if(WHT.ToggleProgressCursor(!1),r.url.indexOf("/keepalive")>-1||r.url.indexOf("/updateusersession")>-1||r.url.indexOf("/getusernotifications")>-1)return}catch(u){}WHT.changingPage||n.jGrowl("An unexpected AJAX Error occurred.",{position:"center",header:"Error Occurred"})});n(".related-articles").scrollable({circular:!1,next:".related-articles .arrow.right",prev:".related-articles .arrow.left",itemCount:2,pageSize:2});n(".other-topics").scrollable({circular:!1,next:".other-topics .arrow.right",prev:".other-topics .arrow.left",itemCount:3,pageSize:3});n(".hotnow-sidebar-container .slider").scrollable({circular:!1,next:".hotnow-sidebar-container .arrow.right",prev:".hotnow-sidebar-container .arrow.left",itemCount:2,pageSize:2}).autoscroll({interval:8e3});n(".newest-articles-sidebar-container .slider").scrollable({circular:!1,next:".newest-articles-sidebar-container .arrow.right",prev:".newest-articles-sidebar-container .arrow.left",itemCount:2,pageSize:2}).autoscroll({interval:8e3});n(".itemLinkListContainer .slider").scrollable({circular:!1,next:".arrow.right",prev:".arrow.left",itemCount:5,pageSize:5});n(".featured-content-slider").scrollable({circular:!1,prev:".previous",itemCount:3}).navigator({navi:".featured-content-slider-nav",pageSize:3}).autoscroll({interval:8e3});n(function(){n(".featured-content-slider-container .gallery-navigate").show();SetEqualHeights()});var t="/"+(location.pathname.split("/")[1]||"")+"/",i=t=="//"?!0:!1;n(".navbutton-list li a").each(function(){var r=n(this),u=r.attr("href");(u==location.href||u.indexOf(t)>-1&&!i)&&r.addClass("active")});n.jGrowl.defaults.pool=1}(jQuery);window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;this.console&&console.log(Array.prototype.slice.call(arguments))},function(n,t){n.CtaManager=function(i){var u={},r=this,f=i;this.init=function(n){this.options=t.extend(u,n);r._initEventHandlers()};this._initEventHandlers=function(){f.on("click","button",this._onButtonClick)};this._onButtonClick=function(n){var i=t(n.target);i.is("button")||(i=i.closest("button"));var c=i.data("action"),u=i.closest(".cta-container"),e=u.find(".cta-details"),l=u.find(".centered-cta").text().split(),o=u.find('button[data-action="hide"]'),s=u.find('button[data-action="show"]'),h=l[0],f=u.attr("data-ctaid");switch(c){case"edit":r._editCTA(f);break;case"delete":r._deleteCTA(f);break;case"clone":r._cloneCTA(f,h);break;case"clone-to":r._cloneCTAToSlot(f);break;case"start":r._startCTA(f,h);break;case"hide":r._hideCTA(e,o,s);break;case"show":r._showCTA(e,o,s)}n.stopImmediatePropagation()};this._editCTA=function(t){n.NavBar.createAjaxDialog({URL:"/ajax/editctaform/",ContainerID:"editctacontainer",Title:"Edit CTA",AdditionalData:{ctaid:t}})};this._deleteCTA=function(i){confirm("Are you sure you want to DELETE this CTA?")&&(n.Alerts.Show("Deleting...",!0),t.post("/ajax/deletecta/",{ctaid:i},function(t){console.dir(t);t.Error!=null?n.Alerts.DisplayErrorNotification(t.Error.ErrorText):t.Response.Value.Success&&n.NavigateTo(location)}).error(function(n){console.dir(n)}))};this._cloneCTA=function(i){n.Alerts.Show("Cloning...",!0);t.post("/ajax/clonecta/",{ctaid:i},function(t){console.dir(t);t.Error!=null?n.Alerts.DisplayErrorNotification(t.Error.ErrorText):t.Response.Value.Success&&n.NavigateTo(location)}).error(function(n){console.dir(n)})};this._cloneCTAToSlot=function(t){n.NavBar.createAjaxDialog({URL:"/ajax/clonectatoslot/",ContainerID:"clonecalltoactiontoslotcontainer",Title:"Clone CTA To Slot...",AdditionalData:{ctaid:t}})};this._startCTA=function(i){confirm("Are you sure you want to start this CTA? Doing so will immediately stop the currently live one.")&&t.post("/ajax/startcta/",{ctaid:i},function(t){console.dir(t);t.Error!=null?n.Alerts.DisplayErrorNotification(t.Error.ErrorText):t.Response.Value.Success&&n.NavigateTo(location)}).error(function(n){console.dir(n)})};this._hideCTA=function(n,t,i){n.hide();t.hide();i.show()};this._showCTA=function(n,t,i){n.show();t.show();i.hide()}};t.fn.ctaManager=function(i){return this.each(function(){var r=t(this),u;if(r.data("ctaManager"))return r.data("ctaManager");u=new n.CtaManager(r);r.data("ctaManager",u);u.init(i!=null?i:null)})}}(window.WHT=window.WHT||{},jQuery),function(n,t){n.CtaTracker=function(i){var b={},r=this,u=i,h=t(window),y=h.height(),f="",p=!1,v=!1,o=!1,w=!1,s=!1,c=0,l="",a=!1,e=".ctaTracker";this.init=function(n){if(!p){p=!0;this.options=t.extend(b,n);c=Number(u.data("ctaid"));l=String(u.data("url"));var i=u.closest(".cta-manager");i.length==0&&c!=null&&c>0&&(e+=String(c),r._initEventHandlers())}};this._initEventHandlers=function(){n.onScroll(r._handleWinScroll,r);u.find("img, a, button").on("click",r._onButtonClick);u.find("form").on("submit",r._onButtonClick);u.find('form input[type="email"]').on("focus",r._onInputFocus);h.one("mouseover"+e+",mouseout"+e+",touchstart"+e+",touchend"+e+",touchmove"+e+",mousemove"+e+",pointer"+e+",scroll"+e+",wheel"+e+",keydown"+e+"",r._onPageInteracted);h.on("resize",r._handleWinResize)};this._onButtonClick=function(n){if(u.hasClass("cta-article-end")){var i=t(n.target);i.is("img, a, button")||(i=i.closest("a, button"));i.is("a")&&(a=!0,l=i.attr("href"))}return a||(n.preventDefault(),n.stopImmediatePropagation()),r._logNewClick(),a};this._onInputFocus=function(){r._prepareInput()};this._onPageInteracted=function(){v||(v=!0,h.off(e),r._handleWinScroll())};this._handleWinScroll=function(){if(v&&!o){var n=u[0].getBoundingClientRect();n.top<y-Math.min(n.height/2,100)&&(o||r._logNewImpression())}};this._handleWinResize=function(){y=h.height()};this._logNewImpression=function(){o||(o=!0,t.post("/ajax/getimpressionid/",{ctaid:c},function(n){n.Response.Value.Success?r._onGotImpressionID(n.Response.Value.ImpressionID):o=!1}))};this._onGotImpressionID=function(n){f=n;w&&!s&&r._logNewClick()};this._prepareInput=function(){if(!s&&u.hasClass("cta-newsletter")){if(f==""||f==null){o||r._logNewImpression();setTimeout(function(){r._prepareInput()},10);return}var n=u.find('form input[name="'+f+'"]').first();n.length==0&&(u.find("form").append('<input type="hidden" name="'+f+'" value=""/>'),n=u.find('form input[name="'+f+'"]').first());t.post("/ajax/preparectanewslettersignup/",{ctaimpid:f,l:l},function(t){if(t.Response.Error!=null){console.log(response.Error.ErrorText);return}t.Response.Value.Success&&n.val(t.Response.Value.l)}).error(function(){})}};this._logNewClick=function(){if(!s){if(w=!0,f==""||f==null){o?setTimeout(function(){r._logNewClick()},10):r._logNewImpression();return}if(!s)if(s=!0,u.hasClass("cta-newsletter")){var e=u.find('form input[name="newslettername"]'),i=u.find('form input[name="newsletteremail"]');t.post("/ajax/logctanewslettersignup/",{ctaimpid:f,l:u.find('form input[name="'+f+'"]').val(),n:e.val(),e:i.val()},function(t){t.Error!=null?(s=!1,n.Alerts.DisplayErrorNotification(t.Error.ErrorText),i.focus()):t.Response.Value.Success&&(n.Alerts.Show("Woo Hoo! You're subscribed!",!1),n.CloseAnimation(u))}).error(function(){s=!1})}else t.post("/ajax/logctaclick/",{ctaimpid:f},function(){a||n.NavigateTo(l)}).error(function(){a||n.NavigateTo(l)})}}};t.fn.ctaTracker=function(i){return this.each(function(){var r=t(this),u;if(r.data("ctaTracker"))return r.data("ctaTracker");u=new n.CtaTracker(r);r.data("ctaTracker",u);u.init(i!=null?i:null)})}}(window.WHT=window.WHT||{},jQuery),function(n,t){var h={LoadingDialogTemplate:'<div class="actiongroup"><ul><li class="centered-divide"><i class="loading-spinner"><\/i><div class="padtop-small">Loading...<\/div><\/li><\/ul><\/div>',LoadingElementTemplate:"<div class='loading-element mgt txt-center'><img src='/images/ajax-loader.gif'/><\/div>"},u=-1,f=-1,e=[],i={},o=window.navigator&&window.navigator.msPointerEnabled,r=t(window),c=t(document),l=t(window,document),a=t("body");n.rootDomains=[String(document.location.host)];n.Scheme=new function(){var t=this;this.https=document.location.protocol==="https:";this.http=!this.https;this.scheme=this.https?"https":"http";this.protocol=this.scheme+"://";this.correctNative=function(i){var r=new RegExp("(http"+(t.http?"s":"")+"://)(([a-z0-9-]+\\.)*("+n.rootDomains.join("|").replace(new RegExp(n.hostSuffix.replace(new RegExp("\\.","g"),"\\."),"ig"),"").replace(new RegExp("\\.","g"),"\\.")+")"+(n.hostSuffix?"("+n.hostSuffix.replace(new RegExp("\\.","g"),"\\.")+")?":"")+")(/)?","i");return i.indexOf(t.https?"http://":"https://")>-1?i.replace(r,t.protocol+"$2/"):i};this.correctVerified=function(i){var r=new RegExp("(http"+(t.http?"s":"")+"://)(([a-z0-9-]+\\.)*("+n.rootDomains.join("|").replace(new RegExp(n.hostSuffix.replace(new RegExp("\\.","g"),"\\."),"ig"),"").replace(new RegExp("\\.","g"),"\\.")+")"+(n.hostSuffix?"("+n.hostSuffix.replace(new RegExp("\\.","g"),"\\.")+")?":"")+")(/)?","i");return i.indexOf(t.https?"http://":"https://")>-1?i.replace(r,t.protocol+"$2/"):i};this.correct=function(n){var i=new RegExp("(http"+(t.http?"s":"")+"://)(([a-z0-9-]+\\.)+([a-z0-9]+))/","i");return n.indexOf(t.https?"http://":"https://")>-1?n.replace(i,t.protocol+"$2/"):n}};n.templates=h;n.loggedInUser={};n.currentWorld={};n.urlBase="";n.imgUrlBase="";n.imgFormats=[];n.oHero={id:0,title:"",img:""};n.oRootHero={id:0,title:"",img:""};n.changingPage=!1;n.callingUnload=!1;n.isFullScreen=function(){return(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)!=null};n._raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)};n._scrollTriggeringAnimationFrameLoop=function(){var t=n.getPageYOffset(),i=n.getPageXOffset();(t!==u||i!==f)&&n.HandleWindowScroll.apply(n,[n._generateScrollEventObj(t,i)]);n._raf.call(window,n._scrollTriggeringAnimationFrameLoop)};n.init=function(u){var h,y,c,s,f,a,p,e,v,o;for(u=t.extend({ajaxControllerURL:"/ajax/",urlBase:"https://www.wonderhowto.com",imgUrlBase:"https://img.wonderhowto.com",imgFormats:[],activeBrowseBase:"",linkedWorlds:[],rootDomains:[],wmTest:"(wonderhowto)",hpUpdateID:0,debugMode:!1,hostSuffix:"",consented:!0,socialLinks:{facebook:"",twitter:"",youtube:"",pinterest:"https://pinterest.com/WonderHowTo"}},u),n.socialLinks=u.socialLinks,u.loggedInUser&&(n.loggedInUser=t.extend(n.loggedInUser,u.loggedInUser)),u.currentWorld&&(n.currentWorld=t.extend(n.currentWorld,u.currentWorld)),u.alerts&&(n.Alerts.alertsList=u.alerts),u.imgFormats&&(n.imgFormats=t.extend(n.imgFormats,u.imgFormats)),u.hero&&(n.oHero=t.extend(n.oHero,u.hero)),u.rootHero&&(n.oRootHero=t.extend(n.oRootHero,u.rootHero)),n.ajaxControllerURL=u.ajaxControllerURL,n.urlBase=u.urlBase,n.imgUrlBase=u.imgUrlBase,n.hostSuffix=u.hostSuffix,n.rootDomains=u.rootDomains,n.wmTest=u.wmTest,n.hpUpdateID=u.hpUpdateID,n.hasConsented=u.consented,n.activeBrowseBase=u.activeBrowseBase,n.activeArticle=null,n.linkedWorlds=u.linkedWorlds,n.$headerBGImage=t("#header-bg-image").toggleClass("immediate",!1),n.skipHeaderBGTransition=function(){n.$headerBGImage.toggleClass("immediate",!0);setTimeout(function(){n.$headerBGImage.toggleClass("immediate",!1)},10)},n.rootDomainHomes=[],n.commonCodeLanguages=["unknown","plaintext","htmlmixed","htmlembedded","clike","javascript","python","markdown","clojure","css","haskell","http","jinja2","ruby","sass","perl","php","powershell","lua","go","shell","swift","sql","vb","vbscript","xml","yaml"],f=0;f<n.rootDomains.length;f++)n.rootDomainHomes.push(n.Scheme.correctNative("http://"+(n.rootDomains[f].indexOf(".news")>-1?"next.":"www.")+n.rootDomains[f]+"/"));if(n.Alerts&&n.Alerts.alertsList&&n.Alerts.alertsList.length>0)for(h=0;h<n.Alerts.alertsList.length;h++)n.Alerts.Show(n.Alerts.alertsList[h]);if(function w(t){window.setTimeout(function(){t=t||{};n.activeArticle!=null&&n.activeArticle.avid!=null&&(t={avid:n.activeArticle.avid});n.KeepAlive(t);w(t)},Number(n.loggedInUser.IsUser?.25:5)*6e4)}(),i.header=i.header||t(".page-header"),i.userInfo=i.userInfo||i.header.find(".user-info"),i.logo=i.logo||i.header.find("#logo"),i.worldIcon=i.worldIcon||i.header.find(".world-icon"),i.worldsList=i.header.find(".worlds-list"),i.moreWorldsLink=i.moreWorldsLink||i.header.find(".more-worlds-link"),n.World.init(),n.Header.init(),n.NavBar=new n.WHTNav,n.NavBar.init(),n.ContentNav.init(),u.keywee===!0)t("a").on("click",function(){var i=t(this),n,r;return(i.is("a")||(i=i.closest("a")),i.length==0)?!0:(n=String(i.attr("href")),r=n.split("/"),r.length>=3&&(n=r[2].toLowerCase()),n.indexOf("amazon.com")>-1&&n.indexOf("amazon.com")==n.length-10&&(!function(n,t,i,r,u,f,e){n.fbq||(u=n.fbq=function(){u.callMethod?u.callMethod.apply(u,arguments):u.queue.push(arguments)},n._fbq||(n._fbq=u),u.push=u,u.loaded=!0,u.version="2.0",u.queue=[],f=t.createElement(i),f.async=!0,f.src=r,e=t.getElementsByTagName(i)[0],e.parentNode.insertBefore(f,e),n.fbq("init","2407258782860537"))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("trackSingle","2407258782860537","Lead"),console.log("keywee")),!0)});n.OnDocumentReady();n.WinHeight=r.height();n.loggedInUser.IsUser&&n.activeArticle==null&&setTimeout(function(){n.KeepAlive()},300);r.load(function(){n.ActivePlacements&&n.ActivePlacements._onLoad()});n._scrollTriggeringAnimationFrameLoop();l.on("resize",function(){(n.skipHeaderBGTransition&&n.skipHeaderBGTransition(),n.isFullScreen())||(n.WinHeight=r.height(),n.TriggerWinScroll(!0))});if(n.TriggerWinScroll(!0),n.WorldHeaders={},n.UpdateWorldHeaderCache(n.linkedWorlds,!0),y=function(){if(n.changingPage=!0,n.activeArticle!=null&&n.activeArticle.avid!=null){if(n.callingUnload)return;n.callingUnload=n.changingPage=!0;n.KeepAlive({avid:n.activeArticle.avid},null,!0)}},r.unload(function(){y()}),window.onbeforeunload=function(){y()},n.resetIdleTO=function(){},!u.debugMode&&!n.loggedInUser.IsUser){for(c=window.location.toString(),s=[function(){},0],f=0;f<n.rootDomains.length;f++)if(c.indexOf(n.rootDomains[f])>-1){a=n.rootDomainHomes[f];s[0]=function(){t.post("/ajax/checkforhpupdates",{id:n.hpUpdateID},function(t){t.Response.Value.update&&t.Response.Value.id>0&&n.NavigateTo(a,c==a)})};s[1]=c==a?9e5:54e5;break}n.resetIdleTO=function(){(window.____iIdleTO!=null&&clearTimeout(window.____iIdleTO),window.____iIdleTO=null,window.____bNoIdleTO)||(window.____iIdleTO=setTimeout(s[0],s[1]))};n.resetIdleTO()}if(p=!1,r.load(function(){if(!p){p=!0;t(".ad-top").css("height","auto");n.toggleHeaderBGAlt=function(){var t=n.$headerBGImage.height();r.scrollTop()<t-90&&t>90?n.$headerBGImage.toggleClass("alt"):(n.skipHeaderBGTransition(),n.$headerBGImage.toggleClass("alt",!1))};r.width()<768&&(n.toggleHeaderBGAlt(),setInterval(n.toggleHeaderBGAlt,25e3));r.on("mousemove",function(){n.resetIdleTO()})}}),e=t(".compare-product-select"),e.length>0){v=e.find(".select-group");o=e.find("select");o.each(function(){t(this).val("-1")});v.each(function(){var n=t(this);Number(n.data("index"))>0&&n.hide()});o.on("change",function(){var n=[];o.each(function(){var i=t(this).val();Number(i)>0&&n.push(i)});v.each(function(){var i=t(this);n.length>=Number(i.data("index"))*2&&i.show()})});e.on("click","button",function(i){var r=t(i.target),f,u;r.is("button")||(r=r.closest("button"));f=r.data("action");switch(f){case"product-select-reset":o.each(function(){t(this).val("-1")});v.each(function(){var n=t(this);Number(n.data("index"))>0&&n.hide()});break;case"product-select-compare":if(u=[],o.each(function(){var n=t(this).val();Number(n)>0&&u.push(n)}),u.length<2){n.Alerts.Show("Please select at least 2 products to compare.");return}n.NavigateTo("/compare/?filter="+keyenc("P"+u.join(",")));break;case"product-select-compare-all":n.NavigateTo("/compare/")}});e.on("click",".cta-link",function(){t.ajax({url:n.BuildAJAXUrl("ctac"),type:"POST",dataType:"json",data:{ctaimpid:___ctaimpid},async:!1,success:function(){}})})}};n.UpdateWorldHeaderCache=function(){};n.clearRedirect=function(){window.____iIdleTO!=null&&(clearTimeout(window.____iIdleTO),window.____iIdleTO=null,window.____bNoIdleTO=!0)};n.animateNumber=function(n,i,r,u,f){(f=f||parseInt(t(n).text(),10),f==i||i>1e4||f>1e4)||t(n).data("from-number",f).animate({val:parseInt(i,10)},{duration:r==null?1500:parseInt(r,10),easing:u||"easeInOutCirc",step:function(n,i){n=parseInt(t(this).data("from-number"),10);t(this).text(n+parseInt((i.end-n)*i.state,10))}})};n.setActiveBrowseBase=function(t){t=t==null||typeof t!="string"?"":t;var i=atob(t).split("|");(i.length>=11&&(i[1]=="0"?t="":(i[6]="1",i[7]="0",i[8]="0",i[9]="0",i[10]="1",t=btoa(i.join("|")))),t!=n.activeBrowseBase)&&(n.activeBrowseBase=t)};n.WHTNav=function(){var i=this,e=t("#top-nav"),nt=e.find(".nav-menu-toggle"),y=e.find(".nav-search-toggle"),tt=t(".sidebar-user-menu .user-menu-loginsignup"),it=t(".sidebar-user-menu .user-menu-notifications"),rt=t(".sidebar-user-menu .user-menu-inbox"),ut=t(".sidebar-user-menu .user-menu-drafts"),ft=t(".sidebar-user-menu .user-menu-settings"),et=t(".sidebar-user-menu .user-menu-nav"),ot=t(".sidebar-user-menu .user-menu-logout"),c=t("#searchbox"),k=e.find(".search-form"),d=t(".page-header"),a=e.find(".notifications-bubble"),f=t("#main-wrapper"),st=t("#header-offset"),l=e.find(".nav-menu-block"),r=t("#sidebars"),u=t("body"),o=!1,p=!1,w=!1,v=0,s="",g="",b=[];this.init=function(){a.css({display:"none"}).addClass("init");w=!0;g=r.find(".sidebar-nav-menu .sidebar-pad").html();r.find(".sidebar-nav-menu").remove();n.onScroll(function(n){var t=f.offset().top;w&&n.y>200&&(w=!1,a.hasClass("hasNotifications")&&(a.css({display:""}),setTimeout(function(){a.addClass("open")},200)))},i);nt.on("click",i._toggleNavMenuList);y.on("click",i._onSearchClick);tt.on("click",function(){n.ShowLoginScreen()});it.on("click",function(){i._toggleUserMenu("notifications")});rt.on("click",function(){i._toggleUserMenu("inbox")});ut.on("click",function(){i._toggleUserMenu("drafts")});ft.on("click",function(){i._toggleUserMenu("settings")});et.on("click",function(){i._toggleUserMenu("nav")});ot.on("click",function(){t.post("/account/logout",{},function(){n.ssSync()});i._closeSidebar()});k.on("submit",function(n){var t=c.val().trim();if(t==""||t.toLowerCase()=="search")return i._closeSearch(),n.preventDefault(),!1})};this.createAjaxDialog=function(f){var s=(new Date).getTime().toString(),c={ContainerID:s,hideContentWhileOpen:!1,Title:"",AdditionalData:{},onOpen:function(){},beforeClose:function(){}},e,o;f=t.extend(c,f);e=t("#"+f.ContainerID);e.length<1&&(r.append('<div class="sidebar '+f.ContainerID+'"><div class="center-frame"><div class="menu dialog-menu"><div class="sidebar-pad"><div class="menu-section-heading">'+n.EncodeEntities(f.Title)+'<\/div> <div id="'+f.ContainerID+'" class="dialog-content"><\/div><\/div><\/div><\/div><\/div>'),e=t("#"+f.ContainerID));e.html(h.LoadingDialogTemplate);o=r.find(".sidebar."+f.ContainerID);i._openSidebar(f.ContainerID,!f.hideContentWhileOpen);t.post(f.URL,f.AdditionalData,function(r){if(typeof r!="string"&&r.Error!=null&&r.Error.ErrorText!=null){i.close();n.Alerts.DisplayErrorNotification(r.Error.ErrorText);return}e.html(r);o.scrollLeft(0);o.scrollTop(0);t.validator.unobtrusive.parseDynamicContent("#"+f.ContainerID);n.OnElementReady(e);f.onOpen.apply(e);o.scrollLeft(0);o.scrollTop(0);u.hasClass("prep-sidebar")&&window.scrollTo(0,0);i.__onBeforeSidebarClose=function(){f.beforeClose.apply(e);i.__onBeforeSidebarClose=null;delete i.__onBeforeSidebarClose}})};this.close=function(){i._closeSidebar()};this._toggleNavMenuList=function(){if(l.hasClass("search-active")){i._closeSearch();return}p||(o?i._closeSidebar():i._toggleUserMenu(),p=!0,setTimeout(function(){p=!1},500))};this._openSidebar=function(h,c){var g,k,w,p,a,nt;if(l.hasClass("search-active")){i._closeSearch();setTimeout(function(){i._openSidebar(h,c)},500);return}if(g=r.find(".sidebar."+h),o){s!=h&&(b.push(s),r.find(".sidebar").css("display","none"),g.css("display",""),window.scrollTo(0,0),s=h);return}n.Header.resetAdVisibility(!0);v=Math.round(window.pageYOffset||document.documentElement.scrollTop);k=Math.round(st.height());w=!1;r.find(".sidebar").off("mousedown").off("mouseup").css("display","none").filter("."+h).css("display","").on("mousedown",function(n){w=o&&t(n.target).closest(".menu").length==0}).on("mouseup",function(n){o&&t(n.target).closest(".menu").length==0&&w&&i._closeSidebar();w=!1});if(p=f[0].getBoundingClientRect().top*-1,f.find(".content-nav .lockable-anchor").each(function(){var i=t(this),n=i.closest(".content-nav").first().css("top"),r=i.find(".lockable-region");n=n!=null&&n!=""?Number(n.substring(0,n.length-2)):0;r.hasClass("locked")&&(i.css({position:"absolute",top:p-n+"px"}),r.addClass("locked").css({position:"absolute",top:u.hasClass("subworld")?"90px":"60px"}))}),a=Math.round(e.offset().top),nt=v==a,a<=270&&a>30&&(a+=30),v<a){p+=a;t("html, body").animate({scrollTop:a},100,"swing",function(){setTimeout(function(){i._openSidebar(h,c)},10)});return}u.toggleClass("sidebar-tall-nav",nt);p>=0?(u.addClass("prep-sidebar"),f.scrollTop(p)):(f.css({top:-1*p+"px"}),u.addClass("prep-sidebar"),f.scrollTop(0));d.css({position:"fixed",top:-1*(p+(k>0?k:u.hasClass("subworld")?90:60))+"px"});window.scrollTo(0,0);setTimeout(function(){u.addClass(c===!0?"show-sidebar":"show-sidebar hide-content");setTimeout(function(){y.hide()},200)},50);o=!0;s=h};this._closeSidebar=function(){if(typeof i.__onBeforeSidebarClose=="function"&&i.__onBeforeSidebarClose(),b.length>0){var n=b.pop();r.find(".sidebar").css("display","none").filter("."+n).css("display","");window.scrollTo(0,0);s=n;return}y.show();u.removeClass("show-sidebar hide-content");setTimeout(function(){d.css({position:"",top:""});u.removeClass("prep-sidebar show-sidebar hide-content");f.css({top:""}).scrollTop(0);f.find(".content-nav .lockable-anchor").css({position:"",top:""}).find(".lockable-region").css({position:""});window.scrollTo(0,v)},200);o=!1;s=""};this._onSearchClick=function(){if(!l.hasClass("search-active")){i._openSearch();return}k.submit()};this._openSearch=function(){c.show().transition("0.2s");setTimeout(function(){l.addClass("search-active");setTimeout(function(){c.focus()},350)},50)};this._closeSearch=function(){l.removeClass("search-active");setTimeout(function(){c.transition("");setTimeout(function(){c.hide()},50)},350)};this._toggleUserMenu=function(u,f){i._openSidebar("sidebar-user-menu",!0);var o=r.find(".sidebar-user-menu"),e=o.find(".sidebar-tab-contents");switch(u){case"inbox":f=f||"";break;case"drafts":f="";break;case"settings":f=f||"";break;case"notifications":f="";break;case"profile":n.NavigateTo(t(".sidebar-user-menu .my-profile a").first().attr("href"));i._closeSidebar();return;default:u="nav";f=""}if(u!="nav"&&!n.loggedInUser.IsUser){n.ShowLoginScreen();return}if(o.find(".icon-menu-tabs button").removeClass("active").filter(".user-menu-"+u).addClass("active"),e.empty().html(h.LoadingDialogTemplate),u=="nav"){e.html(g);n.OnElementReady(e);return}t.post("/ajax/getusermenu",{tab:u,subsection:f==null?"":f},function(i){o.find(".icon-menu-tabs button.user-menu-"+u).hasClass("active")&&(e.html(i),t.validator.unobtrusive.parseDynamicContent(e),n.OnElementReady(e))})};this.messageUser=function(n){i._toggleUserMenu("inbox",n)}};n.createAjaxDialog=function(t){n.NavBar.createAjaxDialog(t)};n.AddDoAfterLoginCallback=function(n){if(typeof n=="string")n=eval("function(){"+n+"};");else if(typeof n!="function")throw"Callbacks can only be functions or strings to be evaluated as functions.";e.push(n)};n.ClearDoAfterLoginCallbacks=function(){e.length=0};n.DeleteAnimation=function(n,i,r){n=t(n);n.animate({backgroundColor:"#fb6c6c"},200,function(){n.slideUp(200,function(){n.remove();i&&(r?i.apply(r,[]):i())})})};n.CloseAnimation=function(n,i,r){n=t(n);n.animate({backgroundColor:"#7abd13"},200,function(){n.slideUp(200,function(){n.remove();i&&(r?i.apply(r,[]):i())})})};n.RunDoAfterLoginCallbacks=function(n){var t=0;for(var i in e)e.hasOwnProperty(i)&&(e[i].apply(this),t++);n!=null&&typeof n=="function"&&n.apply(this,[t>0])};n.ssSync=function(i,r){for(var s,f=String(document.location),e=f.substring(8,f.indexOf("/",8)),o=[],h="",u=0;u<n.rootDomains.length;u++)(s=e.indexOf(n.rootDomains[u]),s>-1&&(e=e.substr(s),e==n.rootDomains[u]))||o.push(n.Scheme.correctNative("http://"+(n.rootDomains[u].indexOf(".news")>-1?"next.":"www.")+n.rootDomains[u]+"/ajax/sssync/"));for(h=btoa(o.join("|")),u=0;u<o.length;u++){t("<form><\/form>").attr({method:"post",action:o[u],style:"position:absolute;top:-1000px;left:-1000px;visibility:hidden;"}).append(t('<input type="hidden" name="key"/>').attr("value",i||"")).append(t('<input type="hidden" name="alt"/>').attr("value",r||f)).append(t('<input type="hidden" name="q"/>').attr("value",h)).appendTo("body").submit();return}n.NavigateTo(r||f)};n.BuildAJAXUrl=function(t,i){var r=t,u="",f,e;if(typeof i!="undefined"&&i!=null){f=[];for(e in i)f.push(e+"="+encodeURI(i[e]));u=f.join("&")}return n.ajaxControllerURL+r+(u.length>0?(r.indexOf("?")>-1?r.indexOf("&")>-1?"&":"":"?")+u:"")};n.onScroll=function(t,i){n._scrollHandlers=n._scrollHandlers||{};n._scrollHandlersLastID=n._scrollHandlersLastID||1;t.__scrollHandlerID==null&&(t.__scrollHandlerID=n._scrollHandlersLastID++,n._scrollHandlers[t.__scrollHandlerID]={h:t,s:i||t})};n.offScroll=function(t){n._scrollHandlers=n._scrollHandlers||{};t.__scrollHandlerID!=null&&(n._scrollHandlers[t.__scrollHandlerID].h=null,n._scrollHandlers[t.__scrollHandlerID].s=null,n._scrollHandlers[t.__scrollHandlerID]=null,delete n._scrollHandlers[t.__scrollHandlerID],t.__scrollHandlerID=null,delete t.__scrollHandlerID)};n.scrollTo=function(t,i){window.scrollTo(t,i);n.TriggerWinScroll(!0)};n.TriggerWinScroll=function(t){n.HandleWindowScroll(n._generateScrollEventObj(n.getPageYOffset(),n.getPageXOffset()),t)};n._generateScrollEventObj=function(n,t){var i={x:t,y:n,fx:f,fy:u,dx:t-f,dy:n-u,changed:n!==u||t!==f};return f=t,u=n,i};n.getPageYOffset=typeof pageYOffset!="undefined"?function(){return window.pageYOffset}:function(){return r.scrollTop()};n.getPageXOffset=typeof pageXOffset!="undefined"?function(){return window.pageXOffset}:function(){return r.scrollLeft()};n.HandleWindowScroll=function(t,i){if(t.changed===!0||i===!0){n.resetIdleTO!=null&&n.resetIdleTO();for(var r in n._scrollHandlers||{})n._scrollHandlers[r].h.apply(n._scrollHandlers[r].s,[t])}};n.HandleWindowScrollByPercent=function(n){var i=Math.floor((Math.max(t("#bokeh .current img").width(),t("#bokeh .current").width())-r.width())*-1*n);t("#bokeh .current").css("background-position",i+"px 50%")};n.KeepAlive=function(i,r,u){n.hasConsented&&(i=t.extend({},{nv:!1,aid:0,avid:0,pop:!1},i),t.ajax({url:n.BuildAJAXUrl("keepalive"),type:"POST",success:function(i){var u,e,f,o;if(t.isFunction(r)&&r(i),i!=null&&i.Response!=null&&i.Response.Value!=null&&i.Response.Value!==!0&&(i.Response.Value.KudosCount!=null&&n.animateNumber(t(".page-header .user-info .credits > a"),i.Response.Value.KudosCount),i.Response.Value.ReputationCount!=null&&n.animateNumber(t(".page-header .user-info .kudos > a"),i.Response.Value.ReputationCount),i.Response.Value.TotalNotificationsCount!=null,i.Response.Value.Alerts!=null))for(u=0;u<i.Response.Value.Alerts.length;u++){e=i.Response.Value.Alerts[u];f=!1;for(o in n.Alerts.alertsList)if(n.Alerts.alertsList.hasOwnProperty(o)&&n.Alerts.alertsList[o].TimeStamp==e.TimeStamp){f=!f;break}f===!1&&n.Alerts.Show(e)}},dataType:"json",data:i,async:u===!0&&i.avid?!1:!0}))};n.NavigateTo=function(t,i){var r,f,u;n.changingPage=!0;n.ToggleProgressCursor(!0);t=String(t);r=String(window.location);r.indexOf("#")>-1&&(f=r.substring(0,r.indexOf("#")),t.indexOf("#")>-1&&(u=t.substring(0,t.indexOf("#")),u==f&&(t=u)));i===!0?window.location.replace(t):window.location=t};n.ShowLoginScreen=function(t){return n.hasConsented||n.NavigateTo("/"),t=t||"",n.NavBar.createAjaxDialog({URL:"/ajax/getloginsignupform/",ContainerID:"loginDialogContainer",Title:"Login",AdditionalData:{loginMessage:t}}),!1};n.ShowConsentForm=function(){n.NavBar.createAjaxDialog({URL:"/ajax/getconsentform/",ContainerID:"consentContainer",Title:"Welcome!",AdditionalData:{},beforeClose:function(){confirm("Closing this notice to continue use of this site indicates that you agree to our terms of use agreement and privacy policy, including our use of cookies to allow the site to function, analyze traffic, and for ads measurement purposes. You can learn more about how we use cookies by reading our terms of use agreement and privacy policy. You can always change your mind later.\n\nIf you do not agree, click Cancel.")?n.NavigateTo("/consent-granted/"):n.NavigateTo("/consent-denied/")}})};n.ToggleProgressCursor=function(n){n?t("body").css("cursor","progress"):t("body").css("cursor","")};n.GetUrlSafeString=function(n){for(var i,t="",u=n.toLowerCase().trim("- \t\r\n"),r=0;r<u.length;r++)i=u.charCodeAt(r),i>47&&i<58||i>96&&i<123?t+=u.charAt(r):(i==32||i==45)&&(t+="-");for(t.indexOf("-world")==t.length-6&&(t=t.replace("-world","")),t.indexOf("-world-")>0&&(t=t.replace("-world-","-"));t.indexOf("--")>-1;)t=t.replace("--","-");return t};n.OnDocumentReady=function(){n.OnElementReady();var t=new n.Notifications;t.init();(window.location.hash=="#_=_"||window.location.hash=="#")&&(window.location.hash="")};n.OnElementReady=function(i){i=i||c;t.fn.evenWrap&&i.find("#featured-story, .graphic-text-block.headline .text").evenWrap({minLines:2});i.find(".lazy-img").lazyImgSrc();Modernizr.input.placeholder||i.find("[placeholder]").placeholder();i.find(".drop-down").dropdown();i.find(".lockable-region").lockable();i.find(".lockable-toolbox").toolbox();i.find(".hscrollable").touchscroll({scrollX:!0,scrollY:!1,eventPassthrough:!0,preventDefault:!0,scrollbars:!1,mouseWheel:!1,interactiveScrollbars:!1});i.find(".article-list, .article-list-collection").articleslist();i.find(".settings-container").settingsMenu();i.find(".item-kudos-container").kudosGiver();i.find("input.checkboxSlider").checkBoxSlider();i.find(".localtimestamp").localTimeStamp();i.find(".pqph").pullQuoteReorder();i.find("article > section > h2, article > section > h3, article > section > h4").whtStepStyle();t.fn.codeSyntaxHighlighter&&i.find("pre.syntax-highlighted").codeSyntaxHighlighter();i.find(".cta-manager").ctaManager();i.find(".wht-cta").ctaTracker();i.find(".btn-share").off("click.btn-share").on("click.btn-share",function(i){var f=t(i.target),o;if(f.hasClass("btn-share")||(f=f.closest(".btn-share")),!(f.length<1)){var s=f.data("action"),h=window.location.toString(),c=encodeURIComponent(h),e=String(document.title),l=encodeURIComponent(e),a=t("article.article-container .cover-image img").attr("src"),v=encodeURIComponent(a),r="",u="clickShare";switch(s){case"share-facebook":r="https://www.facebook.com/sharer/sharer.php?u={0}&t={1}";u+="Facebook";break;case"share-twitter":r="https://twitter.com/share?url={0}&text={1}";u+="Twitter";break;case"share-gplus":r="https://plus.google.com/share?url={0}";u+="GooglePlus";break;case"share-reddit":r="https://reddit.com/submit?url={0}&title={1}";u+="Reddit";break;case"share-pinterest":r="https://pinterest.com/pin/create/button/?url={0}&media={2}&description={1}";u+="Pinterest"}r!=""&&(window.ga&&ga("send","event","ShareBtn",u,e),o=window.open(r.format(c,l,v)),o==null&&n.Alerts.Show("Please disable your pop-up blocker to share.",!0))}});t(".content-nav a").off("click.eventTracker").on("click.eventTracker",function(n){var i=t(n.target).closest(".article-list"),r=i.data("title-base");window.ga&&ga("send","event","SideNav","postClick",r)});t(".content-nav .list-toggler li").off("click.eventTracker").on("click.eventTracker",function(n){var i=t(n.target);(i.is("li")||(i=i.closest("li")),i.length!=0)&&window.ga&&ga("send","event","SideNav","listToggle",i.text().trim(),i.data("filter-sort"))});t(".related-scroller a").off("click.eventTracker").on("click.eventTracker",function(n){var i=t(n.target).closest(".article-list"),r=i.data("title-base");window.ga&&ga("send","event","RelatedList","postClick",r)});Modernizr.textoverflow||i.find(".longtxt").fixLongText();r.width()>=768&&(i.find(".img-crop-zoom-rotate").imgRolloverEffect(),i.find(".tooltip").aToolTip({fixed:!0}))};n.ToTitleCase=function(n){var u;try{n=n.replace(/['‘’`]/ig,"'");for(var i="(a|an|and|as|at|but|by|en|for|from|if|in|into|onto|nor|of|on|or|the|to|v[.]?|via|vs[.]?|with)",t="([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`‘’{|}~-—]+)",h=function(n){return n.toLowerCase()},r=function(n){return n.substr(0,1).toUpperCase()+n.substr(1)},c=function(n){return/[A-Za-zÀÁÂÃÄÅàáâãäåÒÓÔÕÖØòóôõöøÈÉÊËéèêëÇçÌÍÎÏìíîïÙÚÛÜùúûüÿÑñ]\.[A-Za-zÀÁÂÃÄÅàáâãäåÒÓÔÕÖØòóôõöøÈÉÊËéèêëÇçÌÍÎÏìíîïÙÚÛÜùúûüÿÑñ]/.test(n)?n:r(n)},l=function(n,t,i){return t+r(i)},a=function(n,t,i){return r(t)+i},e=function(n,t,i,u){return t+r(i)+u},v=function(n){return n.toUpperCase()},y=function(n,t,i){return t.toUpperCase()+i},f=[],o=/(—| \(|[:\.;\?!\)] )|(?: |^)["Ò]/g,p=/\b([A-Za-zÀÁÂÃÄÅàáâãäåÒÓÔÕÖØòóôõöøÈÉÊËéèêëÇçÌÍÎÏìíîïÙÚÛÜùúûüÿÑñ][a-zàáâãäåòóôõöøéèêëçìíîïùúûüÿñ.'Õ]*)\b/g,s=0;;)if(u=o.exec(n),f.push(n.substring(s,u?u.index:n.length).replace(p,c).replace(RegExp("\\b"+i+"\\b","ig"),h).replace(RegExp("^"+i+"\\b","i"),r).replace(RegExp("^"+t+i+"\\b","g"),l).replace(RegExp("\\b"+i+t+"\\b","ig"),a).replace(RegExp(t+i.replace(/\[\.\]\?/g,"")+t,"g"),e)),s=o.lastIndex,u)f.push(u[0]);else break;n=f.join("").replace(RegExp("\\b"+i+"("+t+")*$","i"),r).replace(/\bon[ ]?([&\/]|and|in|for)[ ]?\b/ig,r).replace(/ V(s?)\. /ig," v$1. ").replace(RegExp("(^| )a"+t+" ","ig"),"$1A$2 ").replace(RegExp(t+i.replace(/\[\.\]\?/g,"")+t,"g"),e).replace(/(['Õ])S\b/ig,"$1s").replace(/\b(AT&T|Q&A)\b/ig,v).replace(/\b([OU]'[a-zàáâãäåòóôõöøéèêëçìíîïùúûüÿñ])([a-zàáâãäåòóôõöøéèêëçìíîïùúûüÿñ])/ig,y)}catch(w){}return n};n.DecodeEntities=function(){function t(t){return t&&typeof t=="string"&&(t=t.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,""),t=t.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,""),n.innerHTML=t,t=n.textContent,n.textContent=""),t}var n=document.createElement("div");return t}();n.EncodeEntities=function(){function t(t){if(t&&typeof t=="string"){n.innerHTML="";var i=document.createTextNode(t);n.appendChild(i);t=n.innerHTML}return t}var n=document.createElement("div");return t}();n.GetKiloFormat=function(n){if(n=n+"",n<1e4)return n;var t=(n/1e3).toFixed(0);return t+"k"};n.Throttle=function(t,i){var r,u,f,e,o,s,h=n.Debounce(function(){o=e=!1},i);return function(){r=this;u=arguments;var n=function(){f=null;o&&(s=t.apply(r,u));h()};return f||(f=setTimeout(n,i)),e?o=!0:(e=!0,s=t.apply(r,u)),h(),s}};n.Debounce=function(n,t,i){var r,u;return function(){var f=this,e=arguments,o=function(){r=null;i||(u=n.apply(f,e))},s=i&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&(u=n.apply(f,e)),u}};n.DynamicListPaging=function(i,r){var a=t.extend({activeArticleID:-1,type:n.DynamicListPaging.TypeArticles,scrollPreloadOffset:-.5},r||{}),f=this,b=t("body"),u=t(i),k=u.hasClass("article-list-collection"),o=u.closest(".lockable-region"),s=o.length>0,v=!1,c=!1,e=null,h=null,p=null,l="",w=!1,y=null;this.init=function(n){if(Number(u.data("page-number"))==1&&document.title.indexOf(u.data("title-base"))==-1&&(f._page1Title=document.title),f._initReferencesAndEventHandlers(n),c&&History&&History.enabled){Modernizr.history?History.savedStates.length>1&&f._handleHistoryStateChange(!0):(History.options.disableSuid=!0,window.location.href.indexOf("#")>-1&&f._handleHistoryStateChange(!0));var t=u.data("activepagepath");y={pageKey:u.data("activepagekey"),pagePath:t.substring(t.indexOf("/",8)),asReplace:!0};History.Adapter.bind(window,"statechange",f._handleHistoryStateChange)}};this._initReferencesAndEventHandlers=function(i){var l,y;if(h=k?u.find(".article-list"):u,e=u.find(".paging"),p=u.find(".btn-next, .btn-prev"),v=e.hasClass("auto-load-on-scroll"),c=e.hasClass("primary-for-page"),s){var b=!0,r=o.find(".list-toggler").find("span"),a=o.data("lockable");for(l=0;l<r.length;l++)if(y=t(r[l]),y.data("filter-sort")==u.data("filter-sort"))if(y.hasClass("active")){u.show();i&&n.ActivePlacements&&n.ActivePlacements.reAttachTo(u);setTimeout(function(){w=!0},i?100:2e3);r.on("click",function(i){var e=t(i.target),h,s;if(e.is("span")||(e=e.closest("span")),e.data("filter-sort")!=u.data("filter-sort")){for(f._clearEventHandlers(),r.removeClass("active"),e.addClass("active"),n.ActivePlacements&&n.ActivePlacements.detachFrom(u),h=o.find(".article-list-collection, .article-list"),s=0;s<h.length;s++)t(h[s]).data("articleslist").init(!0);a.scrollTo();a.refresh()}})}else b=!1,u.hide();if(a.refresh(),!b)return}u.on("mouseover",function(){n.setActiveBrowseBase(u.data("activepagekey"))});p.on("click",function(n){var i=f.loadPage(t(this).hasClass("btn-next"),!e.hasClass("next-only"));return i?(n.stopPropagation(),n.preventDefault(),!1):!0});if(v)if(s)o.data("lockable").onScroll(f._handleScroll,f);else n.onScroll(f._handleScroll,f)};this._clearEventHandlers=function(){p.off("click");s&&o.find(".list-toggler").find("li").off("click");v&&(s?o.data("lockable").offScroll(f._handleScroll):n.offScroll(f._handleScroll))};this._handleHistoryStateChange=function(n){var i=n===!0?History.savedStates[0]:History.getState(),e,r;if(t.isEmptyObject(i.data)&&i.data.pageKey==null)if(e=i.hash,y!=null&&y.pagePath==e)i.data=y;else return!1;r=i.data;r.pageKey!=u.data("activepagekey")&&f.loadPageByKey(r.pageKey,r.pagePath,r.asReplace,!1)};this.loadPage=function(n,t){var i=u.data(n?"nextpagekey":"prevpagekey"),r=u.data(n?"nextpagepath":"prevpagepath");return f.loadPageByKey(i,r,t,c)};this.loadPageByKey=function(i,r,u,o){var s,h;return i==""||i==null?!1:(s="c"+i.split("=").join("$").split("/").join("_").split("+").join("α"),s==l)?!0:(l=s,e.addClass("loading"),c&&u&&n.ActivePlacements&&n.ActivePlacements.refresh(["topwide","bigbox","leftbox","skin"]),h=n.DynamicListPaging.Cache[s],h?setTimeout(function(){f._onPageLoaded(h,r,u,o)},1):t.post(n.BuildAJAXUrl("getarticleslistpage"),{key:i},function(t){t.Response==null?(t.Error!=null&&t.Error.ErrorCode==404?e.hide():t.Error!=null&&n.Alerts.DisplayErrorNotification(t.Error.ErrorText),l=""):(n.DynamicListPaging.Cache[s]=t.Response.Value,f._onPageLoaded(t.Response.Value,r,u,o))}).error(function(){l="";e.removeClass("loading")}),!0)};this._onPageLoaded=function(i,r,a,y){var ut,w,d,tt,it,p,et;if($page=t(i),ut=k?$page.find(".article-list"):$page,f._clearEventHandlers(),a){for(p=0;p<h.length;p++)w=t(h[p]),n.ActivePlacements&&n.ActivePlacements.detachFrom(w),w.html(ut[p].innerHTML),n.ActivePlacements&&n.ActivePlacements.reAttachTo(w);s||n.scrollTo(0,Math.max(t(".page-header").height()-(b.hasClass("subworld")?90:64),0))}else for(p=0;p<h.length;p++){w=t(h[p]);d=t(ut[p]);switch(Number(u.data("display-mode"))){case 1:e&&(e.closest("li").remove(),e=null,w=w.find("ul"),d=d.find("ul").children());break;case 2:case 3:case 4:default:e&&(e.remove(),e=null);d=d.children()}for(tt=0;tt<d.length;tt++)w.append(d[tt])}for(it=["filter-sort","display-mode","prevpagekey","activepagekey","nextpagekey","prevpagepath","activepagepath","nextpagepath","title-base","page-number"],p=0;p<it.length;p++)u.data(it[p],$page.data(it[p]));if(c&&History&&History.enabled){var nt=Number(u.data("page-number")),g=document.title.replace(/\s-\sPage\s[0-9]+/,""),rt=u.data("title-base"),ft=u.data("activepagepath");nt>1&&g.indexOf(rt)==-1?g=rt+" - Page "+nt:nt>1&&(g=g.Replace(rt,rt+" - Page "+nt));nt==1&&f._page1Title&&(g=f._page1Title);et=ft.substring(ft.indexOf("/",8));window.ga&&ga("set",{page:et,title:g});window.ga&&ga("send","pageview");v||(y?History.pushState({pageKey:u.data("activepagekey"),pagePath:ft,asReplace:a},g,et):s||n.scrollTo(0,Math.max(t(".page-header").height()-(b.hasClass("subworld")?90:64),0)))}s&&o.data("lockable").refresh();f._initReferencesAndEventHandlers();n.OnElementReady(h);l=""};this._handleScroll=function(){e==null||e.hasClass("loading")||(s&&w&&n.ActivePlacements&&(n.ActivePlacements.clone("leftbox")||(w=!1),setTimeout(function(){o.data("lockable").refresh()},100)),Math.max(document.documentElement.clientHeight,window.innerHeight||0)>=e[0].getBoundingClientRect().top+(Math.abs(a.scrollPreloadOffset)>0&&Math.abs(a.scrollPreloadOffset)<1?Math.floor(a.scrollPreloadOffset*Math.max(document.documentElement.clientHeight,window.innerHeight||0)):a.scrollPreloadOffset)&&f.loadPage(!0,!1))}};n.DynamicListPaging.Cache={};n.DynamicListPaging.TypeArticles=1;n.DynamicListPaging.TypeMembers=2;t.fn.articleslist=function(i){return this.each(function(){var r=t(this),f=r.closest(".article-list-collection"),u;if(f.length>0&&(r=f),r.data("articleslist"))return r.data("articleslist");u=new n.DynamicListPaging(r,t.extend({type:n.DynamicListPaging.TypeArticles},i||{}));r.data("articleslist",u);u.init()})};n.LazyImgSrcManager=new function(){var i=this,f=!1,u={},t=[],e=2,o=0;_iLastHandled=0;_iDelayedHandleTO=null;this.nextID=100;this.init=function(){if(!f){f=!0;o=r.height()*e;r.on("resize",function(){n.isFullScreen()||(o=r.height()*e)});n.onScroll(i._handleWinScroll,i)}};this.add=function(n){if(u[n.key])for(var r=0;r<t.length;r++)if(t[r].length>0&&t[r][0].key==n.key){t[r].push(n);i._handleWinScroll();i.init();return}t.push([n]);u[n.key]=!0;i._handleWinScroll();i.init()};this.subScrollerDidScroll=function(){i._handleWinScroll()};this.remove=function(n){var r,f,e;if(!(n<0)){for(r=0;r<t.length;r++)for(f=0;f<t[r].length;f++)if(t[r][f].id==n)return e=t[r][f].key,t[r][f].destroy(999),t[r].splice(f,1),t[r].length==0&&(u[e]=null,delete u[e],t.splice(r,1)),i._handleWinScroll(),!0;return!1}};this.preloadImage=function(n,t,r,u){if(u!==!0&&i.isImageInBrowserCache(n)){t&&(r?t.apply(r,[n,!0,!0]):t(n,!0,!0));return}var f=new Image;f.onload=function(){f.onload=f.onerror=f.onabort=null;t&&t(f.src,!0,!1);f=null};f.onerror=f.onabort=function(){f=f.onload=f.onerror=f.onabort=null;t&&t(n,!1,!1);f=null};f.src=n};this.isImageInBrowserCache=function(n){var t=document.createElement("img"),i;return t.src=n,i=t.complete||t.width+t.height>0,t=null,i};this._handleWinScroll=function(n){var f,o,s,u,e;if(!(t.length<=0)){if(f=(new Date).valueOf(),_iDelayedHandleTO!=null&&(clearTimeout(_iDelayedHandleTO),_iDelayedHandleTO=null),_iLastHandled>f-100){_iDelayedHandleTO=setTimeout(function(){i._handleWinScroll()},100);return}if(_iLastHandled=f,o=n?n.y:r.scrollTop(),s=0,o>360)for(u=0;u<t.length;u++)for(e=0;e<t[u].length;e++){t[u][0].preload();s++;break}}};this._onKeyLoaded=function(n){for(var r,i=0;i<t.length;i++)if(t[i].length>0&&t[i][0].key==n)for(r=0;r<t[i].length;r++)t[i][r]._onLoad()}};n.LazyImgSrc=function(t,i){var r=this,u=t;this.loading=0;this.failCount=0;this.src=i&&i.src||u.data("src")||u[0]&&u[0].src||"";this.waitForLoadEvent=i&&i.waitForLoadEvent||u.data("wait-for-load")||!1;this.key=this.src.replace(/[\/\:\.\-]/ig,"");this.init=function(){r.id=n.LazyImgSrcManager.nextID++;n.LazyImgSrcManager.add(r)};this.destroy=function(t){t!==999&&n.LazyImgSrcManager.remove(r.id);u&&u.removeData("oLazyImgSrc");u=null;r=null};this.getAnchorTopOffset=function(){return u[0]&&u[0].getBoundingClientRect().top};this.preload=function(){r.loading>0||r.failCount>=3||r.src==""||(r.loading=1,r.waitForLoadEvent?n.LazyImgSrcManager.preloadImage(r.src,r._onPreloaded,r,!0):r._onPreloaded(r.src,!0))};this._onPreloaded=function(t,i){r&&(i?(r.loading=2,r.src=t,n.LazyImgSrcManager._onKeyLoaded(r.key)):(r.loading=-1,r.failCount++,setTimeout(function(){r.preload()},1e3)))};this._onLoad=function(){u.is("img")?u[0].src=r.src:u.css("backgroundImage","url("+r.src+")");setTimeout(function(){r&&n.LazyImgSrcManager.remove(r.id)},10)}};t.fn.lazyImgSrc=function(i){return this.each(function(){var r=t(this),u;if(r.data("oLazyImgSrc"))return r.data("oLazyImgSrc");u=new n.LazyImgSrc(r,i||{});r.data("oLazyImgSrc",u);u.init()})};n.newDate=function(n,t){var r=new Date,i,f,e,u;if(n!=null)if(Object.prototype.toString.call(n)==="[object Date]")r=n;else{for(i=n.split(/[^0-9]/);i.length<6;)i.push(0);for(f in i)i[f]==""&&(i[f]=0);r=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])}return t?(e=r.getTimezoneOffset(),u=new Date(r.getTime()-e*6e4),u.getTimezoneOffset()!=e&&(u=new Date(r.getTime()-u.getTimezoneOffset()*6e4)),u):r};n.UrlRegEx=new function(){var r=this,c=!1,s="?",i="(?:{0})",e="^",o="|",y="(?:s|^|$)",l="(?:https?:\\/\\/)",u="(?:(?:https?|ftp|itpc):\\/\\/)",p="(?:[a-z0-9](?:[a-z0-9]?|[-a-z0-9-]+?[a-z0-9])\\.)",w="(?:"+p+"*?)",b="(?:[a-z]{2,4}(?:\\.[a-z]{2})?)",k="domain\\.com\\.oembed\\.endpoint\\/path\\/to\\/content",a="(?:(?:(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2(?:[0-4][0-9]|5[0-5]))\\.){3}[0-9]|[1-9][0-9]|1[0-9][0-9]|2(?:[0-4][0-9]|5[0-5]))",v="(?::[0-9]+)"+s,h="(?:\\/|\\?|&|#)",d="[-a-z0-9+&@#\\/%=~_|$?!:,.]",f="(?:\\("+d+"*\\)|"+d+")",g="(?:$|(?:"+h+"$)|(?:"+h+"(?:"+f+"*)"+f+"$))",nt="(?:(?:"+h+"(?:"+f+"*)"+f+")|"+h+")";this.loaded=!1;this._generate=function(){var n=t.format(i,w+p+b),r=e+t.format(i,u+s+n+o+u+a)+v,h=e+t.format(i,l+s+n+o+u+a)+v;this.mdUrl=new RegExp(y+"\\[?"+t.format(i,t.format(i,t.format(i,u+o+"www\\."+o+"ftp\\.")+n)+o+t.format(i,u+a))+v+t.format(i,nt+s)+"\\]?"+y,"gi");this.urlExact=new RegExp(r+g,"i");this.httpUrlExact=new RegExp(h+g,"i");this.relUrlExact=new RegExp(e+"\\/[a-z0-9?#](?:$|(?:(?:"+f+"*)"+f+"$))","i");this.hasProto=new RegExp(e+u,"i");this.httpProto=new RegExp(e+l,"i");this.oEmbedableUrl=new RegExp("\\b"+l+w+k+"\\S*","gi")};this.load=function(i,u,f){if(r.loaded){i&&typeof i=="function"&&(u?i.apply(u,f||[]):i.apply(i,f||[]));return}if(c){i&&typeof i=="function"&&(u?setTimeout(function(){r.load.apply(r,[i,u,f||[]])},10):setTimeout(function(){r.load.apply(r,[i,null,f||[]])},10));return}c=!0;t.post(n.BuildAJAXUrl("gettldregexlist"),{slds:!0},function(n){b=n.Response.Value.TLDs;k=n.Response.Value.OEmbedPatterns;r._generate();r.loaded=!0;c=!1;i&&typeof i=="function"&&(u?i.apply(u,f||[]):i.apply(i,f||[]))})};this._generate()};n.ImgUrl=function(t,i,r){this.toString=function(t,i){if(this.imgID==null||this.imgID===""||this.imgID.length<6||(t!=null&&t!==""&&t||(t=this.defaultFormat),this._initValidFormatsRegEx(),!n.ImgUrl.rxIsValidImgFormat.test(t)))return"";var r=this.imgID.length,f="",u="";return t=="original"?(f="/"+t,t="",u=this.imgID):(t="."+t,u=this.titleText),n.imgUrlBase+"/img"+f+"/"+this.imgID.substr(r-4,2)+"/"+this.imgID.substr(r-2,2)+"/"+this.imgID.substr(0,r-4)+"/0/"+u+t+(t.indexOf("b")==0||this.wm==null||this.wm==""?"":"."+this.wm)+"."+this.imgExt+String(i===!0?this.queryString:"")};this.setValue=function(t,i,r){if(this.imgID="",this.imgExt="jpg",this.imgFile="",this.queryString="",this.titleText="",this.defaultFormat=i||this.defaultFormat||"300x140",this.wm=null,this.isValid=!1,r=r==null||r===""?null:r,t!=null&&t!==""){t=t.replace(/\s/g,"%20");this._initValidFormatsRegEx();var u=n.ImgUrl.rxImageID.exec(t);if(u!=null){this.imgID=String(u[1]);this.titleText=r||this.imgID;u[3]!=null&&(this.imgExt=String(u[3]));u[4]!=null&&(this.queryString=String(u[4]));this.imgFile=this.imgID+"."+this.imgExt;this.isValid=!0;return}if(u=n.ImgUrl.rxFormattedImgUrl.exec(t),u!=null){this.imgID=String(u[5])+String(u[3])+String(u[4]);u[11]!=null&&(this.wm=String(u[11]));u[12]!=null&&(this.imgExt=String(u[12]));u[13]!=null&&(this.queryString=String(u[13]));this.titleText=r||u[7]==null?this.imgID:String(u[7]);i==null&&u[9]!=null&&(this.defaultFormat=String(u[9]));i==null&&u[2]!=null&&(this.defaultFormat=String(u[2]));this.defaultFormat.indexOf("b")==0&&(this.wm=null);this.imgFile=this.imgID+"."+this.imgExt;this.isValid=!0;return}if(u=n.ImgUrl.rxEndsInImageID.exec(t),u!=null){this.imgID=String(u[1]);this.titleText=r||this.imgID;u[3]!=null&&(this.imgExt=String(u[3]));u[4]!=null&&(this.queryString=String(u[4]));this.imgFile=this.imgID+"."+this.imgExt;this.isValid=!0;return}console.log("!Unable to match valid image id or format for URL:");console.log(t)}};this._initValidFormatsRegEx=function(){var i,r,t;if(n.ImgUrl.rxFormattedImgUrl==null&&n.imgFormats.length!==0){for(i="(",r="/img(/(original))?/([0-9]{2})/([0-9]{2})/([0-9]{2,16})/([0-9]{1,10})/([a-z0-9\\-_]+)(\\.(",t=0;t<n.imgFormats.length;t++)if(r+=n.imgFormats[t]+"|",i+=n.imgFormats[t]+"|",n.imgFormats[t+1]=="original"){r+="))?(\\."+n.wmTest+")?\\.(jpg)(\\?(\\S)*)?$";i+="|original)";break}n.ImgUrl.rxFormattedImgUrl=new RegExp(r,"i");n.ImgUrl.rxIsValidImgFormat=new RegExp(i,"i")}};this.setValue(t,i,r)};n.ImgUrl.rxImageID=/^[alc]?([0-9]{6,20})[l]?(\.(jpg))?(\?(\S)*)?$/i;n.ImgUrl.rxFormattedImgUrl=null;n.ImgUrl.rxEndsInImageID=/\/[alc]?([0-9]{6,20})[l]?(\.(jpg))?(\?(\S)*)?$/i;n.ImgUrl.rxIsValidImgFormat=null;n.ImgUrl.toFormat=function(t,i,r,u){return new n.ImgUrl(t,null,u).toString(i,r)};n.ImgUrl.toImgID=function(t,i){var r=new n.ImgUrl(t);return i?r.imgFile:r.imgID};n.Alerts=new function(){var i=this;this.AlertType={Default:0,Award:1,Message:2,Kudos:3};this.alertsList=[];this.DisplayErrorNotification=function(n,i){n=n||"";n.ErrorText&&(n=n.ErrorText);var r=i||6e3;t.jGrowl(n,{life:r})};this.QueueAlert=function(i,r){t.post(n.BuildAJAXUrl("queuealertajax"),{msg:i},function(t){(r||!1)&&n.Alerts.Show(t.Response.Value.Alert)})};this.Show=function(r,u){var f={position:"bottom-left",sticky:!1,themeState:"notification",close:function(){r.TimeStamp&&t.post(n.BuildAJAXUrl("dismissalert"),{timeStamp:r.TimeStamp},function(){})},life:u?500:3e3},e,o;typeof r=="string"&&(r={MessageText:r});r.MessageText!=null&&(r.MessageText=r.MessageText.replace(/\n/g,"<br/>"));r.UserMessageInfo!=null&&(f.themeState="message",f.sticky=!0);r.AlertType==n.Alerts.AlertType.Award&&(f.themeState="award");r.AlertType==n.Alerts.AlertType.Kudos&&(f.themeState="kudos");r.TimeStamp||(r.TimeStamp=(new Date).getTime().toString()+"js");e=!1;for(o in n.Alerts.alertsList)if(n.Alerts.alertsList.hasOwnProperty(o)&&n.Alerts.alertsList[o].TimeStamp==r.TimeStamp){e=!e;break}e||i.alertsList.push(r);r.MessageText&&t.jGrowl(r.MessageText,f)}};n.CommentCollection=function(i,u){var f=this,i=i,p=!1,h=u,c=null,o=null,w=null,l=null,e=null,v=null,b=null,s=!1,y='<span class="centered-article-content">{0}{1}{2}<\/span>',a=" Comment";this.init=function(){c=t(".comments-box.article-id-"+i).first();o=c.find(".responses");w=c.find(".response-count");l=c.find(".comment-editor-header");e=c.find(".user-comment-editor");v=c.find(".share-widget");p=c.hasClass("is-forum");a=p?" Response":" Comment";b=o.append('<div class="hide reply-root clearfix"><div class="centered-article-content"><button type="button" class="raised-btn mfl" data-action="reply-root"><i class="fa fa-reply"><\/i> Start a New'+a+"<\/button><\/div><\/div>").find(".reply-root");n.Comments.oCommentCollections[i]=this;f.resetEditor()};this.resetEditor=function(){var t,n,i;e.find(".action-buttons").text().trim()!=""&&(t=v.data("whtPostEditor"),t&&e.find(".action-buttons").empty());e.insertAfter(o);f.resetCascadeLevels();b.hide();e.removeData("reply-to-parent");n=o.find("article").length;i=n==1?"":"s";w.data("response-count",n);n==0?w.html(y.format("Be the First to ",p?"Respond":"Comment","")):w.html(y.format(n,a,i));l.html(y.format("Share Your Thoughts","",""));n>0?l.show():l.hide()};this.activateEditor=function(t){var i,r;if(!e.hasClass("disabled")){if(!n.loggedInUser.IsUser){n.ShowLoginScreen("Please Login to Comment:");return}i=v.data("whtPostEditor");i?(r=i.getSettings(),(!e.hasClass("active")||r&&r.editDoc||t)&&i._initEditor(t)):v.whtPostEditor({mode:"comment",postTo:"SubmitComment",previewAt:"PreviewComment",editDoc:t||null})}};this.moveEditorBelowComment=function(n,i){var r=t("#comment-"+n),u;r.length<1||(e.insertAfter(r),u=Number(r.data("level"))+(i||0),f.resetCascadeLevels(),e.addClass("cascadelevel-"+u),setTimeout(function(){e.find(".editorBlock.isFocused textarea").first().focus()},10))};this.resetCascadeLevels=function(){for(var n=1;n<=10;n++)e.removeClass("cascadelevel-"+String(n))};this.getCommentDocX=function(n,t){for(var i=0;i<h.length;i++)if(Number(h[i].commentID)==n){setTimeout(function(){t.apply(f,[n,h[i]])},1);return}setTimeout(function(){t.apply(f,[n,null])},1)};this.submitComment=function(r){return s?!1:r.xml==null||r.xml.length<1?(n.Alerts.DisplayErrorNotification("Your{0} is still empty.".format(a)),!1):n.loggedInUser.IsUser?(s=!0,e.toggleClass("disabled",!0),n.Comments._postSubmit({ContentID:i,ParentCommentID:r.parentID,CommentText:r.xml,SkipReply:!1,IsVideo:!1,CommentID:r.commentID||0},function(u){var c,l,a,y,v;if(s=!1,e.toggleClass("disabled",!1),u.Error!=null){n.Alerts.DisplayErrorNotification(u.Error.ErrorText);f.resetEditor();return}try{if(c=u.Response.Value,typeof c.fnInit=="string"&&(c.fnInit=c.fnInit==""?function(){}:eval(c.fnInit)),typeof c.fnGetDocX=="string"&&(c.fnGetDocX=c.fnGetDocX==""?function(){}:eval(c.fnGetDocX)),l=c.fnGetDocX(),r.commentID&&r.commentID>0){if(a=o.find("#comment-"+r.commentID),a.length<1)return;a.replaceWith(c.html)}else r.parentID!=null&&r.parentID>0?t(c.html).insertAfter(o.find("#comment-"+r.parentID)):o.append(c.html),a=o.find("#comment-"+l.commentID);for(a.show("slow"),c.fnInit(),y=!1,v=0;v<h.length;v++)if(h[v].commentID==l.commentID){h[v]=l;y=!0;break}y||h.push(l);f.resetEditor();n.ManagedArticle.flagDirty(i)}catch(p){n.Alerts.DisplayErrorNotification("Unexpected error saving comment.");console.dir(p)}}).error(function(){s=!1;e.toggleClass("disabled",!1);f.resetEditor();n.Alerts.DisplayErrorNotification("Unexpected error saving comment.")}),!0):(n.AddDoAfterLoginCallback(function(){f.submitComment(r)}),n.ShowLoginScreen("Login to submit this comment:"),!1)};this._handlePlaceholderClick=function(){if(!s){var t=r.scrollTop();f.activateEditor();e.removeData("reply-to-parent");setTimeout(function(){f._scrollButtonsIntoView(t)},1);n.scrollTo(0,t)}};this._handleReplyClick=function(t){if(!s){var i=r.scrollTop();f.activateEditor();setTimeout(function(){p||l.html(y.format("Reply to",a,""));f.moveEditorBelowComment(t,1);b.show();e.data("reply-to-parent",t);f._scrollButtonsIntoView(i)},1);n.scrollTo(0,i)}};this._handleReplyRootClick=function(){if(!s){var n=v.data("whtPostEditor");n&&n.cancelEdits(!0);f._handlePlaceholderClick()}};this._handleEditClick=function(t,i){s||f.getCommentDocX(t,function(t,u){if(u==null){n.Alerts.DisplayErrorNotification("Sorry, we couldn't load the editor for this comment. You may not have permission.");return}var o=r.scrollTop();f.activateEditor(u);setTimeout(function(){e.removeData("reply-to-parent");l.html(y.format("Edit",a,""));f.moveEditorBelowComment(t);i.hide();f._scrollButtonsIntoView(o)},1);n.scrollTo(0,o)})};this._scrollButtonsIntoView=function(t){n.scrollTo(0,t);var i=e.find(".action-buttons").offset().top;t+r.height()<i&&n.scrollTo(0,i-r.height()+60)};this.init()};n.Comments=new function(){var i=this,u=null,s=null,f=null,h=!1,e=!1,o=!1,r=null;this.oCommentCollections={};this.init=function(t){u=u||t.urlVote;s=s||t.urlSubmit;f=f||t.urlDelete;var r=new n.CommentCollection(t.id,t.docX);h||i.initEvents();h=!0};this.initEvents=function(){t("#content-container").on("click.whtComments",".comments-box button",function(n){var r=t(n.target),u;r.is("button")||(r=r.closest("button"));u=String(r.data("action"));u.in("downvote","upvote","unhide","edit","reply","delete","reply-root")&&(i._handleCommentBtnClick(r.closest("article, .comments-box"),u),n.preventDefault(),n.stopImmediatePropagation())});t("#content-container").on("click.whtComments",".comments-box .textholder",function(i){var u=t(i.target).closest(".comments-box"),r=Number(u.data("article-id"));String(r)!="NaN"&&r!=0&&n.Comments.oCommentCollections[r]!=null&&n.Comments.oCommentCollections[r]._handlePlaceholderClick()})};this.resetEditor=function(t){if(t!=null)n.Comments.oCommentCollections[t]!=null&&n.Comments.oCommentCollections[t].resetEditor();else for(var i in n.Comments.oCommentCollections)n.Comments.oCommentCollections[i].resetEditor()};this.submitComment=function(t){if(t.editorRoot==null)return!1;var i=Number(t.editorRoot.closest(".comments-box").data("article-id"));return String(i)=="NaN"||i==0?!1:n.Comments.oCommentCollections[i]!=null?n.Comments.oCommentCollections[i].submitComment(t):!1};this._handleCommentBtnClick=function(n,u){switch(u){case"downvote":i._vote(n.data("id"),!1);break;case"upvote":i._vote(n.data("id"),!0);break;case"unhide":n.hasClass("is-visible-negative")?n.toggleClass("is-negative",!0).toggleClass("is-visible-negative",!1):(n.toggleClass("is-visible-negative",!0).toggleClass("is-negative",!1),n.find(".whtGallery").each(function(){var n=t(this).data("whtGallery");n&&n.setDisplayTemplate(null,!0,!0)}));break;case"edit":i._edit(n.data("id"));break;case"reply":i._reply(n.data("id"));break;case"reply-root":i._replyRoot(n);break;case"delete":var f=n.find("button.delete-comment");r!=null&&(clearTimeout(r),r=null);f.text().trim()==""?(f.html('Delete? <i class="fa fa-trash-o"><\/i>'),r=setTimeout(function(){r=null;f.html('<i class="fa fa-trash-o"><\/i>')},3e3)):(f.html('<i class="fa fa-trash-o"><\/i>'),this.delete(n.data("id")))}};this.delete=function(r){var u,e,s;if(f&&!o){if(!n.loggedInUser.IsUser){n.AddDoAfterLoginCallback(function(){i.delete(r)});n.ShowLoginScreen("Login to delete this:");return}if((u=t("#comment-"+r),u.length<1&&(u=t("#comment-review-"+r)),!(u.length<1))&&(e=Number(u.data("article-id")),s=Number(u.data("user-id")),String(s)!="NaN"&&!(s<=0)&&String(e)!="NaN"&&e!=0&&e!=-1)){if(n.loggedInUser.UserID!=s&&!n.loggedInUser.IsStaff){n.Alerts.DisplayErrorNotification("Sorry, you cannot delete this comment.");return}o=!0;t.post(f,{ArticleID:e,CommentID:r,WorldURLName:n.currentWorld.UrlName},function(r){var f,s,c,h,l;if(o=!1,r.Error!=null)n.Alerts.DisplayErrorNotification(r.Error.ErrorText);else{for(f=[],s=function(n,i){if(n!=null&&n.length!=0){if(n.length>1){for(var r=0;r<n.length;r++)s(t(n[r]),i);return}(Number(n.data("parent"))==i||i==null)&&(f.push(n),s(n.parent().find("article.cascadelevel-"+String(Number(n.data("level"))+1)),Number(n.data("id"))))}},s(u),c=f.length,h=0;h<f.length;h++)n.DeleteAnimation(f[h],function(){c--});l=function(){c>0?setTimeout(l,10):i.resetEditor(e)};setTimeout(l,900);n.ManagedArticle.flagDirty(e)}}).error(function(){o=!1;console.log("error deleting comment...");console.dir(arguments)})}}};this._vote=function(r,f){var o,s,h,c;if(u&&!e){if(!n.loggedInUser.IsUser){n.AddDoAfterLoginCallback(function(){i._vote(r,f)});n.ShowLoginScreen("Login to vote:");return}(o=t("#comment-"+r),o.length<1)||(s=Number(o.data("article-id")),String(s)!="NaN"&&s!=0)&&((h=o.find("button"+(f?".fa-chevron-up":".fa-chevron-down")),c=o.find("button"+(f?".fa-chevron-down":".fa-chevron-up")),h.hasClass("active"))||(e=!0,t.post(u,{VideoID:0,ArticleID:o.data("article-id"),CommentID:r,PositiveVote:f},function(t){e=!1;t.Error!=null?n.Alerts.DisplayErrorNotification(t.Error.ErrorText):t.Response!=null&&t.Response.Value!=null&&(c.hasClass("active")?c.toggleClass("active",!1):h.toggleClass("active",!0),o.find(".comment-score").text(t.Response.Value.Score),o.toggleClass("is-visible-negative",!1).toggleClass("is-negative",t.Response.Value.Score<0).toggleClass("is-upvoted",t.Response.Value.Score>2),n.ManagedArticle.flagDirty(s))}).error(function(){e=!1;console.log("error voting... ");console.dir(arguments)})))}};this._reply=function(i){var u=t("#comment-"+i),r;u.length<1||(r=Number(u.data("article-id")),String(r)!="NaN"&&r!=0)&&n.Comments.oCommentCollections[r]!=null&&n.Comments.oCommentCollections[r]._handleReplyClick(i,u)};this._replyRoot=function(t){if(!(t.length<1)){var i=Number(t.data("article-id"));String(i)!="NaN"&&i!=0&&n.Comments.oCommentCollections[i]!=null&&n.Comments.oCommentCollections[i]._handleReplyRootClick()}};this._edit=function(i){var u=t("#comment-"+i),r;u.length<1||(r=Number(u.data("article-id")),String(r)!="NaN"&&r!=0)&&n.Comments.oCommentCollections[r]!=null&&n.Comments.oCommentCollections[r]._handleEditClick(i,u)};this._postSubmit=function(n,i){return t.post(s,n,i)}};n.ManagedArticle=function(i){var r=this;this.conf=t.extend({articleID:0,authorUserName:"",connectionType:0,rootElement:null,rawHtml:"",fnInit:function(){},noCache:!1,url:"",editUrl:"",dnra:!1,metaTags:{},metaProperties:{}},i||{});this.articleID=0;this.avid=null;this.loaded=!0;this.loadStamp=(new Date).valueOf();this.isDirty=!1;this.init=function(){r.articleID=r.conf.articleID;typeof r.conf.fnInit=="string"&&(r.conf.fnInit=r.conf.fnInit==""?function(){}:eval(r.conf.fnInit));typeof r.conf.fnInitComments=="string"&&(r.conf.fnInitComments=r.conf.fnInitComments==""?function(){}:eval(r.conf.fnInitComments));(r.conf.rawHtml==""||r.conf.rawHtml==null)&&r.conf.rootElement!=null&&(r.conf.rootElement=t(r.conf.rootElement),r.conf.rawHtml=r.conf.rootElement[0].outerHTML,r.conf.fnInit(),r.conf.fnInitComments(),r.initView())};this.destroy=function(){r&&r.conf.rootElement&&(r.conf.rootElement.empty(),r.conf.rootElement=null,r.conf.rawHtml=null,r.conf=null,r=null)};this.render=function(i,u){if(!r.conf.rootElement){if(r.conf.rawHtml==""||r.conf.rawHtml==null){console.log("can't render. No valid html.");console.dir(r);return}r.conf.rootElement=t(r.conf.rawHtml).first()}r.updatePlacementTargeting();r.conf.rootElement.addClass(u||"");r.isInDOM()||(r.conf.rootElement.appendTo(i),n.OnElementReady(r.conf.rootElement),r.conf.fnInit(),r.conf.fnInitComments())};this.updatePlacementTargeting=function(){r.conf&&r.conf.placementTargeting!=null&&r.conf.placementTargeting.length>0&&n.ActivePlacements&&(n.ActivePlacements.settings.kw=r.conf.placementTargeting)};this.detach=function(){r.conf.rootElement&&(r.conf.rootElement.empty(),r.conf.rootElement.remove(),r.conf.rootElement=null);r.avid=null};this.initView=function(){n.KeepAlive({nv:!0,aid:r.articleID},function(n){r.avid=n.Response.Value.avid})};this.initJS=function(){r.conf.fnInit()};this.initCommentsJS=function(){r.conf.fnInitComments()};this.isInDOM=function(){return r.conf.rootElement!=null&&r.conf.rootElement[0].parentElement!=null&&t.contains(document,r.conf.rootElement[0])};this.cacheAge=function(){return Math.floor(((new Date).valueOf()-r.loadStamp)/1e3)};r.init()};n.ManagedArticle.Cache={};n.ManagedArticle.collectGarbage=function(){var r=0,u=7,i="",f=(new Date).valueOf();for(var t in n.ManagedArticle.Cache)if(n.ManagedArticle.Cache[t]!=null)try{if(!n.ManagedArticle.Cache[t].loaded||n.ManagedArticle.Cache[t].isInDOM&&n.ManagedArticle.Cache[t].isInDOM())continue;if(n.ManagedArticle.Cache[t].errorCode!==0||n.ManagedArticle.Cache[t].isDirty===!0||n.ManagedArticle.Cache[t].cacheAge()>900){try{n.ManagedArticle.Cache[t].destroy()}catch(e){}n.ManagedArticle.Cache[t]=null;delete n.ManagedArticle.Cache[t];continue}r++;n.ManagedArticle.Cache[t].loadStamp<f&&(i=t,f=n.ManagedArticle.Cache[t].loadStamp)}catch(e){console.log("!!!!! ERROR: ROGE MANAGED ARTICLE IN CACHE...");console.dir(e);console.dir(n.ManagedArticle.Cache[t]);console.dir(n.ManagedArticle.Cache)}r>u&&(n.ManagedArticle.Cache[i].destroy(),n.ManagedArticle.Cache[i]=null,delete n.ManagedArticle.Cache[i],r>u&&n.ManagedArticle.collectGarbage())};n.ManagedArticle.flagDirty=function(t){for(var i in n.ManagedArticle.Cache)if(n.ManagedArticle.Cache[i].articleID==t){n.ManagedArticle.Cache[i].isDirty=!0;return}};n.ManagedArticle.iGCInterval=setInterval(n.ManagedArticle.collectGarbage,6e4);n.Enums=new function(){this.GuideType={None:0,FirstArticlePage:1,FirstHomePage:2,FirstKudosGiven:4,FirstLogin:8,FirstWorldAdmin:16,SawHomePageCallToAction:32};this.GuideDirections={Top:1,Right:2,Bottom:3,Left:4};this.WorldSubCategoryType={Any:0,HowTo:1,Inspiration:2,Forum:3};this.WorldSubCategoryMode={Unchanged:-1,TextList:0,ImageGrid:1}};n.Forms=new function(){this.DisableForm=function(n){typeof n=="string"&&(n=t(n));n.find('form input[type="submit"], form button[type="submit"]').attr("disabled","disabled")};this.EnableForm=function(n){typeof n=="string"&&(n=t(n));n.find('form input[type="submit"], form button[type="submit"]').removeAttr("disabled")};this.OnAjaxFormComplete=function(i){var u={response:{},formContainer:"",closeDialogOnSuccess:!0,replaceFormOnError:!0,onError:function(){return!0},onSuccess:function(){return!0}},r;i=t.extend({},u,i);typeof i.formContainer=="string"&&(i.formContainer=t(i.formContainer));r={};try{r=!i.response.responseText||!1?i.response:t.parseJSON(i.response.responseText)}catch(f){r={Error:{ErrorCode:500,ErrorText:"Unknown error occcured"},Response:{Value:{Success:!1}}}}if(n.Forms.EnableForm(i.formContainer),r.Error!=null)i.onError(r)!==!1&&i.replaceFormOnError&&(i.formContainer.html(r.Error.ErrorText),n.OnElementReady(i.formContainer));else if(i.onSuccess(r)!==!1){if(r.Response!=null&&r.Response.Value!=null&&r.Response.Value.Html!=null&&r.Response.Value.Html!=""){i.formContainer.html(r.Response.Value.Html);n.OnElementReady(i.formContainer);return}i.closeDialogOnSuccess&&(i.formContainer.data("dialog")||!1)&&i.formContainer.dialog("close")}}};n.Guidable=function(i,r){function c(){var o,i,r;t.isEmptyObject(f)&&t.isEmptyObject(s)&&(o=v(),i="<div class='guide-flyout-container"+o+"'><div class='guide-flyout'><div class='clearfix txt-title  txt-shadow-btm-dark' style='border-bottom: 1px solid #383838;'><span class='txt-size-bigger txt-clr-lightest mgr-small'>{0}<\/span> <span class='txt-size-normal txt-clr-meddark'>{1}<\/span><\/div><div class='mgt'><p class='txt-clr-medlight txt-size-normal'>{2}<\/p><\/div><div class='buttons-container mgt-med'><\/div> <\/div><\/div>",i=t.format(i,u.mainHeadline,u.secondaryHeadline,u.guideMessage),u.wrapRoot?(s=t("<div class='guide-flyout-wrapper"+o+"'><\/div>").insertBefore(e).wrapInner(e),f=t(i).appendTo(s)):f=t(i).insertAfter(e),l(),f.css("opacity",0).show(),r={opacity:1},u.direction==n.Enums.GuideDirections.Left?r.left=e.width()-5+"px":u.direction==n.Enums.GuideDirections.Top?(f.css("left",e.width()/-2+30+"px"),r.top=e.height()-10+"px"):u.guideType==n.Enums.GuideType.FirstWorldAdmin&&(r.right="-15px"),f.animate(r,u.animationSpeed,"easeOutBack"))}function l(){var n,i,r;if(h=f.find(".buttons-container"),u.buttons.length>0){for(n=0;n<u.buttons.length;n++)i=u.buttons[n]=t.extend({},{message:"",navigateURL:"javascript://",mainButton:!1},u.buttons[n]),r=t(t.format("<div class='btn wide rnd fl {0}'><a href='{1}' class='txt-size-normal {2}'>{3}<\/a><\/div>",a(i),i.navigateURL,i.mainButton?"txt-clr-lightest txt-shadow-btm-dark":"txt-clr-darkest txt-shadow-btm-light",i.message)).appendTo(h).data("guideable-id",n);h.on("click",".btn",function(n){var i=t(n.target),r=u.buttons[t(this).data("guideable-id")];if(i&&i.attr("href")&&i.attr("href").indexOf("javascript:")===0&&(n.stopImmediatePropagation(),n.preventDefault()),r.onClick&&r.onClick(n)===!1)return!1;f.fadeOut(u.animationSpeed);o.SetUserGuideFlag()})}}function a(n){return" "+(n.mainButton?"blue mgr ":"silver")}function v(){var t=" ",i,r;for(i in n.Enums.GuideDirections)n.Enums.GuideDirections[i]==u.direction&&(t+=i+" ");for(r in n.Enums.GuideType)n.Enums.GuideType[r]==u.guideType&&(t+=r+" ");return t}var u=t.extend({},{animationSpeed:500,guideType:n.Enums.GuideType.None,direction:n.Enums.GuideDirections.Left,showOnStart:!1,wrapRoot:!0,mainHeadline:"Welcome to WonderHowTo!",secondaryHeadline:"We're show & tell for creators & doers.",guideMessage:"",buttons:[]},r||{}),e=t(i),o=this,f={},s={},h={};this.init=function(){u.showOnStart&&o.Show()};this.Show=function(){t.isEmptyObject(f)&&c()};this.SetUserGuideFlag=function(n,i){n=n||u.guideType;(typeof i=="undefined"||i==null)&&(i=!0);var r=o.GetUserGuideFlag();i?r|=n:r&=~n;t.setCookie("GuideFlag",r,365)};this.GetOptions=function(){return u};this.GetUserGuideFlag=function(){return t.getCookie("GuideFlag")||n.Enums.GuideType.None};this.UserHasGuideFlag=function(n){return((typeof n=="undefined"||n==null)&&(n=u.guideType),!n)?!1:o.GetUserGuideFlag()&n?!0:!1};this.GetFlyoutContainer=function(){return f};this.GetWrapper=function(){return s}};t.fn.guideable=function(i){var u=t(this),r=u.data("guideable");return r&&(typeof i=="undefined"||!i||t(r.GetOptions()).equals(i))?r:(this.each(function(){r=new n.Guidable(u,i);u.data("guideable",r);r.init()}),r)};n.ClickManager=new function(){var u=this,i=null,f=null,e=!0,r=null,o=null;this.init=function(){f=t("#header-hero");i=t("#next-hh");i=i.length<=0?null:i[0];r=t(".content-nav");o=r.find("ul");i==null&&(e=!1);t("a").on("click",function(i){var r,f,e;return i.which!==1||i.ctrlKey||i.metaKey?!0:(r=t(this),f=String(r.attr("href")),r.is("#featured-story")&&window.ga&&ga("send","event","HeaderHero",n.oHero.id==n.oRootHero.id?"domainHeroClick":"siteHeroClick",oHero.title,oHero.id),e=u.handleOnSiteClick(r,f),e)?(i.stopPropagation(),i.preventDefault(),!1):!0})};this.handleOnSiteClick=function(i,r){if(!r.match(/^http(s)?\:\/\/[a-z0-9-]+\.((wonderhowto|foodhacksdaily|gadgethacks|invisiverse)\.com|reality\.news|driverless\.id)/i)||!r.match(/(([a-z][a-z0-9\-_]*)|([0-9]+[a-z][a-z0-9\-_]*))-(0)?([1-9][0-9]+)\/$/i))return!1;var u=t('<form name="postclick" method="post" style="position:absolute;top:-1000px;left:-1000px;visibility:hidden;"><\/form>').attr("action",r).append(t('<input type="hidden" name="key"/>').attr("value",n.activeBrowseBase));return t("body").append(u),u.submit(),!0}};n.checkSignupID=function(){var u=String(window.location.href),i=u.indexOf("#signupID="),r;if(console.log(i),i>-1){r=String(window.location.hash).substring(10);try{window.location.hash="";window.history&&(window.history.replaceState(window.history.state,window.document.title,u.substring(0,i)),window.scrollTo(0,0))}catch(f){}t.post("/account/checktoken/",{signupID:r},function(t){try{t.Error!=null&&t.Error.ErrorText!=null?n.Alerts.DisplayErrorNotification(t.Error.ErrorText):t.Response.Value.Success&&n.NavBar.createAjaxDialog({URL:"/account/getcreateaccountform/",ContainerID:"createaccountdialogcontainer",Title:"Create Account",AdditionalData:{signupID:r}})}catch(i){}})}if(!n._checkdSignupID){n._checkdSignupID=!0;t(window).on("hashchange",n.checkSignupID)}};n.Header=new function(){var u=this,o=null,it=null,st=null,ht=null,i=null,k=null,vt=null,rt=null,ut=null,ft=null,et=null,yt=0,f="0px",d=0,ct=0,g=0,nt=0,y=60,p=60,pt=30,wt=0,e=0,bt=6,s=!0,lt=!0,tt=null,ot=!1,c=!1,a=!1,l=!1,w=!1,h=!1,at=0,b=!1,v=!1;this.init=function(){o=t("body");it=t(".page-header");st=t("#header-bg-image");ht=t("#header-overlay");i=t("#top-nav");k=i.find(".shade");vt=t(".page-wrapper").first();rt=t(".oversized-header .center-frame .left-col").first();p=o.hasClass("subworld")?p+pt:p;ut=t("#top-header, #header-offset");ft=t("#featured-story");et=ft.closest(".featured-story");yt=i.find(".nav-menu-block").height();wt=i.find(".shade").toggleClass("immediate",!1).height();e=it.height()||p;f=i.css("top");d=Number(f.substring(0,f.length-2));g=u._getLockAtScrollTopOffset();nt=0;a=i.hasClass("small-logo");l=r.width()<768;b=o.hasClass("short-header");ot=!l&&o.hasClass("oversized-header");t(".site-logo .logo img").toggleClass("immediate",!1);t("#asw").toggleClass("immediate",!1);n.onScroll(u._handleWinScroll,u);r.load(function(){u.resetAdVisibility()});r.on("resize",function(){if(!n.isFullScreen()){e=it.height()||p;var t=i.css("top");i.css("top","");f=i.css("top");i.css("top",t);d=Number(f.substring(0,f.length-2));l=r.width()<768;b=o.hasClass("short-header");ot=!l&&o.hasClass("oversized-header");t!=f&&(i.toggleClass("immediate",!0),i.css({position:"absolute",top:f}),c=!1,i.toggleClass("root-nav-hide",!1),h=!1)}});var s=!1;if(i.find(".social-cta button").each(function(){var r=t(this);for(var i in n.socialLinks)n.socialLinks[i]!=null&&n.socialLinks[i]!=""&&r.data("action")=="follow-"+i&&(r.css("display","inline-block"),s=!0)}),s)i.find(".social-cta").css({display:"block"}).find("button").on("click",function(i){var r=t(i.target).data("action");switch(r){case"follow-facebook":window.open(n.socialLinks.facebook);break;case"follow-twitter":window.open(n.socialLinks.twitter);break;case"follow-youtube":window.open(n.socialLinks.youtube);break;case"follow-pinterest":window.open(n.socialLinks.pinterest)}});ft.mouseenter(function(){et.toggleClass("active",!0)}).mouseleave(function(){et.toggleClass("active",!1)})};this.onAdLockChange=function(n,t){u._adLockChangeHandlers=u._adLockChangeHandlers||{};u._adLockChangeHandlersLastID=u._adLockChangeHandlersLastID||1;n.__adLockChangeHandlerID==null&&(n.__adLockChangeHandlerID=u._adLockChangeHandlersLastID++,u._adLockChangeHandlers[n.__adLockChangeHandlerID]={h:n,s:t||n})};this.offAdLockChange=function(n){u._adLockChangeHandlers=u._adLockChangeHandlers||{};n.__adLockChangeHandlerID!=null&&(u._adLockChangeHandlers[n.__adLockChangeHandlerID].h=null,u._adLockChangeHandlers[n.__adLockChangeHandlerID].s=null,u._adLockChangeHandlers[n.__adLockChangeHandlerID]=null,delete u._adLockChangeHandlers[n.__adLockChangeHandlerID],n.__adLockChangeHandlerID=null,delete n.__adLockChangeHandlerID)};this.resetAdVisibility=function(t){tt!=null&&(clearTimeout(tt),tt=null);var i=s;s=t===!0?!1:!0;i!=s&&u._fireAdLockChangeEvent();t!==!0&&(tt=setTimeout(function(){s&&(s=!1,u._fireAdLockChangeEvent())},bt*1e3));n.TriggerWinScroll(!0)};this.hideHeaderGraphic=function(t){t&&!v?(v=t,ut.css({display:"none"}),o.css({"min-height":"100%","margin-bottom":"1px"}),u.resetAdVisibility(!0)):!t&&v&&(v=t,o.css({"min-height":"","margin-bottom":""}),ut.css({display:""}),n.TriggerWinScroll(!0))};this._fireAdLockChangeEvent=function(){for(var n in u._adLockChangeHandlers||{})u._adLockChangeHandlers[n].h.apply(u._adLockChangeHandlers[n].s,[s])};this._getTopAdLockOffset=function(){return 0};this._getLockAtScrollTopOffset=function(n){return v?0:d-(n||u._getTopAdLockOffset())-ct};this._getFixTopOffset=function(n){return-1*((n||u._getLockAtScrollTopOffset())+ct)+"px"};this._handleWinScroll=function(r){var it,ft,wt,ct,vt;if(!o.hasClass("prep-sidebar")){var ut=u._getTopAdLockOffset(),p=b?0:e>300?300:210,yt=5,tt=0,et=0,pt=r.y>=e&&r.fy>=e;ut!=nt&&(et=ut-nt,nt=ut);p!=g&&(tt=p-g,g=p);s!=lt&&(lt=s);b?!0||a?pt?k.css({opacity:1}):k.css({opacity:""}):(i.toggleClass("small-logo",!0),a=!0):(pt||(it=(e-y-(r.y-y))/(e-y),ft=(e-y*3-Math.min(r.y,r.y<p+30?0:r.y-(p+30)))/(e-y*3),it>1&&(it=1),it<0&&(it=0),ft<0&&(ft=0),st.transformXY(0,r.y/4+"px").css({opacity:it}),ht.transformXY(0,-.5*r.y+"px"),ot&&(wt=-260*(1-ft),ct=wt+80,ct<0?rt.transform(""):rt.transformXY(0,ct+"px")),k.css({opacity:1-ft*.5})),!1&&a?r.y<yt&&!v&&(i.toggleClass("small-logo",!1),a=!1,vt=function(){if(window.waitForFont&&window._fixSWN){var n=t("#asw > a");n.length!=0&&n[0].scrollHeight>n[0].offsetHeight*2&&waitForFont(_fixSWN)}},setTimeout(vt,200),setTimeout(vt,555)):!1&&r.y>=yt&&(i.toggleClass("small-logo",!0),a=!0));c?!b&&Math.ceil(r.y)<p&&Math.ceil(r.fy)>=p-tt?(i.toggleClass("immediate",!0),i.css({position:"absolute",top:""}),c=!1,i.toggleClass("root-nav-hide",!1),h=!1,(f=="0px"||f=="0"||f=="")&&(f=i.css("top"),d=Number(f.substring(0,f.length-2)))):tt!==0&&(i.css({top:ut}),u._fireAdLockChangeEvent(),(r.y>0||r.fy>0)&&window.scrollTo(0,Math.ceil(r.y)+tt+et)):Math.ceil(r.y)>=p&&Math.ceil(r.fy)<p-tt?(i.css({position:"fixed",top:ut}),c=!0,p>0&&(i.toggleClass("root-nav-hide",!0),h=!0),n._raf.call(window,function(){i.toggleClass("immediate",!1)})):tt!==0&&(u._fireAdLockChangeEvent(),(r.y>0||r.fy>0)&&window.scrollTo(0,Math.ceil(r.y)+tt+et));c&&!h&&r.dy>0&&r.y>30?(i.toggleClass("root-nav-hide",!0),h=!0):!w&&h&&(r.dy<=-1&&(r.y<at||!l)||!c)&&(i.toggleClass("root-nav-hide",!1),h=!1);l&&c&&h&&!w&&r.dy>=1&&Math.ceil(r.y)>e+100?(i.toggleClass("scroll-hide",!0),w=!0):w&&(!l||r.dy<0||Math.ceil(r.y)<=e+100)&&(i.toggleClass("scroll-hide",!1),w=!1,at=Math.ceil(r.y)-200)}}};n.Images=new function(){this.uploadifyOptions=[];this.showUploadPrompt=function(i){i=t.extend(!0,{uploadID:(new Date).getTime(),uploadType:"",uploadToID:0,title:"Upload New Image",crop:!1,minSizeToCrop:[0,0],cropAspectRatio:0,minSize:[1,1],maxSize:[9223372036854775807,9223372036854775807],liveThumbnailSize:[70,50],cropOnly:!1,cropExistingImageID:"",onResponse:function(){},onBeforeClose:function(){}},i);i.formURL=n.BuildAJAXUrl("getpreviewimageuploadform",{TimeStamp:i.uploadID,UploadType:i.uploadType,UploadToID:i.uploadToID,CropOnly:i.cropOnly});n.NavBar.createAjaxDialog({URL:i.formURL,ContainerID:i.uploadID,Title:i.title,onOpen:function(){var r=["X","-","Up","load","Key"];r.s={};i.k=r.s[r.join("")]=t(["#",r[2],r[3],r[1],r[4],r[1],i.uploadID].join("").toLowerCase()).val();t("#image-drop-zone-"+i.uploadID).dropzone({url:n.BuildAJAXUrl("uploadpreviewimage/"),maxFilesize:10,filesizeBase:1024,thumbnailWidth:216,thumbnailHeight:100,clickable:!0,acceptedFiles:"image/*,.jpg,.jpeg,.png,.gif,.bmp",dictFallbackMessage:"Update your browser to upload images",dictInvalidFileType:"That is not a supported image file. Please use a JPG, GIF, or PNG image.",headers:r.s,init:function(){this.on("sending",function(){t("#web-image-zone-"+i.uploadID).hide()});this.on("error",function(t,i){console.log("error");console.dir(arguments);n.NavBar.close();n.Alerts.DisplayErrorNotification(i)});this.on("success",function(t,r){r.Error!=null?(n.NavBar.close(),n.Alerts.DisplayErrorNotification(r.Error.ErrorText)):n.Images.showCropPrompt(i,r.Response.Value)});this.on("canceled",function(){})}});var u=t("#upload-container-"+i.uploadID).find("form"),f=u.find("#upload-web-image-"+i.uploadID).val(""),e=u.find("button");u.on("submit",function(u){u.preventDefault();var e=f.val();return e!=""&&e.match(n.UrlRegEx.urlExact)?(e.toLowerCase().indexOf("http")!==0&&(e=n.Scheme.correctNative("http://"+e)),t.ajax({url:n.BuildAJAXUrl("uploadpreviewimage/"),data:{url:e},method:"POST",type:"POST",headers:r.s,dataType:"json",success:function(t){t.Error?(n.Alerts.DisplayErrorNotification(t.Error.ErrorText),n.NavBar.close()):n.Images.showCropPrompt(i,t.Response.Value)},error:function(t){n.Alerts.DisplayErrorNotification("Unexpected Error Uploading Image");n.NavBar.close();console.dir(t)}})):(n.Alerts.DisplayErrorNotification("Please enter a valid Image URL"),f.focus()),!1})},beforeClose:function(){i.onBeforeClose()}})};this.showCropPrompt=function(i,r){if(r==null){n.Alerts.DisplayErrorNotification("Can't Crop... Invalid Image Model Received.");return}if(i=t.extend(!0,{uploadID:(new Date).getTime(),uploadType:"",uploadToID:0,title:"Upload New Image",crop:!0,minSizeToCrop:[0,0],cropAspectRatio:0,minSize:[1,1],maxSize:[9223372036854775807,9223372036854775807],liveThumbnailSize:[70,50],cropOnly:!1,cropExistingImageID:"",onResponse:function(){},onBeforeClose:function(){}},i),r.OriginalWidth<i.minSize[0]||r.OriginalHeight<i.minSize[1]){n.NavBar.close();n.Alerts.DisplayErrorNotification("Image too small. Must be at least "+i.minSize[0]+"x"+i.minSize[1]+" pixels.");return}if(!i.crop||r.SkipCrop){i.onResponse({Response:{Value:r}},i);return}r.ImageWidth>300&&(r.ImageWidth=300,r.ImageHeight=r.OriginalHeight*300/r.OriginalWidth);r.ImageHeight>300&&(r.ImageWidth=r.OriginalWidth*300/r.OriginalHeight,r.ImageHeight=300);var u={width:0,height:0};i.cropAspectRatio>4/3?(u.width=r.OriginalWidth,u.height=r.OriginalWidth/i.cropAspectRatio,r.Top=Math.max(r.OriginalHeight/2-u.height/2,0),r.Left=0,r.Right=r.OriginalWidth,r.Bottom=Math.max(r.OriginalHeight/2+u.height/2,0)):i.cropAspectRatio===0?(u.width=r.OriginalWidth,u.height=r.OriginalHeight,r.Top=0,r.Left=0,r.Right=r.OriginalWidth,r.Bottom=r.OriginalHeight):(u.width=r.OriginalHeight*i.cropAspectRatio,u.height=r.OriginalHeight,r.Top=0,r.Left=Math.max(r.OriginalWidth/2-u.width/2,0),r.Right=Math.max(r.OriginalWidth/2+u.width/2,0),r.Bottom=u.height);t("#upload-container-"+i.uploadID).html("Loading preview image...");t("#live_thumbnail"+i.uploadID).css({width:i.liveThumbnailSize[0]+"px",height:i.liveThumbnailSize[1]+"px"});t("#croppable_image"+i.uploadID+", #preview_image"+i.uploadID).attr("src",r.PreviewImageURL);t("#croppable_image"+i.uploadID).on("load",function(){var u=window.setInterval(function(){window.clearInterval(u);t("#upload-container-"+i.uploadID).hide();t("#preview_image_container"+i.uploadID).show();t("#croppable_image"+i.uploadID).css({width:r.ImageWidth+"px",height:r.ImageHeight+"px",maxWidth:r.ImageWidth+"px",maxHeight:r.ImageHeight+"px"}).Jcrop({onChange:function(t){n.Images.UpdateLivePreviewImage(t,r,i.uploadID,i.liveThumbnailSize)},onSelect:function(t){n.Images.UpdateLivePreviewImage(t,r,i.uploadID,i.liveThumbnailSize)},aspectRatio:i.cropAspectRatio,setSelect:typeof i.setSelect!="undefined"&&i.setSelect!=null?i.setSelect:[r.Left,r.Top,r.Right,r.Bottom],minSize:i.minSize,maxSize:i.maxSize,trueSize:[r.OriginalWidth,r.OriginalHeight],boxWidth:r.ImageWidth,boxHeight:r.ImageHeight},function(){i.oJCrop=this})},100)});t("#saveCroppedImageButton"+i.uploadID).click(function(){var u=i.oJCrop.tellSelect(),e=t(this),o,f;if(u.h=Math.ceil(u.h),u.w=Math.ceil(u.w),u.x=Math.floor(u.x),u.y=Math.floor(u.y),u.x2=Math.ceil(u.x2),u.y2=Math.ceil(u.y2),u.h<i.minSize[1]&&(o=i.minSize[1]-u.h,o<=5&&(u.h=i.minSize[1],f=u.y-o,f<0?(f=0-f,u.y=0,u.y2+=f):u.y=f)),!e.hasClass("disabled")){if(u.w<i.minSize[0]||u.h<i.minSize[1]){n.Alerts.DisplayErrorNotification("Please select an area of your image to crop.");return}if(u.w>i.maxSize[0]||u.h>i.maxSize[1]){n.Alerts.DisplayErrorNotification("Please make sure the selected area of your image is not too big.");return}e.addClass("disabled");t.post(n.BuildAJAXUrl("savepreviewimage"),{UploadKey:i.k,h:u.h,w:u.w,x:u.x,x2:u.x2,y:u.y,y2:u.y2,ImageID:r.ImageID,OriginalWebUrl:r.OriginalWebUrl,IsCroppedImage:!0,ContentID:i.uploadToID},function(n){e.removeClass("disabled");i.onResponse(n,i)}).error(function(){e.removeClass("disabled")})}})};this.ChangeProfileImage=function(t){if(!n.loggedInUser.IsUser){n.ShowLoginScreen("Please login to change this profile image...");return}if(!(t==n.loggedInUser.UserID||n.loggedInUser.IsStaff)){n.Alerts.DisplayErrorNotification("Sorry, you do not have permission to change this profile image.");return}n.Images.showUploadPrompt({uploadType:"ProfileImage",uploadToID:t,title:"Upload Profile Image",crop:!0,cropAspectRatio:3/4,minSize:[135,180],onResponse:function(){n.NavBar.close();n.NavigateTo(location)}});return};this.CreatePreviewImageUploader=function(i){var r=(new Date).getTime();i=t.extend(!0,{imagePreviewUploadOptions:{uploadType:"",isUploadToIDOptional:!1,uploadToID:0,CropOnly:!1,ExistingImageID:""},uploadifyOptions:{ID:r,auto:!0,uploader:"/js/libs/uploadify/uploadify.swf",cancelImg:"/js/libs/uploadify/cancel.png",script:n.BuildAJAXUrl("uploadpreviewimage/"),sizeLimit:10485760,fileExt:"*.jpg;*.gif;*.png",fileDesc:"Web Image Files (.JPG, .GIF, .PNG)",onError:function(n,i,u,f){console.log("Error occured uploading file:",n,i,u,f);t("#file_upload_error"+r).text("Could not upload file.")},onComplete:function(u,f,e,o){var s,h,c;try{typeof o=="string"&&(o=t.parseJSON(o))}catch(l){o={Response:{Value:{Success:!1}},Error:{ErrorCode:500,ErrorText:"Unknown error occurred."}}}if(o.Error!=null){t("#file_upload_error"+r).text(o.Error.ErrorText);return}if(s=o.Response.Value,!i.cropOptions.enabled||s.OriginalWidth<i.cropOptions.minSizeToCrop[0]||s.OriginalHeight<i.cropOptions.minSizeToCrop[1]){if(i.uploadifyOptions.onResponse&&t.isFunction(i.uploadifyOptions.onResponse))i.uploadifyOptions.onResponse(o,r);else if(i.cropOptions.onResponse&&t.isFunction(i.cropOptions.onResponse))i.cropOptions.onResponse(o,r)}else{if(s.ImageWidth<i.cropOptions.minSize[0]||s.ImageHeight<i.cropOptions.minSize[1])return t("#"+r).dialog("close"),n.Alerts.DisplayErrorNotification("This image is too small.\n The minimum size is: "+i.cropOptions.minSize[0]+"x"+i.cropOptions.minSize[1]),!1;if(s.ImageWidth>i.cropOptions.maxSize[0]||s.ImageHeight>i.cropOptions.maxSize[1])return t("#"+r).dialog("close"),n.Alerts.DisplayErrorNotification("This image is too big. \nThe maximum size is: "+i.cropOptions.maxSize[0]+"x"+i.cropOptions.maxSize[1]),!1;s.ImageWidth>600&&(s.ImageWidth=600,s.ImageHeight=s.OriginalHeight*600/s.OriginalWidth);s.ImageHeight>600&&(s.ImageWidth=s.OriginalWidth*600/s.OriginalHeight,s.ImageHeight=600);h={width:0,height:0};i.cropOptions.aspectRatio>4/3?(h.width=s.OriginalWidth,h.height=s.OriginalWidth/i.cropOptions.aspectRatio,s.Top=Math.max(s.OriginalHeight/2-h.height/2,0),s.Left=0,s.Right=s.OriginalWidth,s.Bottom=Math.max(s.OriginalHeight/2+h.height/2,0)):i.cropOptions.aspectRatio===0?(h.width=s.OriginalWidth,h.height=s.OriginalHeight,s.Top=0,s.Left=0,s.Right=s.OriginalWidth,s.Bottom=s.OriginalHeight):(h.width=s.OriginalHeight*i.cropOptions.aspectRatio,h.height=s.OriginalHeight,s.Top=0,s.Left=Math.max(s.OriginalWidth/2-h.width/2,0),s.Right=Math.max(s.OriginalWidth/2+h.width/2,0),s.Bottom=h.height);t("#image_upload_container_"+r).html("Loading preview image...");t("#live_thumbnail"+r).css({width:i.cropOptions.liveThumbnailSize[0]+"px",height:i.cropOptions.liveThumbnailSize[1]+"px"});t("#croppable_image"+r+", #preview_image"+r).attr("src",s.PreviewImageURL);t("#croppable_image"+r).bind("load",function(){var u=window.setInterval(function(){t("#image_upload_container_"+r).hide();t("#preview_image_container"+r).width(s.ImageWidth+i.cropOptions.liveThumbnailSize[0]+20).height(s.ImageHeight).show();t("#"+r).dialog("option","position","center");t("#croppable_image"+r).width(s.ImageWidth).height(s.ImageHeight).Jcrop({onChange:function(t){n.Images.UpdateLivePreviewImage(t,s,r,i.cropOptions.liveThumbnailSize)},onSelect:function(t){n.Images.UpdateLivePreviewImage(t,s,r,i.cropOptions.liveThumbnailSize)},aspectRatio:i.cropOptions.aspectRatio,setSelect:typeof i.cropOptions.setSelect!="undefined"&&i.cropOptions.setSelect!=null?i.cropOptions.setSelect:[s.Left,s.Top,s.Right,s.Bottom],minSize:i.cropOptions.minSize,maxSize:i.cropOptions.maxSize,trueSize:[s.OriginalWidth,s.OriginalHeight],boxWidth:600,boxHeight:600},function(){c=this;t("#preview_image_container"+r).find(".jcrop-holder").addClass("fl")});window.clearInterval(u)},100)});t("#saveCroppedImageButton"+r).click(function(){var u=c.tellSelect(),f=t(this);if(!f.hasClass("disabled")){if(u.w<i.cropOptions.minSize[0]||u.h<i.cropOptions.minSize[1]){n.Alerts.DisplayErrorNotification("Please select a larger area of your image to crop. The current selection is too small.");return}if(u.w>i.cropOptions.maxSize[0]||u.h>i.cropOptions.maxSize[1]){n.Alerts.DisplayErrorNotification("Please make sure the selected area of your image is not too big.");return}f.addClass("disabled");t.post(n.BuildAJAXUrl("savepreviewimage"),{UploadKey:n.Images.GetUploadifyOption(r).uploadKey,h:Math.floor(u.h),w:Math.floor(u.w),x:Math.floor(u.x),x2:Math.floor(u.x2),y:Math.floor(u.y),y2:Math.floor(u.y2),ImageID:s.ImageID,OriginalWebUrl:s.OriginalWebUrl,IsCroppedImage:!0,ContentID:i.imagePreviewUploadOptions.uploadToID},function(n){f.removeClass("disabled");i.cropOptions.onResponse(n,r)}).error(function(){f.removeClass("disabled")})}})}}},ajaxDialogOptions:{URL:n.BuildAJAXUrl("getpreviewimageuploadform",{TimeStamp:r,UploadType:i.imagePreviewUploadOptions.uploadType,IsUploadToIDOptional:i.imagePreviewUploadOptions.isUploadToIDOptional,UploadToID:i.imagePreviewUploadOptions.uploadToID,CropOnly:i.imagePreviewUploadOptions.CropOnly}),Title:"Upload New Image",Width:"auto",ContainerID:r,onOpen:function(){t("#upload_web_image_button_"+r).click(function(u){u.preventDefault();var f=t(this);f.hasClass("disabled")||(f.addClass("disabled").val("Uploading..."),t.post(n.BuildAJAXUrl("uploadpreviewimage"),{UploadKey:t("#upload_web_image"+r).val()},function(n){i.uploadifyOptions.onComplete({},"",{},n,{});n.Error!=null&&f.removeClass("disabled").val("Upload")}))});i.imagePreviewUploadOptions.CropOnly&&t.post(n.BuildAJAXUrl("getalreadycroppedimage"),{ImageID:i.imagePreviewUploadOptions.ExistingImageID},function(n){i.uploadifyOptions.onComplete({},"",{},n,{})})}},cropOptions:{enabled:!1,onResponse:function(){},aspectRatio:0,maxSize:[9223372036854775807,9223372036854775807],minSize:[1,1],liveThumbnailSize:[70,50],minSizeToCrop:[0,0]}},i);n.Images.uploadifyOptions.push(i.uploadifyOptions);n.createAjaxDialog(i.ajaxDialogOptions)};this.UpdateLivePreviewImage=function(n,i,r,u){var e=i.OriginalWidth,o=i.OriginalHeight,f=u[0]/n.w;Math.round(f*n.h)>u[1]&&(f=f*(u[1]/Math.round(f*n.h)));t("#preview_image"+r).css({width:Math.round(f*e)+"px",height:Math.round(f*o)+"px",marginLeft:"-"+Math.round(f*n.x)+"px",marginTop:"-"+Math.round(f*n.y)+"px"});t("#live_thumbnail"+r).css({width:Math.min(u[0],Math.round(f*n.w))+"px",height:Math.min(u[1],Math.round(f*n.h))+"px",top:Math.max(-65,Math.max(0,Math.floor((u[1]-Math.round(f*n.h))/2))-65)+"px"})};this.GetUploadifyOption=function(n){for(var t=0;t<this.uploadifyOptions.length;t++)if(this.uploadifyOptions[t].ID==n)return this.uploadifyOptions[t]}};n.KudosGiver=function(i,r){var o=t.extend({speed:100,activeClass:"active",kudosGivenClass:"given",kudosRemovedClass:"removed",upvoteCallback:function(){},downvoteCallback:function(){}},r||{}),u=t(i),f=this,p=u.find(".animate-container"),h=p.find(".items"),e=h.find(".kudos-balance"),a=e.clone().addClass("give").insertAfter(e),v=e.clone().addClass("remove").insertBefore(e),s=u.data("kudos-given")||0,w=u.data("article-id")||0,y=u.data("current-total-kudos")||0,c=window.setTimeout(function(){},1),l=u.data("guideable");this.init=function(){t(function(){window.setTimeout(function(){h.css({top:-e.position().top-2})},50)});f.SetupEventHandlers()};this.GiveOrRemoveKudos=function(i){if(!n.loggedInUser.IsUser){n.ShowLoginScreen("Login to give Kudos to this post:");n.AddDoAfterLoginCallback(function(){f.GiveOrRemoveKudos(i)});return}if(i=t.extend({isUpvote:!0,kudosPower:n.loggedInUser.KudosPower||1,judgementPower:n.loggedInUser.JudgementPower||1,onVoteComplete:function(){}},i||{}),(!(s>0)||!i.isUpvote||n.loggedInUser.IsStaff)&&(!(s<0)||i.isUpvote||n.loggedInUser.IsStaff)){var r={KudosGiven:i.isUpvote?i.kudosPower:0,JudgementGiven:i.isUpvote?0:i.judgementPower,KudosBalance:parseInt(e.text(),10)+(i.isUpvote?i.kudosPower:-1*i.judgementPower)};u.removeClass(i.isUpvote?o.kudosRemovedClass:o.kudosGivenClass);s===0?u.addClass(i.isUpvote?o.kudosGivenClass:o.kudosRemovedClass):(r.KudosGiven=0,r.JudgementGiven=0,r.KudosBalance-=i.isUpvote?i.kudosPower:-1*i.judgementPower);f.UpdateKudosBalance(r);t.isEmptyObject(l)||l.UserHasGuideFlag()||t(".guide-flyout-container:visible").length<1&&l.Show();t.post(n.BuildAJAXUrl("givekudos"),{ArticleID:w,Kudos:i.isUpvote},function(n){i.onVoteComplete(n);try{f.UpdateKudosBalance(n.Response.Value.Kudos||r)}catch(t){}})}};this.UpdateKudosBalance=function(n){if(s=n.KudosGiven>=n.JudgementGiven?n.KudosGiven:-1*n.JudgementGiven,n.KudosBalance!=y){y=n.KudosBalance;var t={top:-(s>0?a.position().top:v.position().top)};s>0?a.text(n.KudosBalance):v.text(n.KudosBalance);h.animate(t,o.speed,"easeInQuad",function(){e.text(n.KudosBalance);h.css({top:-e.position().top})})}};this.SetupEventHandlers=function(){u.hover(function(){window.clearTimeout(c);c=window.setTimeout(function(){f.ContainerHover(!0)},100)},function(){window.clearTimeout(c);c=window.setTimeout(function(){f.ContainerHover(!1)},100)});u.on("click",".up.vote",f.UpvoteClick);u.on("click",".down.vote",f.DownvoteClick)};this.UpvoteClick=function(){f.GiveOrRemoveKudos({isUpvote:!0,onVoteComplete:o.upvoteCallback})};this.DownvoteClick=function(){f.GiveOrRemoveKudos({isUpvote:!1,onVoteComplete:o.downvoteCallback})};this.ContainerHover=function(){}};t.fn.kudosGiver=function(i){return this.each(function(){var r=t(this),u;if(r.data("kudosgiver"))return r.data("kudosgiver");u=new n.KudosGiver(r,i);r.data("kudosgiver",u);u.init()})};n.FixLongText=function(n){function u(){if(i[0].scrollWidth>i[0].offsetWidth){i.addClass("tooltip");i.attr("title",r);for(var n=r;i[0].scrollWidth>i[0].offsetWidth&&n.length>0;)n=n.substr(0,n.length-1),i.text(n+"...")}}var f=t.extend({}),i=n,e=this,r=i.text();this.init=function(){u()}};t.fn.fixLongText=function(i){return Modernizr.textoverflow?this:this.each(function(){var r=t(this),u=new n.FixLongText(r,i);u.init()})};n.Messages=new function(){this.DeleteMessage=function(i){var r={userID:0,conversationID:0,messageID:0,onResponse:function(){}};i=t.extend(r,i);n.ToggleProgressCursor(!0);t.post(n.BuildAJAXUrl("deletemessage"),{UserID:i.userID,MessageID:i.messageID,ConversationID:i.conversationID},function(t){n.ToggleProgressCursor(!1);i.onResponse(t)})};this.ReplyToMessage=function(i){var r={replyToMessageID:0,toUserID:0,body:"",fromUserID:0,onResponse:function(){}};i=t.extend(r,i);t.post(n.BuildAJAXUrl("sendreplymessagepost"),{ReplyToMessageID:i.replyToMessageID,ToUserID:i.toUserID,Body:i.body,FromUserID:i.fromUserID},function(t){n.ToggleProgressCursor(!1);i.onResponse(t)})}};n.Notifications=function(){function y(f){var l;f=t.extend({markAsRead:!1,replaceMarkup:!0,isSeederRender:!1,seededUsers:[],itemsPerPage:s,page:1},f);var h=0,c=f.isSeederRender?f.seededUsers:r,a=0;if(f.isSeederRender&&e.length<1&&(e=f.seededUsers),c&&c.length>0&&u.show(),f.replaceMarkup){for(l="",h=(f.page-1)*f.itemsPerPage;h<f.page*f.itemsPerPage&&h<c.length;h++){var o=c[h],y="<li class='"+st(o)+"'><a href='{0}' "+(o.NotificationType<0?"style='cursor:default;'":"")+" class='txt-clr-lightest clearfix'>"+(o.AboutUserID>0?"<img src='{1}' width='18' height='24' class='mgr-smaller fl'/>":"")+"<span class='fl notification-text'>{2}<\/span><\/a><\/li>",p=o.NotificationSummaryTemplate.replace("{AboutUser}",n.EncodeEntities(o.AboutUserDisplayName)).replace("{ContentName}",n.EncodeEntities(o.ContentTitle)).replace("{CommentOrResponse}",o.ArticleType==30?"responded to":"commented on").replace("{PostThread}",o.ArticleType==30?"thread":"post").replace("{WorldName}",n.EncodeEntities(o.WorldName)).replace("{ArticleType}",o.ArticleType==30?"Forum":o.ArticleType==20?"Inspiration":o.ArticleType==10?"How-Tos":"");l+=t.format(y,o.ActionLink||"",o.AboutUserImageURL||"",p||"");a++}ot({itemsPerPage:f.itemsPerPage,currentItemsPerPage:a,currentPage:f.page,listLength:c.length});f.page!=v?i.notificationsListContainer.fadeOut(250,function(){i.notificationsListContainer.html(l);i.notificationsListContainer.fadeIn(250)}):i.notificationsListContainer.html(l)}if(f.markAsRead&&!f.isSeederRender)for(h=0;h<c.length;h++)c[h].IsNew=!1;f.isSeederRender||ht()}function et(){var i=t(this),o=i.hasClass("next"),u=e.length>0,f=u?e.length:r.length,n=v;i.hasClass("disabled")||(n=o?n+1:n-1,(n-1)*s>f&&(n=Math.round(f/s)),n<1&&(n=1),y({replaceMarkup:!0,isSeederRender:u,seededUsers:e,page:n}),v=n)}function ot(n){n=t.extend({itemsPerPage:s,currentItemsPerPage:0,currentPage:1,listLength:0},n);l.addClass("disabled");a.addClass("disabled");n.currentPage>1&&a.removeClass("disabled");n.currentItemsPerPage>=n.itemsPerPage&&n.currentPage<n.listLength/n.itemsPerPage&&l.removeClass("disabled")}function st(n){var t="mgb-smaller";return n!=null&&n&&(t+=n.IsNew?" isNew":" isOld",n.NotificationType<0?t+="' onclick='return false;":n.NotificationType==99&&" seeder-notification' data-user-id='"+n.UserID+"'"),t}function p(f){f=t.extend({markAsRead:!1,replaceMarkup:!0},f);t.post(n.BuildAJAXUrl("getusernotifications"),{markAsRead:f.markAsRead},function(n){n.Error==null&&(c=!1,r=n.Response.Value,i.profileArea.find(".loading-element").hide(),r.length<1&&(r.push({NotificationSummaryTemplate:"You currently have no notifications.",ActionLink:"/",NotificationType:-1}),u.hide()),y(f))})}function ht(){for(var u,n=0,t=0;t<r.length;t++)u=r[t],u.IsNew&&n++;i.profileArea.find(".new-notifications").text(n);n+=tt+it;n>0?i.profileArea.removeClass("noNotifications").addClass("hasNotifications").find("a .notifications-area").text(n):i.profileArea.removeClass("hasNotifications").addClass("noNotifications").find("a .notifications-area").hide()}function ct(){i.profileArea=i.userInfo.find(".profile-area");i.creditsCountContainer=i.userInfo.children(".credits");i.kudosCountContainer=i.profileArea.siblings(".kudos");i.worldsListContainer=i.header.find(".worlds-list-container");tt=i.profileArea.data("new-message-count");it=i.profileArea.data("rough-drafts-count");i.notificationsListContainer=i.profileArea.find(".notifications-list");i.logOutButton=i.profileArea.find(".logout-btn");u=i.profileArea.find(".nav-buttons");l=u.find(".next");a=u.find(".prev")}function lt(){var r=function(n){if(f&&window.clearTimeout(f),h=!0,n.pointerType&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&!i.profileArea.data("isCallingHover"))return n.preventDefault(),n.stopImmediatePropagation(),!1;w(!0)},e=function(n){if(n.pointerType&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&!i.profileArea.data("isCallingHover"))return n.preventDefault(),n.stopImmediatePropagation(),!1;f&&window.clearTimeout(f);h=!1;f=window.setTimeout(function(){w(!1)},1e3)},s,c;if(o&&i.profileArea[0])i.profileArea[0].addEventListener("MSPointerOver",r,!1),i.profileArea[0].addEventListener("MSPointerOut",e,!1);else{i.profileArea.on("mouseenter",r);i.profileArea.on("mouseleave",e)}if(s=function(n,t){if(n.pointerType&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&!t.data("isCallingHover"))return n.preventDefault(),n.stopImmediatePropagation(),!1;ft.HandleSimpleHover({on:n.type=="mouseenter"||n.type=="MSPointerOver"||n.type=="click"&&!t.hasClass("active"),element:t})},t.each([i.creditsCountContainer,i.kudosCountContainer,i.worldsListContainer],function(n,t){(function(n,t){function i(n){s(n,t)}if(o&&t[0])t[0].addEventListener("MSPointerOver",i,!1),t[0].addEventListener("MSPointerOut",i,!1);else{t.on("mouseenter",i);t.on("mouseleave",i)}})(n,t)}),o||Modernizr.touch){c=function(i){var f=t(this),u=f.parent(),o=u.data("isCallingHover");return i.preventDefault(),i.stopImmediatePropagation(),o===undefined&&u.removeClass("active"),f.parents(".active").length>0&&o!==undefined&&f.attr("href")!=null&&f.attr("href").indexOf("javascript")!==0&&n.NavigateTo(f.attr("href")),u.data("isCallingHover",!0),u.hasClass("profile-area")?i.type=="mouseenter"||i.type=="MSPointerOver"||i.type=="click"&&!u.hasClass("active")?r(i):e(i):s(i,u),u.data("isCallingHover",!1),!1};i.userInfo.find("a").on("click",c);i.worldsListContainer.find("a").on("click",c)}t("body").on("click",function(n){(o||Modernizr.touch)&&(h=!!t(n.target).parents(".active").length);h||w(!1)});i.logOutButton.click(function(i){i.preventDefault();var r=t(this);r.hasClass("disabled")||(r.addClass("disabled"),t.post("/account/logout",{},function(){n.ssSync()}))});i.notificationsListContainer.on("click","li > a",at);u.on("click",".btn",et);i.switchAccountButton=i.profileArea.find(".switch-account-btn");i.switchAccountButton.click(function(){var n=i.profileArea.find(".loading-element").show();i.notificationsListContainer.html();rt=!0;t.post("/Ajax/GetSeederUsers",function(t){if(!t.Error){var i=t.Response.Value.SeededUsers;n.hide();y({isSeederRender:!0,seededUsers:i,replaceMarkup:!0})}})});i.profileArea.find(".switch-original-account-btn").click(function(n){n.preventDefault();ut({switchToOriginal:!0})})}function at(n){var r=t(this),i=r.data("user-id");i&&(n.preventDefault(),ut({userID:i}));p({markAsRead:!0})}function ut(i){i=t.extend({userID:0,switchToOriginal:!1},i);t.post("/Ajax/SwitchAccount",{userID:i.userID,switchToOriginal:i.switchToOriginal},function(t){t.Error!=null&&n.NavigateTo(location)})}function w(n){n?(i.profileArea.siblings().removeClass("active"),i.worldsListContainer.removeClass("active"),i.profileArea.addClass("active"),window.clearTimeout(g),g=window.setTimeout(function(){!i.profileArea.hasClass("active")||nt||rt||(nt=!0,p({markAsRead:!0,replaceMarkup:!1}))},2500),r.length<1&&!c&&(c=!0,p())):i.profileArea.removeClass("active")}var ft=this,f=0,b=0,k=0,d=0,g=0,nt=!1,r=[],e=[],c=!1,tt=0,it=0,rt=!1,u={},l={},a={},v=1,s=5,h=!1;this.init=function(){ct();lt()};this.HandleSimpleHover=function(n){if(n=t.extend({on:!0,element:i.creditsCountContainer},n),window.clearTimeout(b),window.clearTimeout(k),window.clearTimeout(d),n.on)i.header.find(".active").removeClass("active"),n.element.toggleClass("active",!0);else{var r=window.setTimeout(function(){n.element.toggleClass("active",!1)},1e3);n.element.hasClass("credits")?b=r:n.element.hasClass("kudos")?k=r:d=r}}};n.Profile=new function(){var i=0,f=0,r=!1,u=this;this._cacheElements=function(){this.$profileIconsList=t(".profile-stats .profile-icons li");this.$profileDetailsList=t("#profile-details-container .items").children();this.$userFollowButton=t(".followUserButton");this.$reputationCounter=this.$profileIconsList.find(".reputation");this.$kudosCounter=this.$profileIconsList.find(".kudos");this.$awardsCounter=this.$profileIconsList.find(".awards");this.$followersCounter=this.$profileIconsList.find(".followers");this.$followingCounter=this.$profileIconsList.find(".following");this.$sendNewMessageButton=t(".sendNewMessageButton");this.$showReplyEditorButton=t("#showReplyEditorButton");this.$replyEditorContainer=t(".message-reply-editor-container");this.$replyEditor=t("#messageReplyEditor");(this.User.UserID==n.loggedInUser.UserID||n.loggedInUser.IsStaff)&&(this.$changeProfileImageLink=t(".profile-image a"),this.$roughDraftsContainer=t("#roughDraftsContainer"),this.$viewRoughDraftsButton=t("#viewRoughDrafts"));u.$kudosCounter.text(n.GetKiloFormat(u.$kudosCounter.text()))};this._setupHandlers=function(){this.scrollAPI=t("#profile-details-container").scrollable({circular:!1,speed:150,initialIndex:i,next:".nonexistantclassthatshouldneverexist",prev:".nonexistantclassthatshouldneverexist"}).data("scrollable");this.$profileIconsList.hover(function(){n.Profile.scrollAPI.seekTo(t(this).index(),100);r=!0},function(){r=!1;window.clearTimeout(f);f=setTimeout(function(){r||n.Profile.scrollAPI.seekTo(i)},1e3)});this.$userFollowButton.hover(n.User.OnFollowButonHover);this.$userFollowButton.click(n.User.OnFollowUserClick);location.hash.indexOf("reply")>-1&&u.$replyEditor.focus();this.$sendNewMessageButton.click(function(t){if(t.preventDefault(),n.clearRedirect(),!n.loggedInUser.IsUser){n.ShowLoginScreen("Login to send a message to "+n.Profile.User.DisplayName+":");return}n.createAjaxDialog({URL:n.BuildAJAXUrl("getsendnewmessageform?FromUserID="+n.loggedInUser.UserID+"&ToUserID="+n.Profile.User.UserID),Title:"Send New Message",Width:500,ContainerID:"sendNewMessageDialogContainer"})});t("#content-container").on("click",".deleteMessageButton",function(){n.Profile.DeleteMessageHandler(this)});this.$showReplyEditorButton.click(function(){n.Profile.ToggleReplyEditor()});(this.User.UserID==n.loggedInUser.UserID||n.loggedInUser.IsStaff)&&this.$changeProfileImageLink.click(function(t){t.preventDefault();t.stopImmediatePropagation();n.Images.ChangeProfileImage(n.Profile.User.UserID)})};this.DeleteMessageHandler=function(i){var r=t(i),u=r.data("action"),f=r.data("messageid"),e=r.data("conversationid");(u!="deleteConversation"||confirm("Are you sure you want to delete this conversation?"))&&n.Messages.DeleteMessage({userID:n.Profile.User.UserID,messageID:u=="deleteMessage"?f:0,conversationID:u=="deleteConversation"?e:0,onResponse:function(i){if(i.Error!=null)t.jGrowl(i.Error.ErrorText,{life:6e3});else{var f=t(".conversation-container");u=="deleteMessage"||f.length<1?n.DeleteAnimation(r.parents(".message-container:first")):f.animate({backgroundColor:"#fb6c6c"},400,function(){t(this).slideUp(500,function(){t(this).remove();n.NavigateTo(i.Response.Value.InboxUrl)})})}}})};this.ToggleReplyEditor=function(t){var i=n.Profile.$replyEditorContainer.is(":visible");typeof t!="undefined"&&t!=null&&(i=!t);i?(n.Profile.$replyEditor.text(""),n.Profile.$replyEditorContainer.slideUp("slow"),n.Profile.$showReplyEditorButton.show()):(n.Profile.$replyEditorContainer.slideDown("slow"),n.Profile.$showReplyEditorButton.hide())};this.init=function(r){t.extend(this,r);this._cacheElements();i=r.DefaultTab||0;n.Profile.$profileIconsList.eq(i).addClass("active");this._setupHandlers()}};n.SettingsMenu=function(i,r){var u=t.extend({settingsButtonClass:".settings-button",settingsMenuClass:".settings-menu",items:"ul li a",activeClass:"active",stickyActive:!1},r||{}),f=t(i),o=this,h=f.find(u.settingsButtonClass),s=f.find(u.settingsMenuClass),e=t(u.items,s);(!e||e.length<1)&&(e=f.find(u.items));this.init=function(){if(!n.User.HasGuideFlag(n.Enums.GuideType.FirstWorldAdmin)&&n.currentWorld!=null&&n.currentWorld.IsRequestingUserModerator&&e.length>0){var i=!1;e.each(function(){if(t(this).text()=="World Settings")return i=u.stickyActive=!0,!1})}o.SetupEventHandlers()};this.ToggleElement=function(n,i){var r=typeof i!="undefined"?i:!n.hasClass(u.activeClass);r?(n.toggleClass(u.activeClass,!0),setTimeout(function(){t(".settings-container:not(."+u.activeClass+")").css("display","none")},10),n===f&&setTimeout(function(){c.on("click.settingsMenuCatch",function(){o.ToggleElement(n)})},10)):u.stickyActive||(n===f&&c.off("click.settingsMenuCatch"),n.toggleClass(u.activeClass,!1),setTimeout(function(){t(".settings-container").css("display","")},10))};this.SetupEventHandlers=function(){h.on("click",function(){o.ToggleElement(f)});e.click(function(i){var u=t(this),r=u.data(),f=r.settingsAdditionaldata||{},o=eval("("+(r.settingsOnresponse||"function () {}")+")"),s=eval("("+(r.settingsOnsuccess||"function () {}")+")"),e;r.settingsCustomhtml||(i.preventDefault(),!r.settingsConfirm&&!0||confirm(r.settingsConfirmMessage||"Are you sure you want to do this?"))&&(r.settingsFormoptions&&!0?(e=t.extend({},{Title:u.text(),URL:u.attr("href"),AdditionalData:f},r.settingsFormoptions||{}),n.createAjaxDialog(e)):t.post(u.attr("href"),f,function(t){(r.settingsDisplaynotificationonerror||!1)&&t.Error!=null&&n.Alerts.DisplayErrorNotification(t.Error);t.Error==null&&s(t);o(t)}))});s.on("click",function(){o.ToggleElement(f)})}};t.fn.settingsMenu=function(i){return this.each(function(){var r=t(this),u;if(r.data("settingsMenu"))return r.data("settingsMenu");u=new n.SettingsMenu(r,i);r.data("settingsMenu",u);u.init()})};n.Social=new function(){this.FacebookShare=function(n){var t="https://www.facebook.com/sharer.php?",i;t+="u="+encodeURIComponent(n.URL);i=window.open(t,"","width=800,height=400");i.focus()};this.TwitterShare=function(n){var t="https://twitter.com/share?",i;t+="url="+encodeURIComponent(n.URL);i=window.open(t,"","width=800,height=400");i.focus()};this.GetFacebookInfo=function(n,i){var r="https://api.ak.facebook.com/restserver.php?v=1.0&method=links.getStats&urls={0}&format=json&callback=?",u={url:"",normalized_url:"",share_count:0,like_count:0,comment_count:0,total_count:0,click_count:0,comments_fbid:null,commentsbox_count:0};return r=t.format(r,encodeURIComponent(n.URL)),t.getJSON(r).success(function(n){u=t.extend(u,n[0]);i(u)})};this.GetTwitterInfo=function(n,i){var r="https://urls.api.twitter.com/1/urls/count.json?url={0}&callback=?",u={count:0,url:""};return r=t.format(r,encodeURIComponent(n.URL)),t.getJSON(r,function(n){u=t.extend(u,n);i(u)})}};n.User=new function(){var i=this;this.FollowUser=function(i){var r={userID:0,followUserID:0,isDelete:!1,onResponse:function(){}};i=t.extend({},r,i);n.ToggleProgressCursor(!0);t.post(n.BuildAJAXUrl("addupdatesocialconnection"),{FollowUserID:i.followUserID,IsDelete:i.isDelete,UserID:i.userID},function(t){n.ToggleProgressCursor(!1);i.onResponse(t)})};this.GetGuideFlag=function(){return t.getCookie("GuideFlag")||n.Enums.GuideType.None};this.HasGuideFlag=function(t){return((typeof t=="undefined"||t==null)&&(t=n.Enums.GuideType.None),!t)?!1:i.GetGuideFlag()&t?!0:!1};this.OnFollowButonHover=function(n){var i=t(this),r=i.data("is-following"),o=n.type=="mouseenter",u,f,e;(typeof r=="undefined"||r==null)&&(r=!1);i.data("text-default")||i.data("text-default",i.text());i.data("button-color-default")||(u="blue",i.hasClass("silver")?u="silver":i.hasClass("gray")&&(u="gray"),i.data("button-color-default",u));f=i.data("text-default");e=i.data("button-color-default");o&&r?(i.width(i.width()),i.removeClass("blue silver gray").addClass("red").text("Unfollow")):(i.width("auto"),i.removeClass("red").addClass(e).text(f))};this.OnFollowUserClick=function(i){i.preventDefault();var r=t(this),u=r.data("is-following"),f=r.data("userid");if((typeof u=="undefined"||u==null)&&(u=!1),!n.loggedInUser.IsUser)return n.ShowLoginScreen("Login to follow this user:"),n.AddDoAfterLoginCallback(function(){r.click()}),!1;r.data("is-following",!u);r.data("text-default","Follow"+(u?"":"ing"));r.removeClass("red");n.User.FollowUser({userID:n.loggedInUser.UserID,followUserID:f,isDelete:u})}};n.World=new function(){var r=this;this.init=function(){this._cacheElements();this._setupHandlers()};this._setupHandlers=function(){var i=t("#main-wrapper .world-header");i.on("click",".btn",r.JoinLeaveWorldButtonHandler);i.on("hover",".btn",r.WorldButtonHoverHandler);if(n.currentWorld.IsRequestingUserModerator||n.loggedInUser.IsStaff)t("#categories-list-container").on("click",".topics-mode-switcher .btn",r.TopicsModeSwitcherHandler)};this._cacheElements=function(){};this.TopicsModeSwitcherHandler=function(){var i=t(this),r=i.hasClass("image-grid"),u=i.data("subcategory-type")=="Inspiration";t.post("/Ajax/UpdateWorldSubcategoryMode",{WorldUrlName:n.currentWorld.UrlName,WorldSubcategoryType:u?n.Enums.WorldSubCategoryType.Inspiration:n.Enums.WorldSubCategoryType.HowTo,WorldSubCategoryMode:r?n.Enums.WorldSubCategoryMode.ImageGrid:n.Enums.WorldSubCategoryMode.TextList},function(){n.NavigateTo(location)})};this.updateWorldMemberStatus=function(i){if(i=t.extend({},{Action:"Join",WorldURLName:(i.World||{UrlName:n.currentWorld.UrlName}).UrlName,UpdateButtonText:!0,User:n.loggedInUser,UserID:(i.User||n.loggedInUser).UserID},i),!n.loggedInUser.IsUser){n.ShowLoginScreen("Login to follow this world:");n.AddDoAfterLoginCallback(function(){n.World.updateWorldMemberStatus(i)});return}return t.post(n.BuildAJAXUrl("updateworldmembership"),{Action:i.Action,WorldURL:i.WorldURLName,UserID:i.UserID},function(){})};this.userJoinCurrentWorld=function(){n.World.updateWorldMemberStatus({Action:"Join",World:n.currentWorld,User:n.loggedInUser})};this.userLeaveCurrentWorld=function(){n.World.updateWorldMemberStatus({Action:"Leave",World:n.currentWorld,User:n.loggedInUser})};this.WorldButtonHoverHandler=function(n){var r,u,f;if(t(n.target).hasClass("leave-world-btn")||t(n.target).hasClass("join-world-btn"))n.preventDefault();else return;var i=t(this),e=i.hasClass("join-world-btn"),o=n.type=="mouseenter";i.data("text-default")||i.data("text-default",i.text());i.data("button-color-default")||(r="blue",i.hasClass("silver")?r="silver":i.hasClass("gray")&&(r="gray"),i.data("button-color-default",r));u=i.data("text-default");f=i.data("button-color-default");o&&!e?(i.width(i.width()),i.removeClass("blue silver gray").addClass("red").text("Unfollow")):(i.width("auto"),i.removeClass("red").addClass(f).text(u))};this.JoinLeaveWorldButtonHandler=function(r){if(t(r.target).hasClass("join-world-btn")||t(r.target).hasClass("leave-world-btn"))r.preventDefault();else return;var u=t(this),e=u.hasClass("join-world-btn"),f={UrlName:u.data("world-urlname"),WorldName:u.data("world-name")};t.when(n.World.updateWorldMemberStatus({Action:e?"Join":"Leave",World:f})).done(function(r){if(r&&r.Response&&r.Response.Value)if(e){u.removeClass("join-world-btn red").addClass("leave-world-btn").text("Following").data("text-default","Following");var s=f.UrlName+n.urlBase.substring(n.urlBase.indexOf(".")),o=t(t.format('<li class="fl"><a href="{0}" class="fl txt-lbl upcase">{1}<\/a><\/li>',s,f.WorldName)).hide();i.worldsList.prepend(o);o.fadeIn("slow")}else u.removeClass("leave-world-btn").addClass("join-world-btn").text("Follow").data("text-default","Follow"),i.worldsList.children().each(function(){var n=t(this);n.text()==f.WorldName&&n.fadeOut("slow",function(){n.remove()})})})}};n.WorldLinks=new function(){var i=this,r=[],h="<div id='worldLinkItem{0}' data-id='{0}' class='item-container clearfix mgt-small mgl-smaller'><div class='fl clearfix mgt-small' style='width: 40px;'><div class='up move-link-btn btn arrow fl'  data-id='{0}'><\/div><div class='down move-link-btn btn arrow fr mgr-small' data-id='{0}'><\/div><\/div><div class='mgr-small fl'><input type='text' name='[{1}].Name' maxlength='50' size='25' value='{2}' placeholder='click to name your new link' data-val-required='Link Name is required.' data-val='true' class='valid isnew'/><\/div><div class='fl'><input type='text' name='[{1}].Link' maxlength='512' size='42' value='{3}'  placeholder='click to add a new link url' data-val-required='Link URL is required.' data-val='true' data-val-url='Invalid URL format.'  class='valid isnew'/><\/div><div class='ui-dialog-titlebar-close ui-corner-all fr mgr btn delete-link-btn' data-id='{0}'><span class='ui-icon ui-icon-closethick'>Delete<\/span><\/div><\/div>",s={},o=0,u={},e={},c={},f;this.init=function(r){if(r=t.extend({},{Links:{}},r),i._cacheElements(),i._setupHandlers(),r.Links)for(var f in r.Links)i.AddNewLink(r.Links[f]);i.AddNewLink();t("<div class='editor-field txt-center mgt'><input type='submit' class='btn blue med rnd' value='Save Changes' name='updateWorldLinks' id='updateWorldLinksButton'><\/div>").appendTo(t(".container form",u));t(function(){c=e.validate({onkeyup:!1,onblur:!1,ignore:".isnew"});n.OnElementReady(u)})};this._cacheElements=function(){u=t("#editWorldLinkContainer");e=t("form",u)};this._setupHandlers=function(){u.on("click",".move-link-btn",i.MoveLinkHandler);u.on("click",".delete-link-btn",i.DeleteLinkHandler);u.on("click","input[type='submit']",i.SaveChangesHandler);u.on("keyup","input[type='text']",i.LinkInputKeyUpHandler)};this.AddNewLink=function(n){var e={ID:-1,Name:"",SortOrder:r.length,Link:"",IsNew:!1,Deleted:!1},f,u;if((n==null||typeof n=="undefined")&&(e.IsNew=!0,o++),n=t.extend({},e,n),i.GetElementByID(n.ID).length<1)i.CreateEditLinkElement(n);else if(typeof n.element=="undefined"||n.element==null)if(n.IsNew){for(f=-1,u=0;u<r.length;u++)r[u].ID<=f&&(f=r[u].ID-1);n.ID=f;i.CreateEditLinkElement(n)}else n.element=i.GetElementByID(n.ID);r.push(n)};this.SetLinkOrder=function(n,t){n.element.find("input[name='["+n.SortOrder+"].Name']").attr("name","["+t+"].Name");n.element.find("input[name='["+n.SortOrder+"].Link']").attr("name","["+t+"].Link");n.SortOrder=t};this.GetElementByID=function(n){var t=i.GetLinkItemByID(n);return t?t.element:u.find("#worldLinkItem"+n)};this.GetLinkItemByID=function(n){for(var i,t=0;t<r.length;t++)if(i=r[t],i.ID==n)return i};this.CreateEditLinkElement=function(n){var i=t.format(h,n.ID,n.SortOrder,n.Name,n.Link),r=t("#updateWorldLinksButton",u);r.length>0&&!f&&(f=r);n.element=f&&f.length>0?t(i).insertBefore(f):t(i).appendTo(t(".container form",u))};this.ClearEmptyLinks=function(){for(var t,u=0,n=r.length-1;n>=0;n--)t=r[n],i.IsLinkEmpty(t)&&u++,u>1&&i.RemoveLinkElement(t)};this.IsLinkEmpty=function(n,i){var e=n.element.inputs=n.element.inputs||n.element.find("input"),r=!0,o=i||!1,u=0,f=0;return e.each(function(){f++;var n=t(this).val();n!=null&&n.length>0&&(r=!1,u++)}),o&&u!=f&&(r=!0),r};this.RemoveLinkElement=function(n){n.IsNew&&i.IsLinkEmpty(n)&&o>1&&(n.element.remove(),o--,r.splice(r.indexOf(n),1))};this.LinkInputKeyUpHandler=function(){window.clearTimeout(s);s=window.setTimeout(function(){i.AddNewLink();i.ClearEmptyLinks()},500)};this.DeleteLinkHandler=function(){var r=t(this),u=r.data("id"),n=i.GetLinkItemByID(u),f=n.Deleted;n.ID<0&&i.IsLinkEmpty(n)||(f?(n.element.removeClass("deleted"),n.Deleted=!1):(n.element.addClass("deleted"),n.Deleted=!0))};this.MoveLinkHandler=function(){for(var u,s=0,n=0,h=t(this),c=h.data("id"),f=i.GetLinkItemByID(c),e=h.hasClass("up"),o=0;o<r.length;o++)if(r[o].ID==c){n=s=o;break}(n+=e?-1:1,n<0&&(n=0),n>=r.length-1&&(n=r.length-1),n!=s)&&((u=r[n],u.IsNew||f.IsNew)||(r[n]=f,r[s]=u,u.element.animate({top:(e?26:-26)+"px"},400),f.element.animate({top:(e?-26:26)+"px"},400,function(){f.element.css({top:"0px"});u.element.css({top:"0px"});e?f.element.insertBefore(u.element):f.element.insertAfter(u.element)}),i.SetLinkOrder(u,u.SortOrder+(e?1:-1)),i.SetLinkOrder(f,f.SortOrder+(e?-1:1))))};this.SaveChangesHandler=function(f){var s,l,c,h,o,a;if((f.preventDefault(),s=t(this),l=s.hasClass("disabled"),!l)&&(e.find(".input-validation-error").removeClass("input-validation-error"),e.data("unobtrusiveValidation").validate())){for(s.addClass("disabled"),c=[],h=0;h<r.length;h++)o=r[h],o.IsNew&&(!o.IsNew||i.IsLinkEmpty(o,!0)||o.Deleted)||(a={ID:o.ID,Name:o.element.find("input[name='["+o.SortOrder+"].Name']").val(),SortOrder:h+1,Link:o.element.find("input[name='["+o.SortOrder+"].Link']").val(),Delete:o.Deleted},c.push(a));t.ajaxSettings.traditional=!0;t.post("/Ajax/UpdateWorldLinksPost","LinksString="+JSON.stringify(c)).error(function(n){s.removeClass("disabled");u.find(".validation-summary-errors ul").html("<li>Could not save changes because: <br/>"+n+"<\/li>")}).success(function(t){t.Error!=null?(s.removeClass("disabled"),u.find(".validation-summary-errors ul").html("<li>Could not save changes because: <br/>"+t.Error.ErrorText+"<\/li>")):(n.Alerts.QueueAlert("Links were successfully updated!"),n.NavigateTo(location))})}}};n.CustomizationOptions=function(i,r){this.options=[];this.customizationOptions="";this.toJSON=function(){return this.customizationOptions=this.getFlags(),{customizationOptionList:this.options,customizationOptions:this.customizationOptions}};this.toJSONString=function(){return JSON.stringify(this.toJSON())};this.toString=this.getFlags=function(){for(var n,i="",t=0;t<this.options.length;t++)n=this.options[t],n.isDefault||(i+=n.name+"="+encodeURIComponent(n.value)+";");return i};this.setCustomizationOptions=function(n){for(var u,r,i=0;i<this.options.length;i++)this.options[i].setDefault();if(n!=null&&t.trim(n)!="")for(u=n.split(";"),i=0;i<u.length;i++)r=u[i].split("="),r.length===2&&this.setOptionValue(r[0],decodeURIComponent(r[1]))};this.getOption=function(n){for(var t=0;t<this.options.length;t++)if(this.options[t].name.toLowerCase()==n.toLowerCase())return this.options[t];return null};this.getOptionValue=function(n){var t=this.getOption(n);return t==null?"":t.value};this.getOptionBoolValue=function(n){var t=this.getOption(n);return t==null?!1:t.boolValue};this.setOptionValue=function(n,t){var i=this.getOption(n);i!=null&&(i.setValue(t),this.customizationOptions=this.getFlags())},function(t,i,r){var u;if(i!=null&&i!=""&&i.customizationOptionList!=null&&i.customizationOptionList.length>0){for(u=0;u<i.customizationOptionList.length;u++)t.options.push(new n.CustomizationOption(i.customizationOptionList[u]));i.customizationOptions!=null&&i.customizationOptions!=""&&t.setCustomizationOptions(i.customizationOptions)}else if(i!=null&&i!=""&&i.length!=null&&i.length>0&&i[0].OptionPresets!=null)for(u=0;u<i.length;u++)t.options.push(new n.CustomizationOption(i[u]));r!=null&&r!=""&&typeof r=="string"&&t.setCustomizationOptions(r)}(this,i,r)};n.CustomizationOptions.fromJson=function(t,i){return new n.CustomizationOptions(t==""||t==null?null:typeof t=="string"?JSON.parse(t):t,i)};n.CustomizationOption=function(n){this.name="";this.label="";this.optionPresets=[];this.value="";this.boolValue=!1;this.isDefault=!0;this.isOverridden=!this.isDefault;this.toJSON=function(){for(var t,i={},n=0;n<this.optionPresets.length;n++)t=this.options.presets[n],i[t.value]=t.label;return{Name:this.name,Label:this.label,OptionPresets:i,Value:this.value}};this.setValue=function(n){for(var t=0;t<this.optionPresets.length;t++)if(n==this.optionPresets[t].value||n==null&&t==0){this.value=this.optionPresets[t].value;this.boolValue=this.optionPresets[t].boolValue;this.isDefault=this.optionPresets[t].isDefault;this.isOverridden=!this.isDefault;break}};this.setDefault=function(){this.optionPresets.length>0&&this.setValue(this.optionPresets[0].value)},function(n,i){var r,u,f;if(i!=null&&i!=""){if(i.Name!=null&&(n.name=i.Name),i.Label!=null&&(n.label=i.Label),i.OptionPresets!=null)for(r in i.OptionPresets)r!="length"&&(u={value:r,boolValue:r.toLowerCase().in("true","1","t","yes"),label:String(i.OptionPresets[r]),shortLabel:"",detail:"",isDefault:n.optionPresets.length===0},f=u.label.split(" - "),u.shortLabel=t.trim(f[0]),f.length===2&&(u.detail=t.trim(f[1])),n.optionPresets.push(u));n.setValue(i.Value)}}(this,n)};n.CustomizationOptionFlagField=function(i){var o=this,r=i,s=r.parent(),u=new n.CustomizationOptions.fromJson(r.data("customization-options"),r.val()),h=u.getFlags(),e,f=r;this.options=u;switch(String(r.data("display-mode")).toLowerCase()){case"2":case"toolbox":case"toolbar":e=n.CustomizationOptionFlagField.DisplayMode.Toolbox;break;case"1":case"form":default:e=n.CustomizationOptionFlagField.DisplayMode.Form}this.init=function(){switch(e){case n.CustomizationOptionFlagField.DisplayMode.Form:this.initForm();break;case n.CustomizationOptionFlagField.DisplayMode.Toolbox:this.initToolbox()}};this.initForm=function(){for(var o,s,e=0;e<u.options.length;e++){var n=u.options[e],h=t('<label for="{0}">{1}<\/label>'.format(r.name+n.name,n.label.htmlEscape())),i=t('<select id="{0}{1}" name="{0}{1}" data-option-name="{1}"><\/select>'.format(r.name,n.name)),c=i[0];for(o=0;o<n.optionPresets.length;o++)s=n.optionPresets[o],c.options[c.length]=new Option("{1}".format(sLabel,s.label),s.value,n.value==s.value);i.val(n.value);i.on("change",this._onSelectChange);f.after(h);h.after(i);f=i}};this.initToolbox=function(){for(var e,o,r=0;r<u.options.length;r++){var n=u.options[r],i=t('<select data-option-name="'+n.name+'"><\/select>'),s=i[0],h=n.label;for(e=0;e<n.optionPresets.length;e++)o=n.optionPresets[e],s.options[s.length]=new Option("{0}: {1}".format(h,o.shortLabel),o.value,n.value==o.value);i.val(n.value);i.on("change",this._onSelectChange);i.css("max-width",String(80/u.options.length)+"%");f.after(i);f=i}};this._onSelectChange=function(n){var i=t(n.target),e,f;i.is("select")||(i=i.closest("select"));e=i.data("option-name");u.setOptionValue(e,i.val());f=u.getFlags();r.val()!=f&&(r.val(f),r.trigger("change"))}};n.CustomizationOptionFlagField.DisplayMode={};n.CustomizationOptionFlagField.DisplayMode.Form=1;n.CustomizationOptionFlagField.DisplayMode.Toolbox=2;t.fn.customizationOptionFlagField=function(){return this.each(function(){var i=t(this),r;if(i.data("customizationOptionFlagField"))return i.data("customizationOptionFlagField");r=new n.CustomizationOptionFlagField(i);i.data("customizationOptionFlagField",r);r.init()})};n.Shims=new function(){n.TouchScroll=function(i){var h=this,f=t(i),e={},u=null,y=!1,c=1,s=null,o=null,l=null,a=null,v=null;this.init=function(i){if(e=t.extend({scrollbars:!0,mouseWheel:!0,click:!0,interactiveScrollbars:!0,shrinkScrollbars:"clip",fadeScrollbars:!1,marginBetweenItems:Number(f.data("margin-between-items")||0)},i||{}),f.css({overflow:"hidden"}),e.scrollX&&!e.scrollY&&h._initHorizontalScrollLayout(),u=new IScroll(f[0],e),s=f.find(".arrow-left"),o=f.find(".arrow-right"),h._initArrowClickEvents(),y&&h._initIScrollEventHandlers(),f.closest(".lockable-toolbox").length>0)n.Toolboxes.onChange(h._handleWinResize,h);r.on("resize",h._handleWinResize);f.on("remove",function(){h.destroy()})};this.destroy=function(){f.css({overflow:""});e.scrollX&&!e.scrollY&&h._destroyHorizontalScrollLayout();u.destroy();u=null;s=o=null;f.closest(".lockable-toolbox").length>0&&n.Toolboxes.offChange(h._handleWinResize);r.off("resize",h._handleWinResize)};this._initHorizontalScrollLayout=function(){var i=f.find(">ul>li").css({margin:"0 "+e.marginBetweenItems+"px 0 0"}),n=i.first().height(),r=(i.first().width()+e.marginBetweenItems)*i.length+e.marginBetweenItems;i.each(function(i){i=t(this);i.height()>n&&(n=i.height())});f.height(n).find(".scrollable, >ul").width(r).height(n);f.append('<div class="scroller-arrow arrow-left hide"><div class="fade"><\/div><em class="fa fa-chevron-left"><\/em><\/div>').find("em").css("line-height",n+"px");f.append('<div class="scroller-arrow arrow-right hide"><div class="fade"><\/div><em class="fa fa-chevron-right"><\/em><\/div>').find("em").css("line-height",n+"px");f.find(".snappable").length>0&&(c=Math.floor(f.width()/(f.find(".snappable").first().width()+e.marginBetweenItems))-1,c<=0&&(c=1),e=t.extend(e,{snap:".snappable",snapThreshold:.75}),y=!0)};this._destroyHorizontalScrollLayout=function(){f.find("li").css({margin:""});f.css("height","").find(".scrollable, ul").css({width:"",height:""});s.off("click");o.off("click");f.find("div.scroller-arrow").empty().remove();y=!1};this._initArrowClickEvents=function(){s.on("click",function(){u.options.snap=u.scroller.querySelectorAll(".snappable");u.currentPage=u._nearestSnap(u.x,0);var t=u.currentPage.pageX,i=u.pages.length-1,n=t-c;n<=0&&(n=0,setTimeout(function(){s.fadeOut(200)},100));o.css("display")=="none"&&o.fadeIn(200);n==0?u.goToPage(0,0,350,IScroll.utils.ease.circular):u.goToPage(n,0,400,IScroll.utils.ease.circular)});o.on("click",function(){u.options.snap=u.scroller.querySelectorAll(".snappable");u.currentPage=u._nearestSnap(u.x,0);var i=u.currentPage.pageX,n=u.pages.length-1,t=i+c;t>=n-1&&(t=n,setTimeout(function(){o.fadeOut(200)},100));s.css("display")=="none"&&s.fadeIn(200);t==n?u.goToPage(n,0,350,IScroll.utils.ease.circular):u.goToPage(t,0,400,IScroll.utils.ease.circular)})};this._initIScrollEventHandlers=function(){u.__refresh=u.refresh;u.refresh=function(){var n=this.options.snap;this.options.snap=this.scroller.querySelectorAll(".snappable");this.__refresh();this.options.snap=n;u.x+30>=0&&u.x!=0&&u.x!=u.maxScrollX&&u.scrollTo(0,0,0)};u.maxScrollX<0&&o.show();u.on("scrollEnd",function(){l!=null&&(clearInterval(l),l=null);u.currentPage=u._nearestSnap(u.x,0);a!=null&&(clearTimeout(a),a=null);u.x+30>=0&&u.x!=0&&u.x!=u.maxScrollX?u.scrollTo(0,0,50):u.x-30<=u.maxScrollX&&u.x!=u.maxScrollX&&u.x!=0&&u.scrollTo(u.maxScrollX,0,50);u.x>=0?s.fadeOut(200):s.fadeIn(200);u.x<=u.maxScrollX?o.fadeOut(200):o.fadeIn(200)});u.on("beforeScrollStart",function(){u.options.snap=!1});u.on("scrollStart",function(){l!=null&&(clearInterval(l),l=null);l=setInterval(function(){u.currentPage=u._nearestSnap(u.x,0)},100);a!=null&&(clearTimeout(a),a=null);a=setTimeout(function(){s.fadeIn(200);o.fadeIn(200)},50)})};this._handleWinResize=function(){n.isFullScreen()||(v!=null&&(clearTimeout(v),v=null),v=setTimeout(function(){v!=null&&(clearTimeout(v),v=null);u!=null&&(f.find(".snappable").length>0&&(c=Math.floor(f.width()/(f.find(".snappable").first().width()+e.marginBetweenItems))-1,c<=0&&(c=1),y||(e=t.extend(e,{snap:".snappable",snapThreshold:.75}),y=!0,h._initIScrollEventHandlers())),u.refresh(),u.x>=0?s.hide():s.show(),u.x<=u.maxScrollX?o.hide():o.show())},50))}};t.fn.touchscroll=function(i){return this.each(function(){var r=t(this),u;if(r.data("touchscroll"))return r.data("touchscroll");u=new n.TouchScroll(r);r.data("touchscroll",u);u.init(i)})};n.getArticleIDFromUrl=function(n){var t,i;return!/^(http(s)?\:\/\/)?(([a-z0-9-]+)\.)?((wonderhowto|foodhacksdaily|gadgethacks|invisiverse)\.com|reality\.news|driverless\.id)/i.test(n)||!/(([a-z][a-z0-9\-_]*)|([0-9]+[a-z][a-z0-9\-_]*))-(0)?([1-9][0-9]+)\/(edit\/)?$/i.test(n)?0:(t=/-((0)?([1-9][0-9]+))\/(edit\/)?$/i.exec(n),i=t&&t.length>1?String(t[1]):"0",(i.indexOf("0")==0?1:-1)*Number(i))};n.ContentNav=new function(t){var i=this,u=null,r=window.History,e=!1,f=/(([a-z][a-z0-9\-_]*)|([0-9]+[a-z][a-z0-9\-_]*))-(0)?([1-9][0-9]+)\/$/i,o=/-((0)?([1-9][0-9]+))\/$/i,s='<header class="{0} page-header header-height full-page-width" style="background-image:url({1});"><div id="header-bg-image" class="header-bg header-height full-page-width"><\/div><div class="center-frame header-height"><div class="logo-bar header-height"><center><strong class="site-logo">{2}<span class="logo"><img src="{3}" width="300" height="122"/><\/span><\/strong><em>{4}<\/em><\/center><\/div><\/div><\/header>',h='<span class="active-world-name">{0}<\/span>';this.prevArticleRoot=null;this.activeArticleRoot=null;this.nextArticleRoot=null;this.contentContainer=null;this.init=function(){u=t(".content-nav");i.contentContainer=t(".outer-article-wrapper");e=t("body").hasClass("subworld");u.length>0&&i.contentContainer.length>0&&(i.activeArticleRoot=i.contentContainer.find(".article-wrapper").first(),i._initRootEvents());i._initEvents();setTimeout(function(){i._preloadNext()},1e3)};this._initRootEvents=function(){r&&r.enabled&&(Modernizr.history?r.savedStates.length>1&&i._handleHistoryStateChange(!0):(r.options.disableSuid=!0,window.location.href.indexOf("#")>-1&&i._handleHistoryStateChange(!0)),r.Adapter.bind(window,"statechange",i._handleHistoryStateChange));t("body").on("click","a",function(r){var u=t(this),e=String(u.attr("href"));return r.which!==1||r.ctrlKey||r.metaKey||!rxMatchDomain.test(e)?!0:(u.is("#featured-story")&&window.ga&&ga("send","event","HeaderHero",n.oHero.id==n.oRootHero.id?"domainHeroClick":"siteHeroClick",oHero.title,oHero.id),i._handleExternalWorldClick(u,e,f.test(e)))?(r.stopImmediatePropagation(),r.stopPropagation(),r.preventDefault(),!1):f.test(e)?(u.closest(".article-container").length>0&&n.setActiveBrowseBase(),u.closest(".menu").length>0,!0):!0})};this._initEvents=function(){t("body").on("click","a",function(r){var e=t(this),u=String(e.attr("href"));return r.which!==1||r.ctrlKey||r.metaKey||!rxMatchDomain.test(u)?!0:i._handleExternalWorldClick(e,u,f.test(u))?(r.stopImmediatePropagation(),r.stopPropagation(),r.preventDefault(),!1):f.test(u)?(e.closest(".article-container").length>0&&n.setActiveBrowseBase(),t("<form><\/form>").attr({method:"post",action:u,style:"position:absolute;top:-1000px;left:-1000px;visibility:hidden;"}).append(t('<input type="hidden" name="key"/>').attr("value",n.activeBrowseBase)).appendTo("body").submit(),r.stopImmediatePropagation(),r.stopPropagation(),r.preventDefault(),!1):!0})};this._handleHistoryStateChange=function(u){var f=u===!0?r.savedStates[0]:r.getState(),o,e,s;if(t.isEmptyObject(f.data))return(o=f.hash,e=i._getPostID(o),e!=0)?(i.navToPost(e,!0),!1):!1;s=f.data;n.activeArticle&&s.articleID!=n.activeArticle.articleID&&i.navToPost(f.cleanUrl,!0)};this._handleExternalWorldClick=function(t,i){var r=rxMatchDomain.exec(i);if(r==null)return!1;var f=r[2],e=r[1],u=i.split("/");return f===_WHT_ctdn&&e===_WHT_csdn&&!(u.length===4&&u[3]==="")?!1:(n.NavigateTo(i),!0)};this._getWorldHeader=function(i,r,u){var f=n.WorldHeaders[i],e,o;return f==null?"":(e=u.hasClass("hhtl")?u:u.closest(".hhtl"),o=e.length==0?e.data("hht"):"",t(t.format(s,f.Theme,f.WorldBokehImgSrc,f.WorldOwnDomain?"":t.format(h,n.EncodeEntities(f.WorldName)),f.ThemeLogo,n.EncodeEntities(f.WorldSlogan))).css({"z-index":120}))};this._getPostID=function(n){if(typeof n=="number"&&String(n)!=="NaN")return n;var t=o.exec(n),i=t&&t.length>1?String(t[1]):"";return i==""?0:(i.indexOf("0")==0?1:-1)*Number(i)};this.getPostCacheKey=function(n){var t=typeof n=="number"&&String(n)!=="NaN"?n:i._getPostID(n);return t===0?"":(t<0?"v":"a")+String(Math.abs(t))};this._getNextPostID=function(){var n=u.find(".article-list").filter(function(){return t(this).css("display")==="block"}).find("li.article-item.active").next(".article-item");return n.length==0?0:Number(n.data("article-id"))};this._preloadNext=function(){var n=i._getNextPostID(),r=u.find(".article-list").filter(function(){return t(this).css("display")==="block"}).find("li.article-item.active").next(".article-item");n!=0&&this._preloadPost(n)};this._preloadPost=function(r,u,f,e,o){var h=i._getPostID(r),s=i.getPostCacheKey(h);if(s==="")return!1;if(n.ManagedArticle.collectGarbage(),n.ManagedArticle.Cache[s]!=null){if(n.ManagedArticle.Cache[s].loaded)return typeof u=="function"&&u.apply(i,[n.ManagedArticle.Cache[s],!0,e]),!0;if(typeof u=="function"){var c=null,l=9e3;fCacheWatcher=function(){n.ManagedArticle.Cache[s].loaded?u.apply(i,[n.ManagedArticle.Cache[s],!1,e]):--l>0&&(c=setTimeout(fCacheWatcher,10))};c=setTimeout(fCacheWatcher,10)}return!0}return n.ManagedArticle.Cache[s]={articleID:h,loaded:!1},t.post(n.BuildAJAXUrl("loadpost"),{articleID:h,includeRelated:o===!0?!1:!0},function(t){t.Response==null?t.Error!=null&&(n.ManagedArticle.Cache[s].loaded=!0,n.ManagedArticle.Cache[s].loadStamp=0,n.ManagedArticle.Cache[s].errorCode=t.Error.ErrorCode,n.ManagedArticle.Cache[s].errorText=t.Error.ErrorText,typeof u=="function"&&u.apply(i,[n.ManagedArticle.Cache[s],!1,e])):(n.ManagedArticle.Cache[s].loaded&&n.ManagedArticle.Cache[s].loadStamp!=0,n.ManagedArticle.Cache[s]=new n.ManagedArticle(t.Response.Value),n.ManagedArticle.Cache[s].errorCode=0,typeof u=="function"&&u.apply(i,[n.ManagedArticle.Cache[s],!1,e]))}).error(function(){console.log("Unexpected Error Preloading Post.");console.dir(arguments);n.ManagedArticle.Cache[s].loaded=!0;n.ManagedArticle.Cache[s].loadStamp=0;n.ManagedArticle.Cache[s].errorCode=500;n.ManagedArticle.Cache[s].errorText="AJAXError";typeof u=="function"&&u.apply(oScope||i,[n.ManagedArticle.Cache[s],!1,e])}),!0};this.highlightPostAsActive=function(n){var e=u.find("li.article-item.active"),l=e.length>0,r,f,o,i,s,h,c;if(e.each(function(){String(t(this).data("article-id"))!=String(n)&&(l=!1)}),!l)for(e.removeClass("active"),r=u.find('li.article-item[data-article-id="'+n+'"]'),r.addClass("active"),f=0;f<r.length;f++)if(o=t(r[f]),i=o.closest(".article-list"),i.length>0){if(s=i.data("filter-sort"),!s)continue;if(h=i.closest(".content-nav").find(".list-toggler li.active"),h.length>0&&s!=h.data("filter-sort"))continue;if(c=i.closest(".lockable-region").data("lockable"),c){c.scrollToItem(o,!0);continue}}};this.navToNext=function(r){if(!i._isNavigating){if(r&&r>0){setTimeout(function(){i.navToNext()},r);return}var f=n.oRootHero.id,u=n.currentWorld.IsCategoryOrSubCategoryWorld?n.activeArticle&&n.activeArticle.articleID==n.oHero.id?f:n.oHero.id:i._getNextPostID();u==0&&t(".footer-feature").length>0&&(u=f);u!=0&&i.navToPost(u)}};this.navToPost=function(r,u,f){var o,s;return(i._isNavigating=!0,!i._preloadPost(r,function(t,u,f){if(t.errorCode){switch(t.errorCode){case 404:n.Alerts.DisplayErrorNotification(t.errorText);break;case 500:n.NavigateTo(r);break;default:n.Alerts.DisplayErrorNotification(t.errorText)}n.activeArticle?i.highlightPostAsActive(n.activeArticle.articleID):console.log("couldn't re-highlight the previously active post");i._isNavigating=!1;return}setTimeout(function(){i._onNavToPostLoaded(t,u,f)},0)},!1,u,f))?(i._isNavigating=!1,!1):(n.ActivePlacements&&n.ActivePlacements.detachFrom(t(".left-col .content-nav")),i.highlightPostAsActive(i._getPostID(r)),o=t("#top-header").height()-(e?90:64),t(window).scrollTop()!=o&&(n.Header.resetAdVisibility(),n.scrollTo(0,o)),i.activeArticleRoot.addClass("masked"),i.contentContainer.toggleClass("loading",!0),s=function(){i.iLongLoadTO!=null&&(clearTimeout(i.iLongLoadTO),i.iLongLoadTO=null);i.contentContainer.toggleClass("still-loading");i.iLongLoadTO=setTimeout(s,1200)},i.iLongLoadTO=setTimeout(s,3e3),n.resetIdleTO(),!0)};this._onNavToPostLoaded=function(u,f,e){var o,s;if(u.updatePlacementTargeting(),n.ActivePlacements&&n.ActivePlacements.refresh(["topwide","bigbox","skin"]),i.iLongLoadTO!=null&&(clearTimeout(i.iLongLoadTO),i.iLongLoadTO=null),i.contentContainer.toggleClass("loading",!1).toggleClass("still-loading",!1),u.render(i.contentContainer,"masked"),i.highlightPostAsActive(u.articleID),u.articleID===n.activeArticle.articleID){n.ActivePlacements&&(n.ActivePlacements.reAttachTo(t(".left-col .content-nav")),n.ActivePlacements.refresh(["rightbox","leftbox"]));setTimeout(function(){i.activeArticleRoot.removeClass("masked");n.activeArticle.initView();i._isNavigating=!1},100);return}n.ActivePlacements&&n.ActivePlacements.detachFrom(i.activeArticleRoot);n.activeArticle.avid!=null&&n.KeepAlive({avid:n.activeArticle.avid});n.activeArticle.detach();n.activeArticle=null;i.activeArticleRoot=null;n.activeArticle=u;i.activeArticleRoot=u.conf.rootElement;n.activeArticle.initView();setTimeout(function(){i.activeArticleRoot.removeClass("masked");i._isNavigating=!1;n.ActivePlacements&&n.ActivePlacements.reAttachTo(i.activeArticleRoot,t(".left-col .content-nav"))},50);r&&r.enabled&&(o=u.conf.url.substring(u.conf.url.indexOf("/",8)),window.ga&&ga("set",{page:o,title:u.conf.pageTitle}),window.ga&&ga("send","pageview"),e!==!0?r.pushState({articleID:u.articleID},u.conf.pageTitle,o):(s=t("#top-header").height()-64,t(window).scrollTop()!=s&&n.scrollTo(0,s)));setTimeout(function(){i._preloadNext()},500)}}(t);n.ImgRolloverEffect=function(t){var u=this,i=t.find(".img-crop img");this.init=function(){if(r.width()>=768)t.on("mouseover.imgRolloverEffect",function(){u.toggleEffect(!0)}).on("mouseout.imgRolloverEffect",function(){u.toggleEffect(!1)})};this.toggleEffect=function(t){t?i.transition(n.random(5,15)+"s").transform("scale(1.5) rotate("+n.random(-10,10)+"deg)"+(String(i.css("margin-left")).indexOf("-")==0?" translateX(-25%)":"")):i.transition("0.2s").transform("")};this.destroy=function(){try{t.off(".imgRolloverEffect");i.transition("0.2s").transform("")}catch(n){}}};t.fn.imgRolloverEffect=function(){return this.each(function(){var i=t(this),r=new n.ImgRolloverEffect(i);i.data("imgrollovereffect",r);r.init()})};n.AutoUrlNameMirror=function(i){var u=this,f=!1,e={},r={maxUrlLength:50,$container:null,$txtUrlName:i,$txtName:null,$hidIsCustomized:null,$hidWasPreviouslySaved:null};this.init=function(n){if(r=t.extend(r,n||{}),(r.$container==null||r.$container.length==0)&&(r.$container=r.$txtUrlName.closest("form")),(r.$container==null||r.$container.length==0)&&(r.$container=r.$txtUrlName.closest("div")),(r.$txtName==null||r.$txtName.length==0)&&(r.$txtName=r.$container.find("input[name='"+String(r.$txtUrlName.attr("name")).replace("UrlName","Name")+"']").first()),(r.$hidIsCustomized==null||r.$hidIsCustomized.length==0)&&(r.$hidIsCustomized=r.$container.find("input[name='"+String(r.$txtUrlName.attr("name"))+"Customized']").first()),(r.$hidWasPreviouslySaved==null||r.$hidWasPreviouslySaved.length==0)&&(r.$hidWasPreviouslySaved=r.$container.find("input[name='"+String(r.$txtUrlName.attr("name"))+"EditMode']").first()),r.$txtUrlName.length>0&&r.$txtName.length>0){r.$txtUrlName.on("change keyup input focus",u._onUrlChange).on("blur",u._onUrlBlur);r.$txtName.on("change keyup input",u._onNameChange);u._isCustomized()||u._wasPreviouslySaved()||u._onNameChange()}};this._onUrlChange=function(){if(!f&&u._wasPreviouslySaved()&&(f=!0,alert("Changing the URL path will update all automated on-site links, but may result in broken links from external websites or those manually added to articles and/or menus. Please don't change it unless you're ok risking that.")),!u._wasPreviouslySaved()){var t=r.$txtUrlName.val(),e=r.$txtName.val(),i=n.AutoUrlNameMirror.nameToUrl(e,r.maxUrlLength);if(u._isCustomized()){(t==""||t==i)&&u._isCustomized(!1);return}i!=t&&(t==""?r.$txtUrlName.val(i):u._isCustomized(!0))}};this._onNameChange=function(){if(!u._wasPreviouslySaved()){var i=r.$txtUrlName.val(),f=r.$txtName.val(),t=n.AutoUrlNameMirror.nameToUrl(f,r.maxUrlLength);if(u._isCustomized()){i==t&&u._isCustomized(!1);return}r.$txtUrlName.val(t)}};this._onUrlBlur=function(){if((!u._wasPreviouslySaved()||f)&&u._isCustomized){var i=r.$txtUrlName.val(),t=n.AutoUrlNameMirror.nameToUrl(i,r.maxUrlLength);t!=i&&(r.$txtUrlName.val(t),t==n.AutoUrlNameMirror.nameToUrl(r.$txtName.val(),r.maxUrlLength)&&u._isCustomized(!1))}};this._isCustomized=function(n){return u._formBoolGetSet(r.$hidIsCustomized,n)};this._wasPreviouslySaved=function(n){return u._formBoolGetSet(r.$hidWasPreviouslySaved,n)};this._formBoolGetSet=function(n,t){return t!=null&&(n.length>0?n.val(t?"True":"False"):e[n.selector]=t?!0:!1),n.length>0?String(n.val()).toLowerCase()==="true":e[n.selector]?!0:!1}};n.AutoUrlNameMirror.nameToUrl=function(n,t){if(t=t||50,n=n.toLowerCase().trim().replace(/\s/ig,"-").replace(/[^a-z0-9-]/ig,"").replace(/[\-]+/ig,"-"),n.length>t&&(n=n.substring(0,t)),/\-([0-9]+)$/ig.test(n)){var i=n.substring(0,n.lastIndexOf("-"))+n.substring(n.lastIndexOf("-")+1);/\-([0-9]+)$/ig.test(i)?(n.length>t-1&&(n=n.substring(0,t-1)),n+="-"):n=i}return/^([0-9]+)$/ig.test(n)&&(n.length>t-1&&(n=n.substring(0,t-1)),n+="-"),n};t.fn.autoUrlNameMirror=function(i){return this.each(function(){var r=t(this),u;if(r.data("autoUrlNameMirror"))return r.data("autoUrlNameMirror");u=new n.AutoUrlNameMirror(r);r.data("autoUrlNameMirror",u);u.init(i)})};n.DataListEditor=function(i){var u=this,f,o,s,r={template:'<li data-id="{0}"> <button type="button" class="raised-btn fr merge-left short fa fa-chevron-down" data-action="down"><\/button> <button type="button" class="raised-btn fr merge-right short fa fa-chevron-up" data-action="up"><\/button> {1}<button type="button" class="raised-btn fr short hide save-btn" data-action="save">Save<\/button><button type="button" class="raised-btn fr short fa fa-trash-o" data-action="delete"><\/button> {2}<\/li>',inputTemplate:'<input class="{0}" type="text" value="{1}" data-start-value="{1}" placeholder="{2}" /> ',multilineInputTemplate:'<textarea class="{0}" cols="20" rows="2" style="height:100px;" data-start-value="{1}" placeholder="{2}">{1}<\/textarea> ',showSaveOption:!0,idPostName:"id",idDataProperty:"id",inputs:[{type:"string",postName:"text",dataProperty:"text",placeholder:"Text",multiline:!1}],listData:[],onMove:function(n,t,i){i(n,!0,t)},onSave:function(n,t,i){i(n,!1,t)},onAddNew:function(n,t,i){i(n,!1,t)},onPreDeletePrompt:function(n,t,i){i(n,t,confirm("Are you sure you want to remove this?"))},onDelete:function(n,t,i){i(n,!0,t)},onChanged:null},e=null;this.init=function(n){var h,e;for(f=i.find("li"),o=i.find("input,textarea"),s=i.find("button"),r=t.extend(r,n||{}),i.find("li.new-data-item").length==0&&u._attachNewItem(),h=f.last(),e=0;e<r.listData.length;e++)u._attachNewItem(h,r.listData[e]);this._initEvents()};this._fireOnChange=function(){var n,o,l,u;if(r.onChanged!=null&&typeof r.onChanged=="function"){for(n=[],f=i.find("li"),o=0;o<f.length;o++){var h=t(f[o]),c=Number(h.data("id")),s={};if(c>0){for(s[r.idPostName]=c,l=h.find("input,textarea"),u=0;u<r.inputs.length;u++)s[r.inputs[u].postName]=t(l[u]).val();n.push(s)}}if(JSON.stringify(n)!=JSON.stringify(e)){e=n;r.onChanged(n)}}};this._initEvents=function(){i.on("change keyup","input,textarea",function(n){var e=t(n.target),f=e.closest("li"),o=f.data("id"),i=f.find("button.save-btn");i.length>0&&(i[0].style.display=="none"||i[0].style.display=="")&&r.showSaveOption&&(f.find("button").hide(),i.show());i.is(":visible")||u._fireOnChange()}).on("click","button",function(n){var l=t(n.target),i=l.closest("li"),a=l.data("action"),e=Number(i.data("id")),o,f,s,h,c;console.log(a,e);switch(a){case"down":if(i.next().next().length>0){s=i.next();o=s[0].getBoundingClientRect().top-i[0].getBoundingClientRect().top;i.transition("none");s.transition("none");i.insertAfter(s);s.transformXY(0,o+"px");i.transformXY(0,-1*o+"px");setTimeout(function(){i.transition("0.2s").transformXY(0,"0px");s.transition("0.2s").transformXY(0,"0px")},50);f={up:!1};f[r.idPostName]=e;r.onMove(i,f,u._onMoveDone)}break;case"up":if(i.prev().length>0){h=i.prev();o=h[0].getBoundingClientRect().top-i[0].getBoundingClientRect().top;i.transition("none");h.transition("none");i.insertBefore(h);h.transformXY(0,o+"px");i.transformXY(0,-1*o+"px");setTimeout(function(){i.transition("0.2s").transformXY(0,"0px");h.transition("0.2s").transformXY(0,"0px")},50);f={up:!0};f[r.idPostName]=e;r.onMove(i,f,u._onMoveDone)}break;case"save":for(f={},c=0;c<r.inputs.length;c++)f[r.inputs[c].postName]=t(i.find("input,textarea")[c]).val();if(e>0){f[r.idPostName]=e;r.onSave(i,f,u._onSaveDone)}else r.onAddNew(i,f,u._onAddNewDone);break;case"delete":f={};f[r.idPostName]=e;r.onPreDeletePrompt(i,f,function(n,t,i){if(i)r.onDelete(n,t,u._onDeleteDone)})}})};this._onMoveDone=function(n,t,i){t?u._fireOnChange():console.dir(i)};this._onSaveDone=function(n,t,i){t||console.dir(i);t&&(n.find("button").show(),n.find("button.save-btn").hide())};this._onAddNewDone=function(n,t,i){t||console.dir(i);t&&(console.log("adding new item with data:"),console.dir(i),n.find("input").val(""),u._attachNewItem(n,i),u._fireOnChange())};this._onDeleteDone=function(n,t,r){t||console.dir(r);t&&(n.remove(),f=i.find("li"),u._fireOnChange())};this._attachNewItem=function(u,e){for(var h,c,s,l="",a="",o=0;o<r.inputs.length;o++)h=r.inputs[o],c=t.format(h.multiline?r.multilineInputTemplate:r.inputTemplate,t.trim((o>0?"mergetop ":"")+(o<r.inputs.length-1?"mergebottom":"")),n.EncodeEntities(u==null?"":String(e[h.dataProperty])),n.EncodeEntities((u==null?"New ":"")+h.placeholder)),o<1?l+=c:a+=c;u!=null&&e[r.idDataProperty]==null&&(console.error("_attachNewItem Called with data payload missing an ID:"),console.log("- id property:"+r.idDataProperty),console.dir(e));s=t(t.format(u==null?r.template.replace(">Save<",">Add<"):r.template,n.EncodeEntities(u==null?"0":e[r.idDataProperty]),l,a));u==null?(i.children().remove(),i.append(t("<ul><\/ul>")).find("ul").append(s),s.find(".save-btn").show(),s.find(".fa-trash-o, .fa-chevron-down, .fa-chevron-up").remove()):s.insertBefore(u);f=i.find("li")}};t.fn.dataListEditor=function(i){return this.each(function(){var r=t(this),u;if(r.data("dataListEditor"))return r.data("dataListEditor");u=new n.DataListEditor(r);r.data("dataListEditor",u);u.init(i)})};n.MultiSlideForm=function(n){var u=this,r=null,i=null,f=null,e=null;this.init=function(){r=n.find(".form-slide");i=n.find(".form-slide.active");f=n.find(".multi-slide-next");e=n.find(".multi-slide-prev");i.length==0&&(i=r.first());i.length>1&&(i=i.first());var o=0;r.each(function(){t(this).data("slide-index",o++)});r.hide();i.show();f.on("click",function(n){var t=Number(i.data("slide-index"));return t<=r.length-1?(u.slideTo(t+1,!0),n.preventDefault(),n.stopImmediatePropagation(),!1):!0});e.on("click",function(){var n=Number(i.data("slide-index"));return n>0?(u.slideTo(n-1,!1),event.preventDefault(),event.stopImmediatePropagation(),!1):!0})};this.slideTo=function(n){var u=i;r.each(function(){var r=t(this);Number(r.data("slide-index"))==n&&(i=r,i.show(),u.hide())})}};t.fn.multiSlideForm=function(){return this.each(function(){var i=t(this),r;if(i.data("multiSlideForm"))return i.data("multiSlideForm");r=new n.MultiSlideForm(i);i.data("multiSlideForm",r);r.init()})};n.Toolboxes=new function(){var t=this,r=!1,u=60,i=null;this.toolboxes=[];this.nextID=10;this.initEvents=function(){if(!r){n.onScroll(t._handleWinScroll,t);r=!0}};this.add=function(n){t.toolboxes.push(n);t.sort();t._handleWinScroll();t.initEvents()};this.remove=function(n){for(var i=0;i<t.toolboxes.length;i++)if(t.toolboxes[i].toolboxID==n)return t.toolboxes[i].setActive(!1),t.toolboxes.splice(i,1),t._handleWinScroll(),!0;return!1};this.sort=function(){for(var i=!0,n,r;i;)for(i=!1,n=0;n<t.toolboxes.length-1;n++)if(t.toolboxes[n].getAnchorTopOffset()>t.toolboxes[n+1].getAnchorTopOffset()){r=t.toolboxes[n+1];t.toolboxes[n+1]=t.toolboxes[n];t.toolboxes[n]=r;i=!0;break}};this.onChange=function(t,i){n.Toolboxes._changeHandlers=n.Toolboxes._changeHandlers||{};n.Toolboxes._changeHandlersLastID=n.Toolboxes._changeHandlersLastID||1;t.__changeHandlerID==null&&(t.__changeHandlerID=n.Toolboxes._changeHandlersLastID++,n.Toolboxes._changeHandlers[t.__changeHandlerID]={h:t,s:i||t})};this.offChange=function(t){n.Toolboxes._changeHandlers=n.Toolboxes._changeHandlers||{};t.__changeHandlerID!=null&&(n.Toolboxes._changeHandlers[t.__changeHandlerID].h=null,n.Toolboxes._changeHandlers[t.__changeHandlerID].s=null,n.Toolboxes._changeHandlers[t.__changeHandlerID]=null,delete n.Toolboxes._changeHandlers[t.__changeHandlerID],t.__changeHandlerID=null,delete t.__changeHandlerID)};this._fireChange=function(){for(var t in n.Toolboxes._changeHandlers||{})n.Toolboxes._changeHandlers[t].h.apply(n.Toolboxes._changeHandlers[t].s,[i])};this._handleWinScroll=function(){for(var f,n=null,r=0;r<t.toolboxes.length;r++)f=t.toolboxes[r].getAnchorTopOffset(),f<=u&&(n=t.toolboxes[r]);if(n==null&&i!=null)t._deactivateActiveToolbox(),t._fireChange();else if(n!=null){if(i!=null&&i.toolboxID===n.toolboxID)return;i!=null&&i.toolboxID!==n.toolboxID&&t._deactivateActiveToolbox();n.setActive(!0);i=n;t._fireChange()}};this._deactivateActiveToolbox=function(){i!=null&&(i.setActive(!1),i=null)}};n.Toolbox=function(i){var u=this,r=t(i),f=t("#locked-toolbar"),e=r.closest(".toolbox-anchor"),o=e[0];this.lastAnchorTopOffset=0;this.priority=0;this.isActive=!1;this.init=function(){this.toolboxID=n.Toolboxes.nextID++;r.data("toolbox-id",this.toolboxID);this.priority=Number(r.data("toolbox-priority")||0);n.Toolboxes.add(u);e.on("remove",function(){u.destroy()});f.on("remove",function(){u.destroy()})};this.destroy=function(){n.Toolboxes.remove(u.toolboxID);e.off("remove");f.off("remove");r.removeData("toolbox");r=null;f=null;e=null;o=null};this.getAnchorTopOffset=function(){return o.getBoundingClientRect().top};this.setActive=function(n){u.isActive!=n&&(n?f.toggleClass("active",!0).css("backgroundColor",r.css("backgroundColor")).append(r):(e.append(r),f.toggleClass("active",!1)),u.isActive=n)}};t.fn.toolbox=function(){return this.each(function(){var i=t(this),r;if(i.data("toolbox"))return i.data("toolbox");r=new n.Toolbox(i);i.data("toolbox",r);r.init()})};n.Lockable=function(i){var r=this,f=t(window),u=t(i),e=u.closest(".lockable-anchor")[0],o=u.closest(".lockable-anchor-container")[0]||t("#content")[0];_oDivFillVertical=u.find(".lockable-fill-vertical");_oDivLockableAdContainer=u.find(".lockable-ad-container").first();_oAdRoot=_oDivLockableAdContainer.children().first();_oDivUnlockedAdContainer=u.closest(".lockable-anchor").siblings(".unlocked-ad-container").first();_oDivTopNav=t("#top-nav");_iTopNavHeight=_oDivTopNav.find(".nav-menu-block").height();_bIsFixed=!1;_iEarlyFixOffset=0;_iLockableTopOffset=Number(u.data("lockable-top-offset")||0)+_iEarlyFixOffset;_iLockableBottomOffset=Number(u.data("lockable-bottom-offset")||0)-_iEarlyFixOffset;_bLockBottom=u.data("lock-edge")=="bottom";_iLastLockableTopOffset=0;_iLastLockableBottomOffset=9999999;_lastX=0;_lastY=0;_iScrollProbeInterval=500;_bHasLockableAd=_oAdRoot.length>0;_bAdIsLocked=_bHasLockableAd;_bIsInited=!1;this.init=function(){if(!_bIsInited){if(f.width()<768){f.on("resize._lockable",function(){n.isFullScreen()||f.width()>=768&&(f.off("resize._lockable"),r.init())});return}u.css("width",u.width()+"px");_bLockBottom&&(e.style.height=u.height()+"px");_iLastLockableTopOffset=r._getLockableTopOffset();_iLastLockableBottomOffset=r._getLockableBottomOffset();r._attachScroller();n.onScroll(r._handleWinScroll,r);if(_bHasLockableAd)n.Header.onAdLockChange(r._handleAdLockChange,r);_bIsInited=!0}};this.onScroll=function(n,t){r._scrollHandlers=r._scrollHandlers||{};r._scrollHandlersLastID=r._scrollHandlersLastID||1;n.__scrollHandlerID==null&&(n.__scrollHandlerID=r._scrollHandlersLastID++,r._scrollHandlers[n.__scrollHandlerID]={h:n,s:t||n})};this.offScroll=function(n){r._scrollHandlers=r._scrollHandlers||{};n.__scrollHandlerID!=null&&(r._scrollHandlers[n.__scrollHandlerID].h=null,r._scrollHandlers[n.__scrollHandlerID].s=null,r._scrollHandlers[n.__scrollHandlerID]=null,delete r._scrollHandlers[n.__scrollHandlerID],n.__scrollHandlerID=null,delete n.__scrollHandlerID)};this.refresh=function(){_bLockBottom&&(e.style.height=u.height()+"px");_oDivFillVertical._scroller!=null&&_oDivFillVertical._scroller.refresh()};this.scrollTo=function(){_oDivFillVertical._scroller!=null&&_oDivFillVertical._scroller.scrollTo.apply(_oDivFillVertical._scroller,arguments.length==0?[0,0,0]:arguments)};this.scrollToItem=function(n,t,i){var u,e,f;_oDivFillVertical._scroller!=null&&(u=n.position().top,e=_oDivFillVertical._scroller.y,t&&!n.hasClass("forum-thread-item")&&(f=n.find(".img-crop"),f.length>0&&(u+=f.height()+11)),r.scrollTo(0,e-u,Number(i||200)))};this._getLockableTopOffset=function(){var i=_iLockableTopOffset+_iTopNavHeight+4,t=0,n;return _oDivTopNav.css("position")=="fixed"&&(n=_oDivTopNav.css("top"),t=Number(n.substring(0,n.length-2))),i+t};this._getLockableBottomOffset=function(){return _iLockableBottomOffset};this._fireScrollEvent=function(t){var i=0,u=0,f;if(_oDivFillVertical._scroller!=null&&(i=_oDivFillVertical._scroller.x,u=_oDivFillVertical._scroller.y),t===!0||i!=_lastX||u!=_lastY){for(f in r._scrollHandlers||{})r._scrollHandlers[f].h.apply(r._scrollHandlers[f].s,[{x:i,y:u,fx:_lastX,fy:_lastY,dx:i-_lastX,dy:u-_lastY}]);_lastX=i;_lastY=u}n.LazyImgSrcManager&&n.LazyImgSrcManager.subScrollerDidScroll()};this.getXY=function(){return _oDivFillVertical._scroller==null?{x:0,y:0}:{x:_oDivFillVertical._scroller.x,y:_oDivFillVertical._scroller.y}};this._getFillVerticalHeight=function(){if(_oDivFillVertical.length==0)return 0;var n=0;return u.children().each(function(){var i=t(this);i.hasClass("lockable-fill-vertical")||(n+=i.outerHeight())}),Math.max(f.height(),window.innerHeight||0)-n-r._getLockableTopOffset()-_iEarlyFixOffset};this._attachScroller=function(){if(_oDivFillVertical.length!=0){_oDivFillVertical.css({overflow:"hidden",height:r._getFillVerticalHeight()+"px"});_oDivFillVertical._scroller=new IScroll(_oDivFillVertical[0],{scrollbars:!0,mouseWheel:!0,click:!0,interactiveScrollbars:!0,shrinkScrollbars:"clip",fadeScrollbars:!1});_oDivFillVertical._scroller.on("scrollStart",function(){r._scrollProble!=null&&(clearInterval(r._scrollProbe),r._scrollProbe=null);r._scrollProbe=setInterval(function(){r._fireScrollEvent()},_iScrollProbeInterval)});_oDivFillVertical._scroller.on("scrollEnd",function(){r._scrollProble!=null&&(clearInterval(r._scrollProbe),r._scrollProbe=null);r._fireScrollEvent(!0)});f.on("resize",r._handleWinResize);r._handleWinResize()}};this._removeScroller=function(){_oDivFillVertical.length!=0&&(f.off("resize",r._handleWinResize),_oDivFillVertical._scroller!=null&&(_oDivFillVertical._scroller.scrollTo(0,0,0),_oDivFillVertical._scroller.off("scrollStart"),_oDivFillVertical._scroller.off("scrollEnd"),_oDivFillVertical._scroller.destroy(),_oDivFillVertical._scroller=null),_oDivFillVertical.css({overflow:"hidden",height:""}),r._scrollProble!=null&&(clearInterval(r._scrollProbe),r._scrollProbe=null),r._fireScrollEvent())};this._handleWinScroll=function(){var s=e.getBoundingClientRect(),o=s.top,i=s.bottom-f.height(),t=r._getLockableTopOffset(),n=r._getLockableBottomOffset(),h=0,c=0;t!=_iLastLockableTopOffset&&(h=t-_iLastLockableTopOffset,_iLastLockableTopOffset=t,r._handleWinResize());n!=_iLastLockableBottomOffset&&(c=n-_iLastLockableBottomOffset,_iLastLockableBottomOffset=n,r._handleWinResize());_bIsFixed?(t<o||_bLockBottom)&&(n<i||!_bLockBottom)?(u.removeClass("locked").css({top:"",bottom:""}),_bIsFixed=!1):!_bLockBottom&&t>=o&&h!=0&&n>i?u.css({top:t-_iEarlyFixOffset+"px",bottom:""}):_bLockBottom&&n<=i&&c!=0&&u.css({top:"",bottom:n+_iEarlyFixOffset+"px"}):!_bLockBottom&&t>=o?(u.addClass("locked").css({top:t-_iEarlyFixOffset+"px"}),_bIsFixed=!0):_bLockBottom&&n>=i&&(u.addClass("locked").css({bottom:n+_iEarlyFixOffset+"px"}),_bIsFixed=!0)};this._handleWinResize=function(){n.isFullScreen()||(_bLockBottom&&(e.style.height=u.height()+"px"),_oDivFillVertical._scroller!=null&&(_oDivFillVertical.height(r._getFillVerticalHeight()),_oDivFillVertical._scroller.refresh()))};this._handleAdLockChange=function(n){_bAdIsLocked!=n&&(n?_oDivLockableAdContainer.append(_oAdRoot):_oDivUnlockedAdContainer.append(_oAdRoot),_bAdIsLocked=n);r._handleWinResize()}};t.fn.lockable=function(){return this.each(function(){var i=t(this),r;if(i.data("lockable"))return i.data("lockable");r=new n.Lockable(i);i.data("lockable",r);r.init()})};t.fn.dropdown=function(){return this.each(function(){var i=t(this),r=i.find(".menu"),f=r.find(".menu-scrollable"),u=t("body");if(!i._dropDownHandler){"MSPointerEvent"in window&&(i[0].addEventListener("MSHoldVisual",function(n){n.preventDefault()},!1),i[0].addEventListener("MSGestureHold",function(n){n.preventDefault()},!1));i._openDropDown=function(){var s=r[0].scrollHeight,e,o;if(i._iAvailableViewportHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-r[0].getBoundingClientRect().top-70,e=!1,s>i._iAvailableViewportHeight&&(s=i._iAvailableViewportHeight,e=!0),e&&i._scroller==null)r.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");setTimeout(function(){if(e&&i._scroller==null&&i.hasClass("active")){f.css("padding-bottom","40px");i._scroller=new IScroll(r[0],{scrollbars:!0,mouseWheel:!0,click:!0,interactiveScrollbars:!0,shrinkScrollbars:"clip",fadeScrollbars:!1});n.onScroll(i._winScrollHandler,i)}},10)});i.addClass("active");r.height(s+"px");o=!1;u.on("mousedown.dropdown",function(n){o=t(n.target).closest(".drop-down").length==0});u.on("mouseup.dropdown",function(n){if(o&&t(n.target).closest(".drop-down").length==0){i._dropDownHandler(n);u.on("click.dropdown",function(n){return u.off("click.dropdown"),n.preventDefault(),n.stopPropagation(),!1})}o=!1})};i._closeDropDown=function(){i._scroller!=null?(n.offScroll(i._winScrollHandler),i._scroller.scrollTo(0,0,100),r.height(0),setTimeout(function(){i._scroller.destroy();i._scroller=null;i.removeClass("active")},150)):(r.height(0),i.removeClass("active"))};i._dropDownHandler=function(n){return u.off(".dropdown"),i.hasClass("active")?i._closeDropDown():i._openDropDown(),t(n.target).closest(".drop-down .menu").length==0?(n.preventDefault(),n.stopPropagation(),!1):void 0};i._winScrollHandler=function(){var n=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-r[0].getBoundingClientRect().top-70;if(i._iAvailableViewportHeight!=n&&(i._iAvailableViewportHeight=n,i.hasClass("active"))){r.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");i._scroller.refresh()});r.height(i._iAvailableViewportHeight+"px")}};i.find(".raised-btn").on("click.dropdown",i._dropDownHandler).find("a").on("click.dropdown",i._dropDownHandler)}})};n.random=function(n,t){return Math.floor(Math.random()*(t-n+1)+n)};n.zeroPad=function(n,t){for(var i=String(n),r=16;i.length<t&&--r>=0;)i="0"+i;return i};n.zeroPaddedDate=function(t,i,r){var e="",u,o,f;return i&&(u=t.getHours(),o=u>11?" pm":" am",u=u==0?12:u>12?u-12:u,e=" "+u+":"+n.zeroPad(t.getMinutes(),2)+o,r&&(f=new Date,t.getMonth()==f.getMonth()&&t.getDate()==f.getDate()&&t.getFullYear()==f.getFullYear()))?e.trim():n.zeroPad(t.getMonth()+1,2)+"/"+n.zeroPad(t.getDate(),2)+"/"+t.getFullYear()+e};t.fn.whtStepStyle=function(){var n=/^((step |number |method |num |tip |hack |example |option |trick |phone |app |alternative |prank |costume |feature |\()?#?[0-9]+)([\.:\)]+)(\s)(.*)/i;return this.each(function(){var i=t(this),f,r;if(!i.data("margin-label-processed")){if(f=i.text().trim(),r=n.exec(f),r){var s=i.find("a.anchor").detach(),u=i.html().trim(),e=u.indexOf(r[5].trim().split(" ")[0]),o=e>-1&&u.length>0?u.substring(e):"";i.empty().append(s).append('<span class="margin-label"><span><\/span><\/span>').append(o==""?document.createTextNode(r[5].trim()):o).find("span.margin-label span").append(document.createTextNode(r[1].trim()))}i.data("margin-label-processed",!0)}})};t.fn.localTimeStamp=function(){return this.each(function(){var i=t(this),f=n.newDate(i.data("published")||i.data("revised"),!0),e=n.newDate(i.data("featured")||i.data("revised"),!0),r=String(i.data("show-original"))=="true",c=String(i.data("only-original"))=="true",l=String(i.data("only-update"))=="true",o=n.zeroPaddedDate(r||c?f:e,!0,!0),u=n.zeroPaddedDate(r||l?e:f,!0,!0),s,h;i.text(o);u!=o&&(s=i.attr("title")&&i.attr("title")!=""&&i.attr("title").indexOf("Originally")==-1?" - "+i.attr("title"):"",h=u.length<=8?" at ":" on ",i.attr("title",(r?"Updated":"Originally Published")+h+u+s),i.toggleClass("tooltip",!0))})};t.fn.pullQuoteReorder=function(){return this.each(function(){var r=t(this),u=r.closest("article"),f=r.data("pqphid"),n=u.find(".pqphvs"),i;n.length>0&&(i=n.find(".pqphv-"+f),i.length>0&&(r.removeClass("pqph").html(i.html()),i.remove(),i=null),n.find("aside").length==0&&(n.remove(),n=null))})};t.fn.transition=function(){var n=document.createElement("div");return typeof n.style.transition!="undefined"?function(n){return this.each(function(){t(this).css({transition:n||"none"})})}:typeof n.style.WebkitTransition!="undefined"?function(n){return this.each(function(){t(this).css({WebkitTransition:n||"none",transition:n||"none","-webkit-backface-visibility":n?"hidden":"","-webkit-perspective":n?"1000":""})})}:typeof n.style.MozTransition!="undefined"?function(n){return this.each(function(){t(this).css({MozTransition:n||"none",transition:n||"none"})})}:typeof n.style.MsTransition!="undefined"?function(n){return this.each(function(){t(this).css({MsTransition:n||"none",transition:n||"none"})})}:typeof n.style.OTransition!="undefined"?function(n){return this.each(function(){t(this).css({OTransition:n||"none",transition:n||"none"})})}:this}();t.fn.transform=function(n){return this.each(function(){t(this).css({transform:n||"none",WebkitTransform:n||"none",MozTransform:n||"none",msTransform:n||"none",OTransform:n||"none","-webkit-backface-visibility":n?"hidden":"","-webkit-perspective":n?"1000":""})})};var i=document.getElementsByTagName("body")[0].style;t.fn.transformXY=i.transform!=null?function(n,i){return this.each(function(){t(this)[0].style.transform="translate3d("+n+", "+i+", 0px)"})}:i.WebkitTransform!=null?function(n,i){return this.each(function(){t(this)[0].style.WebkitTransform="translate3d("+n+", "+i+", 0px)"})}:i.MozTransform!=null?function(n,i){return this.each(function(){t(this)[0].style.MozTransform="translate("+n+", "+i+")"})}:i.msTransform!=null?function(n,i){return this.each(function(){t(this)[0].style.msTransform="translate3d("+n+", "+i+", 0px)"})}:function(n,i){return this.each(function(){var r=t(this)[0].style;r.left=n;r.top=i})};t.fn.scaleTransformXY=i.WebkitTransform!=null?function(n,i,r){return this.each(function(){t(this)[0].style.WebkitTransform="translate3d("+i+", "+r+", 0px) scale("+n+")"})}:i.MozTransform!=null?function(n,i){return this.each(function(){t(this)[0].style.MozTransform="translate("+n+", "+i+") scale("+s+")"})}:i.msTransform!=null?function(n,i){return this.each(function(){t(this)[0].style.msTransform="translate3d("+n+", "+i+", 0px) scale("+s+")"})}:function(n,i){return this.each(function(){var r=t(this)[0].style;r.left=n;r.top=i;r.scale=s})};t.fn.getTransform=i.WebkitTransform!=null?function(){return t(this)[0].style.WebkitTransform}:i.MozTransform!=null?function(){return t(this)[0].style.MozTransform}:i.msTransform!=null?function(){return t(this)[0].style.msTransform}:function(){return""};t.fn.getTransition=function(){return this[0].style.transition||this[0].style.WebkitTransition||this[0].style.MozTransition||this[0].style.MsTransition||this[0].style.OTransition||""};t.fn.noTransitionCss=function(){var n=arguments;return this.each(function(){var i=t(this),r=i.getTransition();i.transition().css.apply(i,n).transition(r)})};t.fn.placeholder=function(n){function i(i){var r=t(i),u=r.offsetParent().offset(),f=r.offset();return{top:f.top-u.top+(r.outerHeight()-r.height())/2,left:f.left-u.left+n.lr_padding,width:r.width()-n.lr_padding}}return n=t.extend(n,{color:"#AAA",cls:"placeholder",lr_padding:4,selector:"input[placeholder], textarea[placeholder]"}),Modernizr.input.placeholder?this:this.each(function(){var r=t(this),e,f,u;if(r.data("placeholder"))return e=r.data("placeholder"),e.css(i(r)),!0;f={};r.is("textarea")||r.css("height")=="auto"||(f={lineHeight:r.css("height"),whiteSpace:"nowrap"});u=t("<label />").text(r.attr("placeholder")).addClass(n.cls).css(t.extend({position:"absolute",display:"inline",float:"none",overflow:"hidden",textAlign:"left",color:n.color,cursor:"text",paddingTop:r.css("padding-top"),paddingLeft:r.css("padding-left"),fontSize:r.css("font-size"),fontFamily:r.css("font-family"),fontStyle:r.css("font-style"),fontWeight:r.css("font-weight"),textTransform:r.css("text-transform"),zIndex:99},f)).css(i(this)).attr("for",this.id).data("target",r).click(function(){t(this).data("target").focus()}).insertBefore(this);r.data("placeholder",u).focus(function(){u.hide()}).blur(function(){u[r.val().length?"hide":"show"]()}).triggerHandler("blur");t(window).resize(function(){var n=u.data("target");u.css(i(n))})})}}}(window.WHT=window.WHT||{},jQuery),function(n,t){var i=/height="([0-9]+)"/gi,r=/width="([0-9]+)"/gi,u=/youtube\.com\/(v|embed)\/([^\?\&\=\;\"\'\s\/]+)/i,o='<iframe width="532" height="299" src="https://www.youtube.com/embed/{0}?autoplay=0&amp;rel=0&amp;fs=1&amp;showinfo=0" frameborder="0" allowfullscreen="allowfullscreen"><\/iframe>',f=/dailymotion\.com\/(swf)\/([^\?\&\=\;\"\'\s\/]+)/i,s='<iframe width="532" height="299" src="https://www.dailymotion.com/embed/video/{0}?autoplay=0&amp;related=0" frameborder="0" allowfullscreen="allowfullscreen"><\/iframe>',e=/\"(([^\"]*)\&amp;href\=http(s)?\:\/\/(www\.)?facebook\.com\/([a-z0-9\.]+\/videos\/)?([0-9]+)(\/)?(\?)?([^\"]*))/i,h='"https://www.facebook.com/video/embed?video_id={0}',c=/(\s|^|\()(iP(hone|ad|od)|Android)(\s|$|\)|;)/.test(String(window.navigator.userAgent));n.WHTGalleryVideo=function(l,a,v,y,p,w,b,k,d){this.xml=function(n){var u,f,e,o;if(arguments.length>0&&n!=null){if(typeof n=="string")try{n=t(t.parseXML(n)).children().first()}catch(s){}typeof n=="object"&&(n.jquery?(u=n.length>0&&n.first()[0].nodeName=="Video"?n:n.find("Video"),u.length>0&&(this.videoLink=decodeURIComponent(u.attr("VideoLink")||""),this.embedTag=t.trim(decodeURIComponent(u.find("EmbedTag").html()||"")),this.thumbSource=u.attr("ThumbSource")||"",this.caption=decodeURIComponent(u.attr("Caption")||""),this.creditUrl=(u.attr("CreditURL")||"").replace('"',"%22"),this.creditText=decodeURIComponent(u.attr("CreditText")||""),this.videoID=decodeURIComponent(u.attr("VideoID")||-1),this.chromeW=decodeURIComponent(u.attr("ChromeW")||0),this.chromeH=decodeURIComponent(u.attr("ChromeH")||0))):(this.videoLink=n.videoLink||"",this.embedTag=t.trim(n.embedTag||""),this.thumbSource=n.thumbSource||"",this.caption=n.caption||"",this.creditUrl=(n.creditUrl||"").replace('"',"%22"),this.creditText=n.creditText||"",this.videoID=n.videoID||-1,this.chromeW=n.chromeW||0,this.chromeH=n.chromeH||0));this.creditText.indexOf("<a href")>-1&&(this.creditText="");this._cleanEmbed();f=299;e=532;i.test(this.embedTag)&&this.embedTag.replace(i,function(){return f=+arguments[1],""});r.test(this.embedTag)&&this.embedTag.replace(r,function(){return e=+arguments[1],""});this.height=f;this.width=e;this.tallRatio=this.height/this.width>=.75;this._fixChromeSizeChanges()}return o=[encodeURIComponent(this.videoLink),encodeURIComponent(this.embedTag),this.thumbSource.replace(/&/g,"&amp;"),encodeURIComponent(this.caption),this.creditUrl.replace('"',"%22").replace(/&/g,"&amp;"),encodeURIComponent(this.creditText),this.videoID,this.chromeW,this.chromeH],'<Video VideoLink="{0}" ThumbSource="{2}" Caption="{3}" CreditURL="{4}" CreditText="{5}" VideoID="{6}" ChromeW="{7}" ChromeH="{8}"><EmbedTag>{1}<\/EmbedTag><\/Video>'.replace(/\{(\d+)\}/g,function(n,t){return o[t]})};this._cleanEmbed=function(){var i,r;if(this.embedTag.indexOf("&lt;")==0&&(this.embedTag=t("<div/>").html(this.embedTag).text()),this.embedTag.indexOf("&amp;autoplay=0")>0&&this.embedTag.indexOf("?")==-1&&(this.embedTag=this.embedTag.split("&amp;autoplay=0").join("?autoplay=0")),u.test(this.embedTag)&&(i="",this.embedTag.replace(u,function(){return i=arguments[2],""}),i!=""&&(this.embedTag=t.format(o,i))),f.test(this.embedTag)&&(r="",this.embedTag.replace(f,function(){return r=arguments[2],""}),r!=""&&(this.embedTag=t.format(s,r))),e.test(this.embedTag)){if(!c)return;this.embedTag=this.embedTag.replace(e,function(){return t.format(h,arguments[6])})}n.Scheme.https&&this.embedTag.indexOf("http://")>-1&&(this.embedTag="")};this._fixChromeSizeChanges=function(){var t=(this.height-this.chromeH)/(this.width-this.chromeW),n=!1;this.embedTag.indexOf(!1)&&this.chromeW>0&&(this.chromeW=0,n=!0);n&&(this.height=Math.ceil((this.width-this.chromeW)*t)+this.chromeH)};var g=this;this.galleryItemType="Video";arguments.length===1?this.xml(arguments[0]):(this.videoLink=l,this.embedTag=a||"",this.thumbSource=v||"",this.caption=y||"",this.creditUrl=(p||"").replace('"',"%22"),this.creditText=w||"",this.videoID=b||-1,this.chromeW=k||0,this.chromeH=d||0,this._cleanEmbed(),this.width=532,a.match(r)&&this.embedTag.replace(r,function(){g.width=+arguments[1]}),this.height=299,a.match(i)&&this.embedTag.replace(i,function(){g.height=+arguments[1]}),this.tallRatio=this.height/this.width>=.75)};n.WHTGalleryImage=function(i,r,u,f,e,o,s,h,c,l,a){var v=this;this.xml=function(i){var r,u;if(arguments.length>0&&i!=null){if(typeof i=="string")try{i=t(t.parseXML(i)).children().first()}catch(f){}typeof i=="object"&&(i.jquery?(r=i.length>0&&i.first()[0].nodeName=="Image"?i.first():i.find("Image"),r.length>0&&(this.src=r.attr("LargeSource")||"",(this.src==""||this.src==null)&&(this.src=r.attr("StandardSource")||""),this.width=Number(r.attr("LargeWidth")||0),(this.width==null||this.width==0||String(this.width)=="NaN")&&(this.width=Number(r.attr("StandardWidth")||0)),(this.width==null||String(this.width)=="NaN")&&(this.width=0),this.height=Number(r.attr("LargeHeight")||0),(this.height==null||this.height==0||String(this.height)=="NaN")&&(this.height=Number(r.attr("StandardHeight")||0)),(this.height==null||String(this.height)=="NaN")&&(this.height=0),this.caption=decodeURIComponent(r.attr("Caption")||""),this.creditUrl=(r.attr("CreditURL")||"").replace('"',"%22"),this.creditText=decodeURIComponent(r.attr("CreditText")||""),this.originalUrl=decodeURIComponent(r.attr("OriginalURL")||""),this.shadow=String(r.attr("Shadow")||"").toLowerCase()=="true",this.upScale=String(r.attr("UpScale")||"").toLowerCase()=="true",this.scale=Number(r.attr("Scale")||0),this.imageTitleUrlBase="")):(this.src=i.src||"",this.width=i.width||0,this.height=i.height||0,this.caption=i.caption||"",this.creditUrl=(i.creditUrl||"").replace('"',"%22"),this.creditText=i.creditText||"",this.originalUrl=i.originalUrl||"",this.shadow=i.shadow||!1,this.upScale=i.upScale||!1,this.scale=i.scale||0,this.imageTitleUrlBase=i.imageTitleUrlBase||""),this.originalUrl=="undefined"&&(this.originalUrl=""),this.creditText.indexOf("<a href")>-1&&(this.creditText=""),this.isGIPHY=!!this.originalUrl.match(/\/\/([a-z0-9]+\.)?giphy.com\//i),this.isGIPHY&&(this.creditUrl=="http://giphy.com"||this.creditUrl=="https://giphy.com")&&(this.creditUrl=""),this.oImgUrl=new n.ImgUrl(this.src,"w1456",this.imageTitleUrlBase))}return u=[(this.oImgUrl.isValid&&this.oImgUrl.toString()!=""?this.oImgUrl.imgID+"."+this.oImgUrl.imgExt+this.oImgUrl.queryString:this.src).replace(/&/g,"&amp;"),this.width,this.height,encodeURIComponent(this.caption),this.creditUrl.replace('"',"%22").replace(/&/g,"&amp;"),encodeURIComponent(this.creditText),encodeURIComponent(this.originalUrl),this.shadow?"True":"False",this.upScale?"True":"False",this.scale],'<Image StandardSource="{0}" LargeSource="{0}" ThumbSource="{0}" StandardWidth="{1}" LargeWidth="{1}" StandardHeight="{2}" LargeHeight="{2}" Caption="{3}" CreditURL="{4}" CreditText="{5}" OriginalURL="{6}" Shadow="{7}" UpScale="{8}" Scale="{9}"/>'.replace(/\{(\d+)\}/g,function(n,t){return u[t]})};this.toString=function(t){return this.isGIPHY&&t!==!0?n.Scheme.correct(this.originalUrl):arguments.length>0&&arguments[0]!==!0?this.oImgUrl.toString.apply(this.oImgUrl,arguments):this.oImgUrl.toString()};this.galleryItemType="Image";arguments.length==1?this.xml(arguments[0]):this.xml({src:i||"",width:r||0,height:u||0,caption:f||"",creditUrl:(e||"").replace('"',"%22"),creditText:o||"",originalUrl:s||"",shadow:h===!0||String(h||"").toLowerCase()=="true",upScale:c===!0||String(c||"").toLowerCase()=="true",imageTitleUrlBase:a||""})};n.WHTGallery=function(u,f){this.settings={initPromptMediaType:"",editMode:!1,galleryItems:[],initFromGalleryItemsObjects:[],imageTitleUrlBase:"",initWithLayoutIndex:0,galleryBlock:{}};f&&t.extend(!0,this.settings,f);this.settings.baseEditor||(this.settings.baseEditor=u.parents(".share-widget").data("whtPostEditor"));var e=this,ut=ut++,s=-1,p=0,a=3,v=10+a*2,tt='<figure class="gal-row gal-row-34 gal-wf gal-mgb clearfix"><\/figure><div class="gal-row gal-row-14 clearfix"><figure class="gal-w6 gal-mgr gal-mgb fl"><\/figure><figure class="gal-w6 gal-mgr gal-mgb fl"><\/figure><figure class="gal-w6 gal-mgr gal-mgb fl"><\/figure><figure class="gal-w6 gal-mgr gal-mgb fl"><\/figure><figure class="gal-w6 gal-mgr gal-mgb fl"><\/figure><figure class="gal-w6 gal-mgb fl"><\/figure><\/div>',ft='<div class="galContentContainer"><div class="galContent clearfix"><\/div> <div class="white-out"><div><\/div><\/div><\/div> <div class="galBottom clearfix"> <div class="nav-leftright fr"><div class="arrow left btn fl"><\/div><div class="arrow right btn fr"><\/div><\/div> <div class="items clearfix"><\/div><\/div>',et='<span class="fl itemLink gallery{0} galleryItemIndex{1}{3}" data-index="{1}"><img src="{2}" width="68" height="53" alt=""/>{4}<\/span>',y=[['<div class="galEmpty"><\/div>'],['<figure class="gal-row gal-row-f gal-{1}" data-index="0">{0}<\/figure>'],["gallery",'<div class="gal-row gal-row-f clearfix"><figure class="gal-w2 fl" data-index="0">{0}<\/figure><figure class="gal-w2 fr" data-index="1">{1}<\/figure><\/div>','<figure class="gal-row gal-row-12 gal-mgb gal-wf" data-index="0">{0}<\/figure><figure class="gal-row gal-row-12 gal-wf" data-index="1">{1}<\/figure>'],["gallery",'<div class="gal-row gal-row-f clearfix"><figure class="gal-w3 fl gal-mgr" data-index="0">{0}<\/figure><figure class="gal-w3 fl" data-index="1">{1}<\/figure><figure class="gal-w3 fr" data-index="2">{2}<\/figure><\/div>','<figure class="gal-row gal-row-12 gal-wf gal-mgb" data-index="0">{0}<\/figure><div class="gal-row gal-row-12 clearfix"><figure class="gal-w2 fl" data-index="1">{1}<\/figure><figure class="gal-w2 fr" data-index="2">{2}<\/figure><\/div>','<div class="gal-row gal-row-12 gal-mgb clearfix"><figure class="gal-w2 fl" data-index="0">{0}<\/figure><figure class="gal-w2 fr" data-index="1">{1}<\/figure><\/div><figure class="gal-row gal-row-12 gal-wf gal-wf" data-index="2">{2}<\/figure>','<figure class="gal-row gal-row-13 gal-wf gal-mgb" data-index="0">{0}<\/figure><figure class="gal-row gal-row-13 gal-wf gal-mgb" data-index="1">{1}<\/figure><figure class="gal-row gal-row-13 gal-wf" data-index="2">{2}<\/figure>'],["gallery",'<div class="gal-row gal-row-12 gal-mgb clearfix"><figure class="gal-w2 fl gal-mgr" data-index="0">{0}<\/figure><figure class="gal-w2 fr" data-index="1">{1}<\/figure><\/div><div class="gal-row gal-row-12 clearfix"><figure class="gal-w2 fl gal-mgr" data-index="2">{2}<\/figure><figure class="gal-w2 fr" data-index="3">{3}<\/figure><\/div>','<figure class="gal-row gal-row-12 gal-mgb" data-index="0">{0}<\/figure><div class="gal-row gal-row-12 clearfix"><figure class="gal-w3 fl gal-mgr" data-index="1">{1}<\/figure><figure class="gal-w3 fl" data-index="2">{2}<\/figure><figure class="gal-w3 fr" data-index="3">{3}<\/figure><\/div>','<figure class="gal-row gal-row-13 gal-mgb" data-index="0">{0}<\/figure><div class="gal-row gal-row-13 gal-mgb clearfix"><figure class="gal-w2 fl gal-mgr" data-index="1">{1}<\/figure><figure class="gal-w2 fr" data-index="2">{2}<\/figure><\/div><figure class="gal-row gal-row-13" data-index="3">{3}<\/figure>','<div class="gal-row gal-row-12 gal-mgb clearfix"><figure class="gal-w3 fl gal-mgr" data-index="0">{0}<\/figure><figure class="gal-w3 fl" data-index="1">{1}<\/figure><figure class="gal-w3 fr" data-index="2">{2}<\/figure><\/div><figure class="gal-row gal-row-12" data-index="3">{3}<\/figure>'],["gallery",'<div class="gal-row gal-row-12 gal-mgb clearfix"><figure class="gal-w2 fl gal-mgr" data-index="0">{0}<\/figure><figure class="gal-w2 fr" data-index="1">{1}<\/figure><\/div><div class="gal-row gal-row-12 clearfix"><figure class="gal-w3 fl gal-mgr" data-index="2">{2}<\/figure><figure class="gal-w3 fl" data-index="3">{3}<\/figure><figure class="gal-w3 fr" data-index="4">{4}<\/figure><\/div>','<figure class="gal-row gal-row-13 gal-mgb" data-index="0">{0}<\/figure><div class="gal-row gal-row-13 gal-mgb clearfix"><figure class="gal-w2 fl gal-mgr" data-index="1">{1}<\/figure><figure class="gal-w2 fr" data-index="2">{2}<\/figure><\/div><div class="gal-row gal-row-13 clearfix"><figure class="gal-w2 fl gal-mgr" data-index="3">{3}<\/figure><figure class="gal-w2 fr" data-index="4">{4}<\/figure><\/div>','<div class="gal-row gal-row-13 gal-mgb clearfix"><figure class="gal-w2 fl gal-mgr" data-index="0">{0}<\/figure><figure class="gal-w2 fr" data-index="1">{1}<\/figure><\/div><figure class="gal-row gal-wf gal-row-13 gal-mgb" data-index="2">{2}<\/figure><div class="gal-row gal-row-13 clearfix"><figure class="gal-w2 fl gal-mgr" data-index="3">{3}<\/figure><figure class="gal-w2 fr" data-index="4">{4}<\/figure><\/div>','<div class="gal-row gal-row-12 gal-mgb clearfix"><figure class="gal-w3 fl gal-mgr" data-index="0">{0}<\/figure><figure class="gal-w3 fl" data-index="1">{1}<\/figure><figure class="gal-w3 fr" data-index="2">{2}<\/figure><\/div><div class="gal-row gal-row-12 clearfix"><figure class="gal-w2 fl gal-mgr" data-index="3">{3}<\/figure><figure class="gal-w2 fr" data-index="4">{4}<\/figure><\/div>'],["gallery"]],nt=y[0],ot=t(u).html(),w=t(u).addClass("whtGallery").html('<div class="gallery-layout">   <div class="gallery-layout-container">   <\/div>   <div class="white-out">       <div><\/div>   <\/div><\/div>'),o=w.find(".gallery-layout"),h=o.find(".gallery-layout-container"),c=o.find(".white-out"),d=h.width(),g=null,b=null,k=null,it=null,rt=null,l=null;this.init=function(){if(this.settings.initPromptMediaType=="image"||this.settings.initPromptMediaType=="video")this.addNewGalleryItem(this.settings.initPromptMediaType),this.setDisplayTemplate();else if(this.settings.initFromGalleryItemsObjects.length>0){if(this.addGalleryItems(this.settings.initFromGalleryItemsObjects,this.settings.initWithLayoutIndex,this.settings.imageTitleUrlBase,!0),!this.settings.editMode){e._iLastWindowWidth=t(window).width();t(window,document).on("resize.whtGallery",function(){n.isFullScreen()||(e._resizeTO!=null&&(clearTimeout(e._resizeTO),e._resizeTO=null),e._resizeTO=setTimeout(function(){e._resizeTO!=null&&(clearTimeout(e._resizeTO),e._resizeTO=null);e.onWinResize()},25))})}}else this.setDisplayTemplate(0)};this.onWinResize=function(){var n=t(window).width();e._iLastWindowWidth!=n&&(e._iLastWindowWidth=n,e.setDisplayTemplate(null,!0,!0))};this.initGalleryMode=function(){var t,n;for(g=h.find(".galContentContainer"),b=h.find(".galContent").empty(),l=h.find(".white-out"),k=h.find(".galBottom .items").empty(),it=h.find(".nav-leftright .left"),rt=h.find(".nav-leftright .right"),(s<=0||s>=e.settings.galleryItems.length)&&(s=0),t="",n=0;n<e.settings.galleryItems.length;n++)t+=e.getGalleryItemThumbnail(n);k.append(t);k.find(".itemLink").on({"click.whtGallery":e.onItemThumbnailClick});it.on({"click.whtGallery":e.onLeftClick});rt.on({"click.whtGallery":e.onRightClick});e.setActiveGalleryItem(s,!0)};this.addNewGalleryItem=function(i){var r=this;switch(i){case"image":r._bIsPromptingForNewContent=!0;n.Images.showUploadPrompt({uploadType:"GalleryImage",uploadToID:null,crop:!0,minSize:[40,40],minSizeToCrop:[728,40],onResponse:function(n,t){r.onImageUploadResponse(n,t.uploadID)},onBeforeClose:function(){console.log("on before prompt close");r._bIsPromptingForNewContent&&setTimeout(function(){r.onAddItemPromptClosedWithoutResponse("image")},1)}});break;case"video":r._bIsPromptingForNewContent=!0;n.createAjaxDialog({URL:n.BuildAJAXUrl("GetAddVideoEmbedForm"),Title:"Embed Video",Width:500,ContainerID:"addVideoEmbedContainer",onSuccess:function(){n.NavBar.close()},onOpen:function(){this.oCalledFrom=r;t("#addVideoEmbedContainer").data("call-back-gallery",r).find("input").first().focus()},beforeClose:function(){r._bIsPromptingForNewContent&&setTimeout(function(){r.onAddItemPromptClosedWithoutResponse("video")},1)}})}};this.getActiveLayoutIndex=function(){return p};this.getActiveGalleryItemIndex=function(){return~s&&s<e.settings.galleryItems.length?s:0};this.getActiveGalleryItem=function(){return e.settings.galleryItems[e.getActiveGalleryItemIndex()]};this.getActiveGalleryItemThumbnail=function(){return e.getGalleryItemThumbnail(e.getActiveGalleryItemIndex())};this.getGalleryItemThumbnail=function(t){var i=e.settings.galleryItems[t],r=[];return i&&(r=[i.galleryItemType,t,i.galleryItemType==="Video"?i.thumbSource===""||i.thumbSource===null?"/images/video_no_thumb.png":n.ImgUrl.toFormat(i.thumbSource,"88x68"):n.ImgUrl.toFormat(i.src,"88x68",i.imageTitleUrlBase),t===s?" active":"",i.galleryItemType==="Video"?'<span class="video-thumb"><\/span>':""]),et.replace(/\{(\d+)\}/g,function(n,t){return r[t]})};this.getThumbnailContainer=function(){return k};this.getEditorHeadline=function(){var n=this.settings.galleryItems.length;return n<1?"Attach a new "+this.settings.initPromptMediaType:n==1?this.settings.galleryItems[0].galleryItemType=="Image"?"Image Options":"Add This "+this.settings.galleryItems[0].galleryItemType+" to a Gallery?":"Edit Gallery"};this.getToolboxButtons=function(){var i=this.settings.galleryItems.length,u=!1,r,t;for(n.loggedInUser.IsStaff,t=0;t<this.settings.galleryItems.length;t++)if(this.settings.galleryItems[t].galleryItemType=="Video"){u=!0;break}if(i<1)return"<label>Please choose the "+this.settings.initPromptMediaType+" you'd like to insert.<\/label>";if(i==1||i>6||u)return"<label>Add more "+this.settings.galleryItems[this.settings.galleryItems.length-1].galleryItemType.toLowerCase()+"s to "+(i>1?"this":"create a")+" gallery:<\/label>";for(r="<label>Layout:<\/label>",t=0;t<y[i].length;t++)r+='<button class="gallery-layout-select" data-action="gallery-template-index-'+String(t)+'"><div class="gallery-layout-container'+String(t==p?" active":"")+'" data-template-index="'+String(t)+'">'+(y[i][t]=="gallery"?tt:y[i][t].replace(/\{(\d+)\}/g,""))+"<\/div><\/button>";return r};this.getEditorMenu=function(){var u=this.settings.galleryItems.length,h=!1,s='<div class="share-tip-body-edit-caption hide"><div class="share-tip-section clearfix"><span class="lbl">Caption<\/span><span class="mgt-small"><textarea name="txtImgCaption" id="txtImgCaption"><\/textarea><\/span><\/div><div class="share-tip-section last clearfix"><span class="lbl">Credit Text<\/span><input type="text" name="txtImgCreditText" id="txtImgCreditText"/><span class="lbl mgt-small">Credit URL<\/span><input type="text" name="txtImgCreditURL" id="txtImgCreditURL"/><a href="javascript:// OK" class="btn fr silver std mgt-small gallery-btn-caption-ok">OK<\/a><a href="javascript:// Cancel" class="btn fl silver std mgt-small gallery-btn-caption-cancel">Cancel<\/a><\/div><\/div>',f,i,t,r,o,c;if(u<1)return'<div class="share-tip-body-main"><div class="share-tip-section last clearfix"><span class="lbl">Please choose the '+this.settings.initPromptMediaType+" you would like to attach.<\/span><\/div><\/div>"+s;if(u==1)return f='<div class="share-tip-body-main">',this.settings.galleryItems[0].galleryItemType=="Image"&&(f+='<div class="share-tip-section clearfix"><a href="javascript:// Toggle Image Drop-Shadow" class="btn fl silver std gallery-btn-shadow-'+String(this.settings.galleryItems[0].shadow?"off":"on")+'">Toggle Image Drop-Shadow '+String(this.settings.galleryItems[0].shadow?"Off":"On")+"<\/a><\/div>",n.loggedInUser.IsStaff&&(f+='<div class="share-tip-section clearfix"><a href="javascript:// Credits" class="btn fl silver std gallery-btn-toggle-caption">Edit Credits/Caption<\/a><\/div>')),f+='<div class="share-tip-section last clearfix"><span class="lbl">Group additional images &amp; videos together with this '+this.settings.galleryItems[0].galleryItemType.toLowerCase()+' to create a gallery.<\/span><a href="javascript:// Add New Image" class="btn fl silver std mgt-small gallery-btn-new-image">+ Image<\/a><a href="javascript:// Add New Video" class="btn fl silver std mgt-small mgl-small gallery-btn-new-video">+ Video<\/a><a href="javascript:// Delete" class="btn fr silver std mgt-small gallery-btn-delete tooltip" title="Delete this item from the gallery">X<\/a><\/div>',f+"<\/div>"+s;for(t=0;t<this.settings.galleryItems.length;t++)if(this.settings.galleryItems[t].galleryItemType=="Video"){h=!0;break}if(i='<div class="share-tip-body-main"><div class="share-tip-section galleryLayoutTipSection"><span class="lbl">Layout<\/span><div class="gallery-layout-select clearfix">',u<6&&!h)for(t=0;t<y[u].length;t++)i+=y[u][t]=="gallery"?'<div class="gallery-layout-container fl mgr-smaller mgt-smaller'+String(t==p?" active":"")+'" data-template-index="'+String(t)+'">'+tt+"<\/div>":'<div class="gallery-layout-container fl mgr-smaller mgt-smaller'+String(t==p?" active":"")+'" data-template-index="'+String(t)+'">'+y[u][t].replace(/\{(\d+)\}/g,"")+"<\/div>";else i+='<div class="gallery-layout-container fl mgr-smaller mgt-smaller active" data-template-index="0">'+tt+"<\/div>",i+='<div class="fl" style="color:#999;padding:5px;width:200px;font-style:italic;"><strong>Note:<\/strong> Additional layout choices are available for image-only galleries with up to 5 images.<\/div>';for(i+="<\/div><\/div>",i+='<div class="share-tip-section last galleryItemManagementSection"><span class="lbl">Manage Gallery Images &amp; Videos<\/span><div class="gallery-item-list clearfix">',t=0;t<u;t++){r=e.settings.galleryItems[t];o="/images/video_no_thumb.png";switch(r.galleryItemType){case"Video":r.thumbSource!=""&&r.thumbSource!=null&&(o=n.ImgUrl.toFormat(r.thumbSource,"88x68"));break;case"Image":r.src!=""&&r.src!=null&&(o=n.ImgUrl.toFormat(r.src,"88x68",r.imageTitleUrlBase))}c=n.loggedInUser.IsStaff?'<span class="gallery-btn edit"><\/span>':'<span class="gallery-btn edit" style="display:none;"><\/span>';i+=String('<div class="gallery-item fl mgr-small mgt-small" data-index="{0}"><img src="{1}" width="82" height="62" alt=""><span class="gallery-btn left"><\/span><span class="gallery-btn right"><\/span>'+c+'<span class="gallery-btn delete"><\/span><\/div>').replace(/\{(\d+)\}/g,function(n,i){return i==0?t:o})}return i+='<div class="gallery-add-new fl mgr-small mgt-small"><a href="javascript:// Add New Image" class="btn silver med gallery-btn-new-image">+ Image<\/a><a href="javascript:// Add New Video" class="btn silver med gallery-btn-new-video">+ Video<\/a><\/div>',i+("<\/div><\/div><\/div>"+s)};this.setDisplayTemplate=function(n,t,i){n==null&&(n=p,t=!0);n=n<y[this.settings.galleryItems.length<6?this.settings.galleryItems.length:6].length?n:0;for(var r=0;r<this.settings.galleryItems.length;r++)if(this.settings.galleryItems[r].galleryItemType=="Video"){n=0;break}(n!=p||t)&&(p=n,nt=y[this.settings.galleryItems.length<6?this.settings.galleryItems.length:6][p],this.initDisplayTemplate(i))};this.initDisplayTemplate=function(n){var i,r;h.find("img").off("load");i=e.settings.galleryItems.length==1&&e.settings.galleryItems[0].galleryItemType=="Video"&&!e.settings.galleryItems[0].tallRatio;w.toggleClass("bleed",i);o.css("overflow","hidden").css({height:"auto",width:"auto"});d=h.width();d>800&&!i&&(d=800);n||o.height(o.height());r=function(){var l,u,r,i,s,f;for(o._bInited!==!0&&(o.height()<200&&(n?o.height(200):o.animate({height:200},{queue:!1,duration:100})),o._bInited=!0),c._iShowTimer!=null&&(clearTimeout(c._iShowTimer),c._iShowTimer=null),c._iShowTimer=setTimeout(function(){c._iShowTimer=null;c.find("div").fadeIn("fast")},250),h.empty(),i=0;i<e.settings.galleryItems.length;i++)if(l=e.settings.galleryItems[i],l.galleryItemType=="Video"&&l.embedTag=="")try{e.settings.galleryItems[i].embedTag=t(t(ot).find("figure")[i]).find(".legacy-video")[0].outerHTML}catch(a){}if(nt=="gallery")h.html(ft),e.initGalleryMode();else{if(u=[],r=null,e.settings.galleryItems.length==1)r=e.settings.galleryItems[0],r.galleryItemType!="Image"?(d=h.width(),u.push(e._getGalleryItemHtmlTag(r)),u.push("wf video-loading")):(u.push(e._getGalleryItemHtmlTag(r,"auto")),u.push(r.shadow?"wa img-shadow":"wa"));else for(i=0;i<e.settings.galleryItems.length;i++)r=e.settings.galleryItems[i],u.push(e._getGalleryItemHtmlTag(r,"auto"));h.html(nt.replace(/\{(\d+)\}/g,function(n,t){return u[t]}))}if(s=h.find("img"),f=s.length,f>0)s.each(function(){t(this).one("load",function(){if(f--,f==0){s.off("load");e.onLayoutPreloaded(n)}}).each(function(){this.complete&&t(this).trigger("load")}).error(function(){if(f--,f==0){s.off("load");e.onLayoutPreloaded(n)}})});else e.onLayoutPreloaded(n)};this.triggerContentChanged();n?(c.show(),r()):c.fadeIn("fast",r)};this.onLayoutPreloaded=function(n){var f,r,u;o.find("figure").css("background","#fff");f=o.find(".gal-row").each(function(){var n=t(this),f=!1,r,i;if(n.find(".gal-row").length>0)f=!0;else if(n.parents(".gal-row").length>0)return;var u=1,o=function(){var i=t(this),u=e.settings.galleryItems[i.data("index")],f=i.find("img"),n=d,r=f.width()||f[0]&&f[0].naturalWidth||0,o=f.height()||f[0]&&f[0].naturalHeight||0,s;i.data("min-height",null).data("max-height",null);(u.width==null||u.width<=0)&&r>0&&(u.width=r);(u.height==null||u.height<=0)&&o>0&&(u.height=o);s=t(i.children().first().parentsUntil(".gallery-layout-container").get().reverse());s.each(function(){var u=t(this),f,e;u.hasClass("gal-wa")?n=r<n-a*2?r:n-a*2:u.hasClass("gal-w2")?n=u.next().length==0&&Math.floor((n-v)/2)!=Math.ceil((n-v)/2)?n-a*2-v-Math.floor((n-a*2-v)/2):Math.floor((n-a*2-v)/2):u.hasClass("gal-w3")?n=u.next().length==0&&Math.floor((n-v)/2)!=Math.ceil((n-v)/2)?n-a*2-v*2-Math.floor((n-a*2-v*2)/3)*2:Math.floor((n-a*2-v*2)/3):u.is("figure")&&!u.hasClass("gal-wf")&&(n=n-a*2);u.width(n);i.data("min-height",Math.min(r>=n?o:9999999999,Math.floor(o/r*n),i.data("min-height")==null?999999999:i.data("min-height")));i.data("max-height",Math.max(o,Math.ceil(o/r*n),i.data("max-height")==null?1:i.data("max-height")));f=i.data("min-height");e=i.data("max-height")})},s=function(){var n=t(this),i=n.data("min-height"),r=n.data("max-height");u=Math.max(u,i)};n.find("figure").each(o).each(s);n.is("figure")&&n.each(o).each(s);r=u;n.data("row-height",r);f||(n.find("img").css({width:"auto",height:String(r)+"px"}).each(function(){var n=t(this),i;n.css("margin-left","-"+String(Math.ceil(((n.width()||n[0].naturalWidth*(r/n[0].naturalHeight))-(n.parent().is("figure")?n.parent().width():n.parent().parent().width()))/2)+"px"));n.hasClass("is-animatable")&&String(n[0].src).indexOf(".gif")==-1&&(i=n.data("animated-src"),i!=null&&i!=""&&(n[0].src=i))}),n.find("object,embed").css({height:String(r)+"px"}));!e.settings.editMode&&t(window).width()>=768&&e.settings.galleryItems.length==1&&(i=e.settings.galleryItems[0],(i.galleryItemType!=="Image"||i.src===""||i.src===null)&&i.galleryItemType==="Video"&&(i.tallRatio?w.find("figure").css({border:"0"}):w.css("background-color","#000").find("figure").css({border:"0","box-shadow":"none"})))});c._iShowTimer!=null&&(clearTimeout(c._iShowTimer),c._iShowTimer=null);c.find("div").hide();n?c.hide():c.fadeOut("fast");r=h.height();r<=0&&(u=h.html(),i.test(u)&&u.replace(i,function(){return r=Number(arguments[1]),""}));n?(o.height(r),o.css("overflow","visible"),e.triggerGalleryLoaded()):o.animate({height:r},{queue:!1,duration:100,complete:function(){o.css("overflow","visible");e.triggerGalleryLoaded()}})};this.triggerGalleryLoaded=function(){var n=t.Event("galleryLoaded");n.gallery=e;w.trigger(n)};this.triggerContentChanged=function(){var n=t.Event("contentChanged");w.trigger(n)};this.triggerGalleryItemChanged=function(){var n=t.Event("galleryItemChanged");w.trigger(n)};this.triggerGalleryEmptied=function(){var n=t.Event("galleryEmptied");w.trigger(n)};this.getCropScaleRanges=function(){};this.setActiveGalleryItem=function(n,i){if(n=="left"?n=s>0?s-1:this.settings.galleryItems.length-1:n=="right"?n=s<this.settings.galleryItems.length-1?s+1:this.settings.galleryItems.length>=0?0:-1:String(n)=="NaN"&&(n=s),n!=s||i===!0){s=n;k.find("span.active").toggleClass("active",!1);k.find("span.galleryItemIndex"+n).toggleClass("active",!0);var r=e.settings.galleryItems[s];if(i===!0){b.html(e._getGalleryItemHtmlTag(r,b.width()));return}g.height(g.height());l.fadeIn(100,function(){var n,i,u;l._iShowTimer!=null&&(clearTimeout(l._iShowTimer),l._iShowTimer=null);l._iShowTimer=setTimeout(function(){l._iShowTimer=null;l.find("div").fadeIn("fast")},250);b.empty();b.html(e._getGalleryItemHtmlTag(r,b.width()));n=function(){l._iShowTimer!=null&&(clearTimeout(l._iShowTimer),l._iShowTimer=null);l.find("div").hide();l.fadeOut(200);var n=b.height(),t=n-g.height();g.animate({height:n},{queue:!1,duration:100});o.animate({height:o.height()+t},{queue:!1,duration:100,complete:function(){e.triggerGalleryItemChanged()}})};r.galleryItemType=="Image"?(i=b.find("img"),u=i.length,u>0?i.each(function(){t(this).one("load",function(){u--;u==0&&(i.off("load"),n())}).each(function(){this.complete&&t(this).trigger("load")})}):n()):n()})}};this._getGalleryItemHtmlTag=function(n,t){var u,f,s,c,h,l,a;(typeof t=="undefined"||t=="auto"&&n.upScale)&&(t=o.width());switch(n.galleryItemType){case"Video":if(u=n.embedTag,typeof t=="number"&&t>0){var v=n.width>0?n.width:t,y=n.height>0?n.height:300,p=(y-n.chromeH)/(v-n.chromeW),w=Math.ceil((t-n.chromeW)*p)+n.chromeH;u=u.replace(r,'width="'+t+'"');u=u.replace(i,'height="'+w+'"')}return u;case"Image":return(f=e.settings.editMode?"":'<a href="'+n.oImgUrl.toString("original")+'" rel="nofollow" target="_blank">',s=e.settings.editMode?"":"<\/a>",typeof t=="number"&&t>0)?(c=n.width>0?n.width:t,h=n.height>0?n.height:"auto",h=="auto"?f+'<img src="'+n.toString(!0)+'" style="width:'+t+'px;height:auto;" alt=""'+(n.isGIPHY?' class="is-animatable" data-animated-src="'+n.toString()+'"':"")+"/>"+s:(l=t/c,a=Math.ceil(h*l),f+'<img src="'+n.toString(!0)+'" width="'+t+'" height="'+a+'" alt=""'+(n.isGIPHY?' class="is-animatable" data-animated-src="'+n.toString()+'"':"")+"/>"+s)):f+'<img src="'+n.toString(!0)+'" alt="" style="width:auto;max-width:'+o.width()+'px;"'+(n.isGIPHY?' class="is-animatable" data-animated-src="'+n.toString()+'"':"")+"/>"+s}return"<div>[Invalid Gallery Item Type. Are You Missing a Plugin?]<\/div>"};this.addGalleryItems=function(t,i,r,u){for(var f,e=0;e<t.length;e++){f=t[e];this.settings.baseEditor&&(this.settings.baseEditor.getMatchedEmbedList().push(decodeURIComponent(f.videoLink||f.largeSource||f.standardSource||f.thumbSource)),this.settings.baseEditor.getLoadedEmbedList().push(decodeURIComponent(f.videoLink||f.largeSource||f.standardSource||f.thumbSource)));switch(f.type){case"galleryVideo":this.appendGalleryItem(new n.WHTGalleryVideo({videoLink:decodeURIComponent(f.videoLink).replace(/\s/g,"%20"),embedTag:decodeURIComponent(f.embedTag),thumbSource:decodeURIComponent(f.thumbSource).replace(/\s/g,"%20"),caption:decodeURIComponent(f.caption),creditUrl:decodeURIComponent(f.creditURL).replace(/\s/g,"%20"),creditText:decodeURIComponent(f.creditText),chromeW:f.chromeW,chromeH:f.chromeH}));break;case"galleryImage":this.appendGalleryItem(new n.WHTGalleryImage({src:decodeURIComponent(f.largeSource||f.standardSource||f.thumbSource).replace(/\s/g,"%20"),width:f.largeSource?f.largeWidth:f.standardWidth,height:f.largeSource?f.largeHeight:f.standardHeight,caption:decodeURIComponent(f.caption),creditUrl:decodeURIComponent(f.creditURL).replace(/\s/g,"%20"),creditText:decodeURIComponent(f.creditText),originalUrl:decodeURIComponent(f.originalURL).replace(/\s/g,"%20"),shadow:f.shadow?f.shadow:!1,upScale:f.upScale?f.upScale:!1,scale:f.scale?f.scale:0,imageTitleUrlBase:r||f.imageTitleUrlBase||""}))}}this.setDisplayTemplate(i,null,u)};this.appendGalleryItem=function(n){this.settings.galleryItems.push(n);this.setDisplayTemplate()};this.removeGalleryItem=function(n,t){(t||confirm("Are you sure you want to delete this "+this.settings.galleryItems[n].galleryItemType.toLowerCase()+"?"))&&(this.settings.galleryItems.splice(n,1),this.setDisplayTemplate(),this.settings.galleryItems.length==0&&this.triggerGalleryEmptied())};this.toggleGalleryItemUpScale=function(n){(n==null&&(n=0),this.settings.galleryItems.length<=n)||(this.settings.galleryItems[n].upScale=!this.settings.galleryItems[n].upScale,this.setDisplayTemplate())};this.reOrderGalleryItem=function(n,t){if(!(n<0)&&!(n>this.settings.galleryItems.length)&&(t>this.settings.galleryItems.length-1?t=0:t<0&&(t=this.settings.galleryItems.length-1),n!=t)){var i=this.settings.galleryItems[t];this.settings.galleryItems[t]=this.settings.galleryItems[n];this.settings.galleryItems[n]=i;nt=="gallery"?this.setDisplayTemplate():this.setDisplayTemplate(null,!0,!0)}};this.showCaptionEditorForItem=function(n,t){var i=this.settings.galleryItems[t];n.find(".share-tip-body-main").hide();n.find(".share-tip-body-edit-caption").show();n.find("#txtImgCaption").val(i.caption).focus();n.find("#txtImgCreditText").val(i.creditText);n.find("#txtImgCreditURL").val(i.creditUrl);n.find(".gallery-btn-caption-ok").data("for-gal-index",t)};this.editGalleryItem=function(t,i,r){if(r){var u=t.find("#txtImgCreditURL").val().trim(),f=t.find("#txtImgCreditText").val().trim(),e=t.find("#txtImgCaption").val().trim();if(n.UrlRegEx.urlExact.test(f))if(u=="")u=f,f="";else{n.Alerts.DisplayErrorNotification("Please don't use a URL as your Credit Text");return}else if(u==""||n.UrlRegEx.urlExact.test(u))u!=""&&u.toLowerCase().indexOf("http://")!=0&&u.toLowerCase().indexOf("https://")!=0&&(u="http://"+u);else{n.Alerts.DisplayErrorNotification("Invalid Credit URL");return}this.settings.galleryItems[i].caption=e;this.settings.galleryItems[i].creditText=f;this.settings.galleryItems[i].creditUrl=u}t.find(".share-tip-body-edit-caption").hide();t.find(".share-tip-body-main").show()};this.toggleImageShadow=function(n,t){this.settings.galleryItems[n].shadow!=t&&(this.settings.galleryItems[n].shadow=t==!0,this.setDisplayTemplate())};this.destroy=function(){};this.onLeftClick=function(n){e.setActiveGalleryItem.apply(e,["left",n])};this.onRightClick=function(n){e.setActiveGalleryItem.apply(e,["right",n])};this.onItemThumbnailClick=function(n){e.setActiveGalleryItem.apply(e,[Number(t(this).data("index")),n])};this.onImageUploadResponse=function(t){if(e._bIsPromptingForNewContent=!1,n.NavBar.close(),t.Error!=null){n.Alerts.DisplayErrorNotification(t.Error.ErrorText);return}var i=t.Response.Value,r=new n.WHTGalleryImage(n.ImgUrl.toImgID(i.ImageID)+".jpg",i.OriginalWidth,i.OriginalHeight,"",i.CreditUrl,"",i.OriginalWebUrl,i.OriginalWidth<532,!1,0);this.appendGalleryItem(r);this.settings.galleryItems.length==2&&this.setDisplayTemplate(1);n.loggedInUser.IsStaff&&this.settings.galleryBlock&&this.settings.galleryBlock.onEditMenuClick&&setTimeout(function(){e.settings.galleryBlock.onEditMenuClick("gallery-metadata",e.settings.galleryItems.length-1,"Credit")},300)};this.onVideoEmbedResponse=function(i){var r,u,f,o;if(e._bIsPromptingForNewContent=!1,n.NavBar.close(),i.Error!=null){n.Alerts.DisplayErrorNotification(i.Error.ErrorText);return}if(r=i.Response.Value,r.rssItems)u=t.map(r.rssItems,function(n){return n.links=t.map(n.links,function(n){return n.MediaType&&n.MediaType.indexOf("audio")>-1?n:null}),n.links&&n.links.length==1?{title:encodeURIComponent(n.title),URL:n.links[0].Uri}:null}),n.createAjaxDialog({URL:n.BuildAJAXUrl("GetPodcastSelectorForm",{Podcasts:JSON.stringify(u)}),Title:"Select Podcast",Width:500,ContainerID:"selectPodcastContainer",onOpen:function(){e.oCalledFrom=e;t("#selectPodcastContainer").data("call-back-gallery",e)},beforeClose:function(){e._bIsPromptingForNewContent&&setTimeout(function(){e.onAddItemPromptClosedWithoutResponse("video")},1)}});else{if(r.oEmbed!=null){e.settings.baseEditor!=null&&(f=e.settings.baseEditor.attachBlockWithDefaultOptions("EBEmbed",!1,!0,{insertAfterBlock:e.settings.galleryBlock}),f.xml(r));e.onAddItemPromptClosedWithoutResponse("video");return}o=new n.WHTGalleryVideo(r.videoLink,r.embedTag,n.ImgUrl.toImgID(r.thumbSource)+".jpg","",r.creditUrl,"",r.videoID,r.chromeW,r.chromeH);this.appendGalleryItem(o)}};this.onAddItemPromptClosedWithoutResponse=function(){e._bIsPromptingForNewContent=!1;e.settings.galleryItems.length==0&&this.triggerGalleryEmptied()}};t.fn.whtGallery=function(i){return this.each(function(){var r=t(this),u;if(r.data("whtGallery"))return r.data("whtGallery");u=new n.WHTGallery(r,i);r.data("whtGallery",u);u.init()})}}(window.WHT=window.WHT||{},jQuery);